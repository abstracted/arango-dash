<!DOCTYPE HTML>
<html lang="en" >
    <!-- Start book ArangoDB v3.0.x-devel (2016-06-02) HTTP API Documentation -->
    <head>
        <!-- head:start -->
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>AQL Queries | ArangoDB v3.0.x-devel (2016-06-02) HTTP API Documentation</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.6.7">
        <meta name="author" content="ArangoDB GmbH">
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="../gitbook/style.css">
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-toggle-chapters/toggle.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
    
        <link rel="stylesheet" href="../styles/website.css">
    

        
    
    
    <link rel="next" href="../AqlQueryCache/index.html" />
    
    
    <link rel="prev" href="../AqlQueryCursor/AccessingCursors.html" />
    

        <!-- head:end -->
<script type="text/javascript" src="../styles/header.js"></script><link rel="stylesheet" type="text/css" href="../styles/header.css">
    </head>
    <body>
        <!-- body:start -->
<div id="header">
  <div id="logo">
    <a href="https://arangodb.com/">
      <img src="https://docs.arangodb.com/assets/arangodb_logo_2016.png">
    </a>
  </div>
  <div id="logo-small">
    <a href="https://arangodb.com/">
      <img src="https://docs.arangodb.com/assets/arangodb_logo_small_2016.png">
    </a>
  </div>
  <select id="version-switcher">
    <option value="devel">v3.0.x-devel (2016-06-02)</option>
    <option value="2.8">v2.8</option>
    <option value="2.7">v2.7</option>
    <option value="2.6">v2.6</option>
    <option value="2.5">v2.5</option>
    <option value="2.4">v2.4</option>
    <option value="2.3">v2.3</option>
    <option value="2.2">v2.2</option>
    <option value="2.1">v2.1</option>
  </select>
  <div class="google-search">
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
  <ul id="navmenu">
    <li>
      <a href="https://docs.arangodb.com/devel/Manual/index.html">Manual</a>
    </li>
    <li>
      <a href="https://docs.arangodb.com/devel/AQL/index.html">AQL</a>
    </li>
    <li class="active-tab">
      <a href="https://docs.arangodb.com/devel/HTTP/index.html">HTTP</a>
    </li>
    <li>
      <a href="https://docs.arangodb.com/cookbook">Cookbook</a>
    </li>
    <li class="socialIcons">
      <a href="https://github.com/ArangoDB/ArangoDB/issues" target="blank" name="github">
        <i title="GitHub" class="fa fa-github"></i>
      </a>
    </li>
    <li class="socialIcons">
      <a href="http://stackoverflow.com/questions/tagged/arangodb" target="blank" name="stackoverflow">
        <i title="Stackoverflow" class="fa fa-stack-overflow"></i>
      </a>
    </li>
    <li class="socialIcons socialIcons-googlegroups">
      <a href="https://groups.google.com/forum/#!forum/arangodb" target="blank" name="google groups">
        <img title="Google Groups" alt="Google Groups" src="https://docs.arangodb.com/assets/googlegroupsIcon.png" />
      </a>
    </li>
  </ul>
</div>
        
    <div class="book"
        data-level="10"
        data-chapter-title="AQL Queries"
        data-filepath="AqlQuery/README.md"
        data-basepath=".."
        data-revision="Thu Jun 02 2016 11:44:44 GMT+0000 (UTC)"
        data-innerlanguage="">
    

<div class="book-summary">
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="General/index.html">
            
                
                    <a href="../General/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        General HTTP Handling
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2" data-path="Api/index.html">
            
                
                    <a href="../Api/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        HTTP Interface
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3" data-path="Database/index.html">
            
                
                    <a href="../Database/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        Databases
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1" data-path="Database/DatabaseEndpoint.html">
            
                
                    <a href="../Database/DatabaseEndpoint.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.</b>
                        
                        To-Endpoint
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="Database/DatabaseManagement.html">
            
                
                    <a href="../Database/DatabaseManagement.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.</b>
                        
                        Management
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="Database/NotesOnDatabases.html">
            
                
                    <a href="../Database/NotesOnDatabases.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.3.</b>
                        
                        Notes on Databases
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4" data-path="Collection/index.html">
            
                
                    <a href="../Collection/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        Collections
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1" data-path="Collection/Creating.html">
            
                
                    <a href="../Collection/Creating.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.1.</b>
                        
                        Creating
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="Collection/Getting.html">
            
                
                    <a href="../Collection/Getting.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.2.</b>
                        
                        Getting Information
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="Collection/Modifying.html">
            
                
                    <a href="../Collection/Modifying.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.3.</b>
                        
                        Modifying
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5" data-path="Document/index.html">
            
                
                    <a href="../Document/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                        Documents
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.1" data-path="Document/AddressAndEtag.html">
            
                
                    <a href="../Document/AddressAndEtag.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.1.</b>
                        
                        Basics and Terminology
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="Document/WorkingWithDocuments.html">
            
                
                    <a href="../Document/WorkingWithDocuments.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.2.</b>
                        
                        Working with Documents
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6" data-path="Edge/index.html">
            
                
                    <a href="../Edge/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                        Edges
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1" data-path="Edge/AddressAndEtag.html">
            
                
                    <a href="../Edge/AddressAndEtag.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.1.</b>
                        
                        Address and ETag
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.2" data-path="Edge/WorkingWithEdges.html">
            
                
                    <a href="../Edge/WorkingWithEdges.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.2.</b>
                        
                        Working with Edges
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="7" data-path="Gharial/index.html">
            
                
                    <a href="../Gharial/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.</b>
                        
                        General Graph
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="7.1" data-path="Gharial/Management.html">
            
                
                    <a href="../Gharial/Management.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.1.</b>
                        
                        Management
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.2" data-path="Gharial/Vertices.html">
            
                
                    <a href="../Gharial/Vertices.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.2.</b>
                        
                        Vertices
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.3" data-path="Gharial/Edges.html">
            
                
                    <a href="../Gharial/Edges.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.3.</b>
                        
                        Edges
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="8" data-path="Traversal/index.html">
            
                
                    <a href="../Traversal/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.</b>
                        
                        Traversals
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9" data-path="AqlQueryCursor/index.html">
            
                
                    <a href="../AqlQueryCursor/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.</b>
                        
                        AQL Query Cursors
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="9.1" data-path="AqlQueryCursor/QueryResults.html">
            
                
                    <a href="../AqlQueryCursor/QueryResults.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.1.</b>
                        
                        Query Results
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9.2" data-path="AqlQueryCursor/AccessingCursors.html">
            
                
                    <a href="../AqlQueryCursor/AccessingCursors.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.2.</b>
                        
                        Accessing Cursors
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter active" data-level="10" data-path="AqlQuery/index.html">
            
                
                    <a href="../AqlQuery/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.</b>
                        
                        AQL Queries
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="11" data-path="AqlQueryCache/index.html">
            
                
                    <a href="../AqlQueryCache/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>11.</b>
                        
                        AQL Query Cache
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="12" data-path="AqlUserFunctions/index.html">
            
                
                    <a href="../AqlUserFunctions/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>12.</b>
                        
                        AQL User Functions Management
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="13" data-path="SimpleQuery/index.html">
            
                
                    <a href="../SimpleQuery/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>13.</b>
                        
                        Simple Queries
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="14" data-path="AsyncResultsManagement/index.html">
            
                
                    <a href="../AsyncResultsManagement/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>14.</b>
                        
                        Async Result Handling
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="15" data-path="BulkImports/index.html">
            
                
                    <a href="../BulkImports/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>15.</b>
                        
                        Bulk Import / Export
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="15.1" data-path="BulkImports/ImportingSelfContained.html">
            
                
                    <a href="../BulkImports/ImportingSelfContained.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>15.1.</b>
                        
                        JSON Documents
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="15.2" data-path="BulkImports/ImportingHeadersAndValues.html">
            
                
                    <a href="../BulkImports/ImportingHeadersAndValues.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>15.2.</b>
                        
                        Headers &amp; Values
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="15.3" data-path="BatchRequest/index.html">
            
                
                    <a href="../BatchRequest/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>15.3.</b>
                        
                        Batch Requests
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="15.4" data-path="Export/index.html">
            
                
                    <a href="../Export/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>15.4.</b>
                        
                        Exporting data
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="16" data-path="Indexes/index.html">
            
                
                    <a href="../Indexes/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>16.</b>
                        
                        Indexes
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="16.1" data-path="Indexes/WorkingWith.html">
            
                
                    <a href="../Indexes/WorkingWith.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>16.1.</b>
                        
                        Working with Indexes
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="16.2" data-path="Indexes/Hash.html">
            
                
                    <a href="../Indexes/Hash.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>16.2.</b>
                        
                        Hash
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="16.3" data-path="Indexes/Skiplist.html">
            
                
                    <a href="../Indexes/Skiplist.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>16.3.</b>
                        
                        Skiplist
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="16.4" data-path="Indexes/Geo.html">
            
                
                    <a href="../Indexes/Geo.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>16.4.</b>
                        
                        Geo
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="16.5" data-path="Indexes/Fulltext.html">
            
                
                    <a href="../Indexes/Fulltext.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>16.5.</b>
                        
                        Fulltext
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="17" data-path="Transaction/index.html">
            
                
                    <a href="../Transaction/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>17.</b>
                        
                        Transactions
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="18" data-path="Replications/index.html">
            
                
                    <a href="../Replications/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>18.</b>
                        
                        Replication
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="18.1" data-path="Replications/ReplicationDump.html">
            
                
                    <a href="../Replications/ReplicationDump.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>18.1.</b>
                        
                        Replication Dump
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="18.2" data-path="Replications/ReplicationLogger.html">
            
                
                    <a href="../Replications/ReplicationLogger.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>18.2.</b>
                        
                        Replication Logger
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="18.3" data-path="Replications/ReplicationApplier.html">
            
                
                    <a href="../Replications/ReplicationApplier.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>18.3.</b>
                        
                        Replication Applier
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="18.4" data-path="Replications/OtherReplication.html">
            
                
                    <a href="../Replications/OtherReplication.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>18.4.</b>
                        
                        Other Replication Commands
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="19" data-path="ShardingInterface/index.html">
            
                
                    <a href="../ShardingInterface/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>19.</b>
                        
                        Sharding
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="20" data-path="AdministrationAndMonitoring/index.html">
            
                
                    <a href="../AdministrationAndMonitoring/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>20.</b>
                        
                        Monitoring
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="21" data-path="Endpoints/index.html">
            
                
                    <a href="../Endpoints/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>21.</b>
                        
                        Endpoints
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="22" data-path="UserManagement/index.html">
            
                
                    <a href="../UserManagement/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>22.</b>
                        
                        User Management
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="23" data-path="Tasks/index.html">
            
                
                    <a href="../Tasks/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>23.</b>
                        
                        Tasks
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="24" data-path="MiscellaneousFunctions/index.html">
            
                
                    <a href="../MiscellaneousFunctions/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>24.</b>
                        
                        Miscellaneous functions
                    </a>
            
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Published with GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../" >ArangoDB v3.0.x-devel (2016-06-02) HTTP API Documentation</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <p><a name="http_interface_for_aql_queries"></a></p>
<h1 id="http-interface-for-aql-queries">HTTP Interface for AQL Queries</h1>
<p><a name="explaining_and_parsing_queries"></a></p>
<h3 id="explaining-and-parsing-queries">Explaining and parsing queries</h3>
<p>ArangoDB has an HTTP interface to syntactically validate AQL queries.
Furthermore, it offers an HTTP interface to retrieve the execution plan for any
valid AQL query.</p>
<p>Both functionalities do not actually execute the supplied AQL query, but only
inspect it and return meta information about it.</p>
<!-- js/actions/api-explain.js -->
<h3 id="explain-an-aql-query">Explain an AQL query</h3>
<p> explain an AQL query and return information about it</p>
<p><code>POST /_api/explain</code>
A JSON object describing the query and query parameters.</p>
<p><strong>Body Parameters</strong></p>
<ul>
<li><strong>query</strong>: the query which you want explained; If the query references any bind variables,
these must also be passed in the attribute <em>bindVars</em>. Additional
options for the query can be passed in the <em>options</em> attribute.</li>
<li><strong>options</strong>:<ul>
<li><strong>optimizer.rules</strong>: an array of to-be-included or to-be-excluded optimizer rules
can be put into this attribute, telling the optimizer to include or exclude
specific rules. To disable a rule, prefix its name with a <code>-</code>, to enable a rule, prefix it
with a <code>+</code>. There is also a pseudo-rule <code>all</code>, which will match all optimizer rules. of type string</li>
<li><strong>maxNumberOfPlans</strong>: an optional maximum number of plans that the optimizer is 
allowed to generate. Setting this attribute to a low value allows to put a
cap on the amount of work the optimizer does.</li>
<li><strong>allPlans</strong>: if set to <em>true</em>, all possible execution plans will be returned.
The default is <em>false</em>, meaning only the optimal plan will be returned.</li>
</ul>
</li>
<li><strong>bindVars</strong>: key/value pairs representing the bind values of type object</li>
</ul>
<div id="RestExplainValid_container">
<div id="RestExplainValid_long" onclick="" style="Display: none;">
<pre>
shell&gt; curl -X POST --data-binary @- --dump - http://localhost:8529/_api/explain &lt;&lt;EOF
{ 
  <span class="hljs-string">&quot;query&quot;</span> : <span class="hljs-string">&quot;FOR p IN products RETURN p&quot;</span> 
}
EOF

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">200</span> OK
content-type: application/json; charset=utf<span class="hljs-number">-8</span>

{ 
  <span class="hljs-string">&quot;plan&quot;</span> : { 
    <span class="hljs-string">&quot;nodes&quot;</span> : [ 
      { 
        <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;SingletonNode&quot;</span>, 
        <span class="hljs-string">&quot;dependencies&quot;</span> : [ ], 
        <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">1</span>, 
        <span class="hljs-string">&quot;estimatedCost&quot;</span> : <span class="hljs-number">1</span>, 
        <span class="hljs-string">&quot;estimatedNrItems&quot;</span> : <span class="hljs-number">1</span> 
      }, 
      { 
        <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;EnumerateCollectionNode&quot;</span>, 
        <span class="hljs-string">&quot;dependencies&quot;</span> : [ 
          <span class="hljs-number">1</span> 
        ], 
        <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">2</span>, 
        <span class="hljs-string">&quot;estimatedCost&quot;</span> : <span class="hljs-number">11</span>, 
        <span class="hljs-string">&quot;estimatedNrItems&quot;</span> : <span class="hljs-number">10</span>, 
        <span class="hljs-string">&quot;database&quot;</span> : <span class="hljs-string">&quot;_system&quot;</span>, 
        <span class="hljs-string">&quot;collection&quot;</span> : <span class="hljs-string">&quot;products&quot;</span>, 
        <span class="hljs-string">&quot;outVariable&quot;</span> : { 
          <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">0</span>, 
          <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;p&quot;</span> 
        }, 
        <span class="hljs-string">&quot;random&quot;</span> : <span class="hljs-literal">false</span> 
      }, 
      { 
        <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;ReturnNode&quot;</span>, 
        <span class="hljs-string">&quot;dependencies&quot;</span> : [ 
          <span class="hljs-number">2</span> 
        ], 
        <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">3</span>, 
        <span class="hljs-string">&quot;estimatedCost&quot;</span> : <span class="hljs-number">21</span>, 
        <span class="hljs-string">&quot;estimatedNrItems&quot;</span> : <span class="hljs-number">10</span>, 
        <span class="hljs-string">&quot;inVariable&quot;</span> : { 
          <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">0</span>, 
          <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;p&quot;</span> 
        } 
      } 
    ], 
    <span class="hljs-string">&quot;rules&quot;</span> : [ ], 
    <span class="hljs-string">&quot;collections&quot;</span> : [ 
      { 
        <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;products&quot;</span>, 
        <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;read&quot;</span> 
      } 
    ], 
    <span class="hljs-string">&quot;variables&quot;</span> : [ 
      { 
        <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">0</span>, 
        <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;p&quot;</span> 
      } 
    ], 
    <span class="hljs-string">&quot;estimatedCost&quot;</span> : <span class="hljs-number">21</span>, 
    <span class="hljs-string">&quot;estimatedNrItems&quot;</span> : <span class="hljs-number">10</span> 
  }, 
  <span class="hljs-string">&quot;warnings&quot;</span> : [ ], 
  <span class="hljs-string">&quot;stats&quot;</span> : { 
    <span class="hljs-string">&quot;rulesExecuted&quot;</span> : <span class="hljs-number">26</span>, 
    <span class="hljs-string">&quot;rulesSkipped&quot;</span> : <span class="hljs-number">0</span>, 
    <span class="hljs-string">&quot;plansCreated&quot;</span> : <span class="hljs-number">1</span> 
  }, 
  <span class="hljs-string">&quot;cacheable&quot;</span> : <span class="hljs-literal">true</span>, 
  <span class="hljs-string">&quot;error&quot;</span> : <span class="hljs-literal">false</span>, 
  <span class="hljs-string">&quot;code&quot;</span> : <span class="hljs-number">200</span> 
}
</pre>
</div>
<div id="RestExplainValid_short" onclick="$(&apos;#RestExplainValid_short&apos;).hide(); $(&apos;#RestExplainValid_long&apos;).show();">
<pre>
shell&gt; curl -X POST --data-binary @- --dump - http://localhost:8529/_api/explain &lt;&lt;EOF
{ 
  <span class="hljs-string">&quot;query&quot;</span> : <span class="hljs-string">&quot;FOR p IN products RETURN p&quot;</span> 
}
EOF

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">200</span> OK
content-type: application/json; charset=utf<span class="hljs-number">-8</span>

</pre><div class="example_show_button">show response body</div>
</div>
</div>

<p>A plan with some optimizer rules applied</p>
<div id="RestExplainOptimizerRules_container">
<div id="RestExplainOptimizerRules_long" onclick="" style="Display: none;">
<pre>
shell&gt; curl -X POST --data-binary @- --dump - http://localhost:8529/_api/explain &lt;&lt;EOF
{ 
  <span class="hljs-string">&quot;query&quot;</span> : <span class="hljs-string">&quot;FOR p IN products LET a = p.id FILTER a == 4 LET name = p.name SORT p.id LIMIT 1 RETURN name&quot;</span> 
}
EOF

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">200</span> OK
content-type: application/json; charset=utf<span class="hljs-number">-8</span>

{ 
  <span class="hljs-string">&quot;plan&quot;</span> : { 
    <span class="hljs-string">&quot;nodes&quot;</span> : [ 
      { 
        <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;SingletonNode&quot;</span>, 
        <span class="hljs-string">&quot;dependencies&quot;</span> : [ ], 
        <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">1</span>, 
        <span class="hljs-string">&quot;estimatedCost&quot;</span> : <span class="hljs-number">1</span>, 
        <span class="hljs-string">&quot;estimatedNrItems&quot;</span> : <span class="hljs-number">1</span> 
      }, 
      { 
        <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;IndexNode&quot;</span>, 
        <span class="hljs-string">&quot;dependencies&quot;</span> : [ 
          <span class="hljs-number">1</span> 
        ], 
        <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">11</span>, 
        <span class="hljs-string">&quot;estimatedCost&quot;</span> : <span class="hljs-number">11</span>, 
        <span class="hljs-string">&quot;estimatedNrItems&quot;</span> : <span class="hljs-number">10</span>, 
        <span class="hljs-string">&quot;database&quot;</span> : <span class="hljs-string">&quot;_system&quot;</span>, 
        <span class="hljs-string">&quot;collection&quot;</span> : <span class="hljs-string">&quot;products&quot;</span>, 
        <span class="hljs-string">&quot;outVariable&quot;</span> : { 
          <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">0</span>, 
          <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;p&quot;</span> 
        }, 
        <span class="hljs-string">&quot;indexes&quot;</span> : [ 
          { 
            <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-string">&quot;10664&quot;</span>, 
            <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;skiplist&quot;</span>, 
            <span class="hljs-string">&quot;fields&quot;</span> : [ 
              <span class="hljs-string">&quot;id&quot;</span> 
            ], 
            <span class="hljs-string">&quot;unique&quot;</span> : <span class="hljs-literal">false</span>, 
            <span class="hljs-string">&quot;sparse&quot;</span> : <span class="hljs-literal">false</span> 
          } 
        ], 
        <span class="hljs-string">&quot;condition&quot;</span> : { 
        }, 
        <span class="hljs-string">&quot;reverse&quot;</span> : <span class="hljs-literal">false</span> 
      }, 
      { 
        <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;CalculationNode&quot;</span>, 
        <span class="hljs-string">&quot;dependencies&quot;</span> : [ 
          <span class="hljs-number">11</span> 
        ], 
        <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">4</span>, 
        <span class="hljs-string">&quot;estimatedCost&quot;</span> : <span class="hljs-number">21</span>, 
        <span class="hljs-string">&quot;estimatedNrItems&quot;</span> : <span class="hljs-number">10</span>, 
        <span class="hljs-string">&quot;expression&quot;</span> : { 
          <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;compare ==&quot;</span>, 
          <span class="hljs-string">&quot;subNodes&quot;</span> : [ 
            { 
              <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;attribute access&quot;</span>, 
              <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;id&quot;</span>, 
              <span class="hljs-string">&quot;subNodes&quot;</span> : [ 
                { 
                  <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;reference&quot;</span>, 
                  <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;p&quot;</span>, 
                  <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">0</span> 
                } 
              ] 
            }, 
            { 
              <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;value&quot;</span>, 
              <span class="hljs-string">&quot;value&quot;</span> : <span class="hljs-number">4</span> 
            } 
          ] 
        }, 
        <span class="hljs-string">&quot;outVariable&quot;</span> : { 
          <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">4</span>, 
          <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;3&quot;</span> 
        }, 
        <span class="hljs-string">&quot;canThrow&quot;</span> : <span class="hljs-literal">false</span>, 
        <span class="hljs-string">&quot;expressionType&quot;</span> : <span class="hljs-string">&quot;simple&quot;</span> 
      }, 
      { 
        <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;FilterNode&quot;</span>, 
        <span class="hljs-string">&quot;dependencies&quot;</span> : [ 
          <span class="hljs-number">4</span> 
        ], 
        <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">5</span>, 
        <span class="hljs-string">&quot;estimatedCost&quot;</span> : <span class="hljs-number">31</span>, 
        <span class="hljs-string">&quot;estimatedNrItems&quot;</span> : <span class="hljs-number">10</span>, 
        <span class="hljs-string">&quot;inVariable&quot;</span> : { 
          <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">4</span>, 
          <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;3&quot;</span> 
        } 
      }, 
      { 
        <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;LimitNode&quot;</span>, 
        <span class="hljs-string">&quot;dependencies&quot;</span> : [ 
          <span class="hljs-number">5</span> 
        ], 
        <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">9</span>, 
        <span class="hljs-string">&quot;estimatedCost&quot;</span> : <span class="hljs-number">32</span>, 
        <span class="hljs-string">&quot;estimatedNrItems&quot;</span> : <span class="hljs-number">1</span>, 
        <span class="hljs-string">&quot;offset&quot;</span> : <span class="hljs-number">0</span>, 
        <span class="hljs-string">&quot;limit&quot;</span> : <span class="hljs-number">1</span>, 
        <span class="hljs-string">&quot;fullCount&quot;</span> : <span class="hljs-literal">false</span> 
      }, 
      { 
        <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;CalculationNode&quot;</span>, 
        <span class="hljs-string">&quot;dependencies&quot;</span> : [ 
          <span class="hljs-number">9</span> 
        ], 
        <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">6</span>, 
        <span class="hljs-string">&quot;estimatedCost&quot;</span> : <span class="hljs-number">33</span>, 
        <span class="hljs-string">&quot;estimatedNrItems&quot;</span> : <span class="hljs-number">1</span>, 
        <span class="hljs-string">&quot;expression&quot;</span> : { 
          <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;attribute access&quot;</span>, 
          <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;name&quot;</span>, 
          <span class="hljs-string">&quot;subNodes&quot;</span> : [ 
            { 
              <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;reference&quot;</span>, 
              <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;p&quot;</span>, 
              <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">0</span> 
            } 
          ] 
        }, 
        <span class="hljs-string">&quot;outVariable&quot;</span> : { 
          <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">2</span>, 
          <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;name&quot;</span> 
        }, 
        <span class="hljs-string">&quot;canThrow&quot;</span> : <span class="hljs-literal">false</span>, 
        <span class="hljs-string">&quot;expressionType&quot;</span> : <span class="hljs-string">&quot;attribute&quot;</span> 
      }, 
      { 
        <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;ReturnNode&quot;</span>, 
        <span class="hljs-string">&quot;dependencies&quot;</span> : [ 
          <span class="hljs-number">6</span> 
        ], 
        <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">10</span>, 
        <span class="hljs-string">&quot;estimatedCost&quot;</span> : <span class="hljs-number">34</span>, 
        <span class="hljs-string">&quot;estimatedNrItems&quot;</span> : <span class="hljs-number">1</span>, 
        <span class="hljs-string">&quot;inVariable&quot;</span> : { 
          <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">2</span>, 
          <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;name&quot;</span> 
        } 
      } 
    ], 
    <span class="hljs-string">&quot;rules&quot;</span> : [ 
      <span class="hljs-string">&quot;move-calculations-up&quot;</span>, 
      <span class="hljs-string">&quot;remove-redundant-calculations&quot;</span>, 
      <span class="hljs-string">&quot;remove-unnecessary-calculations&quot;</span>, 
      <span class="hljs-string">&quot;move-calculations-up-2&quot;</span>, 
      <span class="hljs-string">&quot;use-index-for-sort&quot;</span>, 
      <span class="hljs-string">&quot;remove-unnecessary-calculations-2&quot;</span>, 
      <span class="hljs-string">&quot;move-calculations-down&quot;</span> 
    ], 
    <span class="hljs-string">&quot;collections&quot;</span> : [ 
      { 
        <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;products&quot;</span>, 
        <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;read&quot;</span> 
      } 
    ], 
    <span class="hljs-string">&quot;variables&quot;</span> : [ 
      { 
        <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">6</span>, 
        <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;5&quot;</span> 
      }, 
      { 
        <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">4</span>, 
        <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;3&quot;</span> 
      }, 
      { 
        <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">2</span>, 
        <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;name&quot;</span> 
      }, 
      { 
        <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">1</span>, 
        <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;a&quot;</span> 
      }, 
      { 
        <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">0</span>, 
        <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;p&quot;</span> 
      } 
    ], 
    <span class="hljs-string">&quot;estimatedCost&quot;</span> : <span class="hljs-number">34</span>, 
    <span class="hljs-string">&quot;estimatedNrItems&quot;</span> : <span class="hljs-number">1</span> 
  }, 
  <span class="hljs-string">&quot;warnings&quot;</span> : [ ], 
  <span class="hljs-string">&quot;stats&quot;</span> : { 
    <span class="hljs-string">&quot;rulesExecuted&quot;</span> : <span class="hljs-number">26</span>, 
    <span class="hljs-string">&quot;rulesSkipped&quot;</span> : <span class="hljs-number">0</span>, 
    <span class="hljs-string">&quot;plansCreated&quot;</span> : <span class="hljs-number">1</span> 
  }, 
  <span class="hljs-string">&quot;cacheable&quot;</span> : <span class="hljs-literal">true</span>, 
  <span class="hljs-string">&quot;error&quot;</span> : <span class="hljs-literal">false</span>, 
  <span class="hljs-string">&quot;code&quot;</span> : <span class="hljs-number">200</span> 
}
</pre>
</div>
<div id="RestExplainOptimizerRules_short" onclick="$(&apos;#RestExplainOptimizerRules_short&apos;).hide(); $(&apos;#RestExplainOptimizerRules_long&apos;).show();">
<pre>
shell&gt; curl -X POST --data-binary @- --dump - http://localhost:8529/_api/explain &lt;&lt;EOF
{ 
  <span class="hljs-string">&quot;query&quot;</span> : <span class="hljs-string">&quot;FOR p IN products LET a = p.id FILTER a == 4 LET name = p.name SORT p.id LIMIT 1 RETURN name&quot;</span> 
}
EOF

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">200</span> OK
content-type: application/json; charset=utf<span class="hljs-number">-8</span>

</pre><div class="example_show_button">show response body</div>
</div>
</div>

<p>Using some options</p>
<div id="RestExplainOptions_container">
<div id="RestExplainOptions_long" onclick="" style="Display: none;">
<pre>
shell&gt; curl -X POST --data-binary @- --dump - http://localhost:8529/_api/explain &lt;&lt;EOF
{ 
  <span class="hljs-string">&quot;query&quot;</span> : <span class="hljs-string">&quot;FOR p IN products LET a = p.id FILTER a == 4 LET name = p.name SORT p.id LIMIT 1 RETURN name&quot;</span>, 
  <span class="hljs-string">&quot;options&quot;</span> : { 
    <span class="hljs-string">&quot;maxNumberOfPlans&quot;</span> : <span class="hljs-number">2</span>, 
    <span class="hljs-string">&quot;allPlans&quot;</span> : <span class="hljs-literal">true</span>, 
    <span class="hljs-string">&quot;optimizer&quot;</span> : { 
      <span class="hljs-string">&quot;rules&quot;</span> : [ 
        <span class="hljs-string">&quot;-all&quot;</span>, 
        <span class="hljs-string">&quot;+use-index-for-sort&quot;</span>, 
        <span class="hljs-string">&quot;+use-index-range&quot;</span> 
      ] 
    } 
  } 
}
EOF

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">200</span> OK
content-type: application/json; charset=utf<span class="hljs-number">-8</span>

{ 
  <span class="hljs-string">&quot;plans&quot;</span> : [ 
    { 
      <span class="hljs-string">&quot;nodes&quot;</span> : [ 
        { 
          <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;SingletonNode&quot;</span>, 
          <span class="hljs-string">&quot;dependencies&quot;</span> : [ ], 
          <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">1</span>, 
          <span class="hljs-string">&quot;estimatedCost&quot;</span> : <span class="hljs-number">1</span>, 
          <span class="hljs-string">&quot;estimatedNrItems&quot;</span> : <span class="hljs-number">1</span> 
        }, 
        { 
          <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;IndexNode&quot;</span>, 
          <span class="hljs-string">&quot;dependencies&quot;</span> : [ 
            <span class="hljs-number">1</span> 
          ], 
          <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">11</span>, 
          <span class="hljs-string">&quot;estimatedCost&quot;</span> : <span class="hljs-number">11</span>, 
          <span class="hljs-string">&quot;estimatedNrItems&quot;</span> : <span class="hljs-number">10</span>, 
          <span class="hljs-string">&quot;database&quot;</span> : <span class="hljs-string">&quot;_system&quot;</span>, 
          <span class="hljs-string">&quot;collection&quot;</span> : <span class="hljs-string">&quot;products&quot;</span>, 
          <span class="hljs-string">&quot;outVariable&quot;</span> : { 
            <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">0</span>, 
            <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;p&quot;</span> 
          }, 
          <span class="hljs-string">&quot;indexes&quot;</span> : [ 
            { 
              <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-string">&quot;10702&quot;</span>, 
              <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;skiplist&quot;</span>, 
              <span class="hljs-string">&quot;fields&quot;</span> : [ 
                <span class="hljs-string">&quot;id&quot;</span> 
              ], 
              <span class="hljs-string">&quot;unique&quot;</span> : <span class="hljs-literal">false</span>, 
              <span class="hljs-string">&quot;sparse&quot;</span> : <span class="hljs-literal">false</span> 
            } 
          ], 
          <span class="hljs-string">&quot;condition&quot;</span> : { 
          }, 
          <span class="hljs-string">&quot;reverse&quot;</span> : <span class="hljs-literal">false</span> 
        }, 
        { 
          <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;CalculationNode&quot;</span>, 
          <span class="hljs-string">&quot;dependencies&quot;</span> : [ 
            <span class="hljs-number">11</span> 
          ], 
          <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">3</span>, 
          <span class="hljs-string">&quot;estimatedCost&quot;</span> : <span class="hljs-number">21</span>, 
          <span class="hljs-string">&quot;estimatedNrItems&quot;</span> : <span class="hljs-number">10</span>, 
          <span class="hljs-string">&quot;expression&quot;</span> : { 
            <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;attribute access&quot;</span>, 
            <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;id&quot;</span>, 
            <span class="hljs-string">&quot;subNodes&quot;</span> : [ 
              { 
                <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;reference&quot;</span>, 
                <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;p&quot;</span>, 
                <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">0</span> 
              } 
            ] 
          }, 
          <span class="hljs-string">&quot;outVariable&quot;</span> : { 
            <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">1</span>, 
            <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;a&quot;</span> 
          }, 
          <span class="hljs-string">&quot;canThrow&quot;</span> : <span class="hljs-literal">false</span>, 
          <span class="hljs-string">&quot;expressionType&quot;</span> : <span class="hljs-string">&quot;attribute&quot;</span> 
        }, 
        { 
          <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;CalculationNode&quot;</span>, 
          <span class="hljs-string">&quot;dependencies&quot;</span> : [ 
            <span class="hljs-number">3</span> 
          ], 
          <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">4</span>, 
          <span class="hljs-string">&quot;estimatedCost&quot;</span> : <span class="hljs-number">31</span>, 
          <span class="hljs-string">&quot;estimatedNrItems&quot;</span> : <span class="hljs-number">10</span>, 
          <span class="hljs-string">&quot;expression&quot;</span> : { 
            <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;compare ==&quot;</span>, 
            <span class="hljs-string">&quot;subNodes&quot;</span> : [ 
              { 
                <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;reference&quot;</span>, 
                <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;a&quot;</span>, 
                <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">1</span> 
              }, 
              { 
                <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;value&quot;</span>, 
                <span class="hljs-string">&quot;value&quot;</span> : <span class="hljs-number">4</span> 
              } 
            ] 
          }, 
          <span class="hljs-string">&quot;outVariable&quot;</span> : { 
            <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">4</span>, 
            <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;3&quot;</span> 
          }, 
          <span class="hljs-string">&quot;canThrow&quot;</span> : <span class="hljs-literal">false</span>, 
          <span class="hljs-string">&quot;expressionType&quot;</span> : <span class="hljs-string">&quot;simple&quot;</span> 
        }, 
        { 
          <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;FilterNode&quot;</span>, 
          <span class="hljs-string">&quot;dependencies&quot;</span> : [ 
            <span class="hljs-number">4</span> 
          ], 
          <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">5</span>, 
          <span class="hljs-string">&quot;estimatedCost&quot;</span> : <span class="hljs-number">41</span>, 
          <span class="hljs-string">&quot;estimatedNrItems&quot;</span> : <span class="hljs-number">10</span>, 
          <span class="hljs-string">&quot;inVariable&quot;</span> : { 
            <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">4</span>, 
            <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;3&quot;</span> 
          } 
        }, 
        { 
          <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;CalculationNode&quot;</span>, 
          <span class="hljs-string">&quot;dependencies&quot;</span> : [ 
            <span class="hljs-number">5</span> 
          ], 
          <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">6</span>, 
          <span class="hljs-string">&quot;estimatedCost&quot;</span> : <span class="hljs-number">51</span>, 
          <span class="hljs-string">&quot;estimatedNrItems&quot;</span> : <span class="hljs-number">10</span>, 
          <span class="hljs-string">&quot;expression&quot;</span> : { 
            <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;attribute access&quot;</span>, 
            <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;name&quot;</span>, 
            <span class="hljs-string">&quot;subNodes&quot;</span> : [ 
              { 
                <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;reference&quot;</span>, 
                <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;p&quot;</span>, 
                <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">0</span> 
              } 
            ] 
          }, 
          <span class="hljs-string">&quot;outVariable&quot;</span> : { 
            <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">2</span>, 
            <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;name&quot;</span> 
          }, 
          <span class="hljs-string">&quot;canThrow&quot;</span> : <span class="hljs-literal">false</span>, 
          <span class="hljs-string">&quot;expressionType&quot;</span> : <span class="hljs-string">&quot;attribute&quot;</span> 
        }, 
        { 
          <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;CalculationNode&quot;</span>, 
          <span class="hljs-string">&quot;dependencies&quot;</span> : [ 
            <span class="hljs-number">6</span> 
          ], 
          <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">7</span>, 
          <span class="hljs-string">&quot;estimatedCost&quot;</span> : <span class="hljs-number">61</span>, 
          <span class="hljs-string">&quot;estimatedNrItems&quot;</span> : <span class="hljs-number">10</span>, 
          <span class="hljs-string">&quot;expression&quot;</span> : { 
            <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;attribute access&quot;</span>, 
            <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;id&quot;</span>, 
            <span class="hljs-string">&quot;subNodes&quot;</span> : [ 
              { 
                <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;reference&quot;</span>, 
                <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;p&quot;</span>, 
                <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">0</span> 
              } 
            ] 
          }, 
          <span class="hljs-string">&quot;outVariable&quot;</span> : { 
            <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">6</span>, 
            <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;5&quot;</span> 
          }, 
          <span class="hljs-string">&quot;canThrow&quot;</span> : <span class="hljs-literal">false</span>, 
          <span class="hljs-string">&quot;expressionType&quot;</span> : <span class="hljs-string">&quot;attribute&quot;</span> 
        }, 
        { 
          <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;LimitNode&quot;</span>, 
          <span class="hljs-string">&quot;dependencies&quot;</span> : [ 
            <span class="hljs-number">7</span> 
          ], 
          <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">9</span>, 
          <span class="hljs-string">&quot;estimatedCost&quot;</span> : <span class="hljs-number">62</span>, 
          <span class="hljs-string">&quot;estimatedNrItems&quot;</span> : <span class="hljs-number">1</span>, 
          <span class="hljs-string">&quot;offset&quot;</span> : <span class="hljs-number">0</span>, 
          <span class="hljs-string">&quot;limit&quot;</span> : <span class="hljs-number">1</span>, 
          <span class="hljs-string">&quot;fullCount&quot;</span> : <span class="hljs-literal">false</span> 
        }, 
        { 
          <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;ReturnNode&quot;</span>, 
          <span class="hljs-string">&quot;dependencies&quot;</span> : [ 
            <span class="hljs-number">9</span> 
          ], 
          <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">10</span>, 
          <span class="hljs-string">&quot;estimatedCost&quot;</span> : <span class="hljs-number">63</span>, 
          <span class="hljs-string">&quot;estimatedNrItems&quot;</span> : <span class="hljs-number">1</span>, 
          <span class="hljs-string">&quot;inVariable&quot;</span> : { 
            <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">2</span>, 
            <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;name&quot;</span> 
          } 
        } 
      ], 
      <span class="hljs-string">&quot;rules&quot;</span> : [ 
        <span class="hljs-string">&quot;use-index-for-sort&quot;</span> 
      ], 
      <span class="hljs-string">&quot;collections&quot;</span> : [ 
        { 
          <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;products&quot;</span>, 
          <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;read&quot;</span> 
        } 
      ], 
      <span class="hljs-string">&quot;variables&quot;</span> : [ 
        { 
          <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">6</span>, 
          <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;5&quot;</span> 
        }, 
        { 
          <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">4</span>, 
          <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;3&quot;</span> 
        }, 
        { 
          <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">2</span>, 
          <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;name&quot;</span> 
        }, 
        { 
          <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">1</span>, 
          <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;a&quot;</span> 
        }, 
        { 
          <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">0</span>, 
          <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;p&quot;</span> 
        } 
      ], 
      <span class="hljs-string">&quot;estimatedCost&quot;</span> : <span class="hljs-number">63</span>, 
      <span class="hljs-string">&quot;estimatedNrItems&quot;</span> : <span class="hljs-number">1</span> 
    } 
  ], 
  <span class="hljs-string">&quot;warnings&quot;</span> : [ ], 
  <span class="hljs-string">&quot;stats&quot;</span> : { 
    <span class="hljs-string">&quot;rulesExecuted&quot;</span> : <span class="hljs-number">1</span>, 
    <span class="hljs-string">&quot;rulesSkipped&quot;</span> : <span class="hljs-number">25</span>, 
    <span class="hljs-string">&quot;plansCreated&quot;</span> : <span class="hljs-number">1</span> 
  }, 
  <span class="hljs-string">&quot;error&quot;</span> : <span class="hljs-literal">false</span>, 
  <span class="hljs-string">&quot;code&quot;</span> : <span class="hljs-number">200</span> 
}
</pre>
</div>
<div id="RestExplainOptions_short" onclick="$(&apos;#RestExplainOptions_short&apos;).hide(); $(&apos;#RestExplainOptions_long&apos;).show();">
<pre>
shell&gt; curl -X POST --data-binary @- --dump - http://localhost:8529/_api/explain &lt;&lt;EOF
{ 
  <span class="hljs-string">&quot;query&quot;</span> : <span class="hljs-string">&quot;FOR p IN products LET a = p.id FILTER a == 4 LET name = p.name SORT p.id LIMIT 1 RETURN name&quot;</span>, 
  <span class="hljs-string">&quot;options&quot;</span> : { 
    <span class="hljs-string">&quot;maxNumberOfPlans&quot;</span> : <span class="hljs-number">2</span>, 
    <span class="hljs-string">&quot;allPlans&quot;</span> : <span class="hljs-literal">true</span>, 
    <span class="hljs-string">&quot;optimizer&quot;</span> : { 
      <span class="hljs-string">&quot;rules&quot;</span> : [ 
        <span class="hljs-string">&quot;-all&quot;</span>, 
        <span class="hljs-string">&quot;+use-index-for-sort&quot;</span>, 
        <span class="hljs-string">&quot;+use-index-range&quot;</span> 
      ] 
    } 
  } 
}
EOF

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">200</span> OK
content-type: application/json; charset=utf<span class="hljs-number">-8</span>

</pre><div class="example_show_button">show response body</div>
</div>
</div>

<p>Returning all plans</p>
<div id="RestExplainAllPlans_container">
<div id="RestExplainAllPlans_long" onclick="" style="Display: none;">
<pre>
shell&gt; curl -X POST --data-binary @- --dump - http://localhost:8529/_api/explain &lt;&lt;EOF
{ 
  <span class="hljs-string">&quot;query&quot;</span> : <span class="hljs-string">&quot;FOR p IN products FILTER p.id == 25 RETURN p&quot;</span>, 
  <span class="hljs-string">&quot;options&quot;</span> : { 
    <span class="hljs-string">&quot;allPlans&quot;</span> : <span class="hljs-literal">true</span> 
  } 
}
EOF

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">200</span> OK
content-type: application/json; charset=utf<span class="hljs-number">-8</span>

{ 
  <span class="hljs-string">&quot;plans&quot;</span> : [ 
    { 
      <span class="hljs-string">&quot;nodes&quot;</span> : [ 
        { 
          <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;SingletonNode&quot;</span>, 
          <span class="hljs-string">&quot;dependencies&quot;</span> : [ ], 
          <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">1</span>, 
          <span class="hljs-string">&quot;estimatedCost&quot;</span> : <span class="hljs-number">1</span>, 
          <span class="hljs-string">&quot;estimatedNrItems&quot;</span> : <span class="hljs-number">1</span> 
        }, 
        { 
          <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;IndexNode&quot;</span>, 
          <span class="hljs-string">&quot;dependencies&quot;</span> : [ 
            <span class="hljs-number">1</span> 
          ], 
          <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">6</span>, 
          <span class="hljs-string">&quot;estimatedCost&quot;</span> : <span class="hljs-number">1.99</span>, 
          <span class="hljs-string">&quot;estimatedNrItems&quot;</span> : <span class="hljs-number">1</span>, 
          <span class="hljs-string">&quot;database&quot;</span> : <span class="hljs-string">&quot;_system&quot;</span>, 
          <span class="hljs-string">&quot;collection&quot;</span> : <span class="hljs-string">&quot;products&quot;</span>, 
          <span class="hljs-string">&quot;outVariable&quot;</span> : { 
            <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">0</span>, 
            <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;p&quot;</span> 
          }, 
          <span class="hljs-string">&quot;indexes&quot;</span> : [ 
            { 
              <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-string">&quot;10650&quot;</span>, 
              <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;hash&quot;</span>, 
              <span class="hljs-string">&quot;fields&quot;</span> : [ 
                <span class="hljs-string">&quot;id&quot;</span> 
              ], 
              <span class="hljs-string">&quot;selectivityEstimate&quot;</span> : <span class="hljs-number">1</span>, 
              <span class="hljs-string">&quot;unique&quot;</span> : <span class="hljs-literal">false</span>, 
              <span class="hljs-string">&quot;sparse&quot;</span> : <span class="hljs-literal">false</span> 
            } 
          ], 
          <span class="hljs-string">&quot;condition&quot;</span> : { 
            <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;n-ary or&quot;</span>, 
            <span class="hljs-string">&quot;subNodes&quot;</span> : [ 
              { 
                <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;n-ary and&quot;</span>, 
                <span class="hljs-string">&quot;subNodes&quot;</span> : [ 
                  { 
                    <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;compare ==&quot;</span>, 
                    <span class="hljs-string">&quot;subNodes&quot;</span> : [ 
                      { 
                        <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;attribute access&quot;</span>, 
                        <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;id&quot;</span>, 
                        <span class="hljs-string">&quot;subNodes&quot;</span> : [ 
                          { 
                            <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;reference&quot;</span>, 
                            <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;p&quot;</span>, 
                            <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">0</span> 
                          } 
                        ] 
                      }, 
                      { 
                        <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;value&quot;</span>, 
                        <span class="hljs-string">&quot;value&quot;</span> : <span class="hljs-number">25</span> 
                      } 
                    ] 
                  } 
                ] 
              } 
            ] 
          }, 
          <span class="hljs-string">&quot;reverse&quot;</span> : <span class="hljs-literal">false</span> 
        }, 
        { 
          <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;ReturnNode&quot;</span>, 
          <span class="hljs-string">&quot;dependencies&quot;</span> : [ 
            <span class="hljs-number">6</span> 
          ], 
          <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">5</span>, 
          <span class="hljs-string">&quot;estimatedCost&quot;</span> : <span class="hljs-number">2.99</span>, 
          <span class="hljs-string">&quot;estimatedNrItems&quot;</span> : <span class="hljs-number">1</span>, 
          <span class="hljs-string">&quot;inVariable&quot;</span> : { 
            <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">0</span>, 
            <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;p&quot;</span> 
          } 
        } 
      ], 
      <span class="hljs-string">&quot;rules&quot;</span> : [ 
        <span class="hljs-string">&quot;use-indexes&quot;</span>, 
        <span class="hljs-string">&quot;remove-filter-covered-by-index&quot;</span> 
      ], 
      <span class="hljs-string">&quot;collections&quot;</span> : [ 
        { 
          <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;products&quot;</span>, 
          <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;read&quot;</span> 
        } 
      ], 
      <span class="hljs-string">&quot;variables&quot;</span> : [ 
        { 
          <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">2</span>, 
          <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;1&quot;</span> 
        }, 
        { 
          <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">0</span>, 
          <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;p&quot;</span> 
        } 
      ], 
      <span class="hljs-string">&quot;estimatedCost&quot;</span> : <span class="hljs-number">2.99</span>, 
      <span class="hljs-string">&quot;estimatedNrItems&quot;</span> : <span class="hljs-number">1</span> 
    } 
  ], 
  <span class="hljs-string">&quot;warnings&quot;</span> : [ ], 
  <span class="hljs-string">&quot;stats&quot;</span> : { 
    <span class="hljs-string">&quot;rulesExecuted&quot;</span> : <span class="hljs-number">26</span>, 
    <span class="hljs-string">&quot;rulesSkipped&quot;</span> : <span class="hljs-number">0</span>, 
    <span class="hljs-string">&quot;plansCreated&quot;</span> : <span class="hljs-number">1</span> 
  }, 
  <span class="hljs-string">&quot;error&quot;</span> : <span class="hljs-literal">false</span>, 
  <span class="hljs-string">&quot;code&quot;</span> : <span class="hljs-number">200</span> 
}
</pre>
</div>
<div id="RestExplainAllPlans_short" onclick="$(&apos;#RestExplainAllPlans_short&apos;).hide(); $(&apos;#RestExplainAllPlans_long&apos;).show();">
<pre>
shell&gt; curl -X POST --data-binary @- --dump - http://localhost:8529/_api/explain &lt;&lt;EOF
{ 
  <span class="hljs-string">&quot;query&quot;</span> : <span class="hljs-string">&quot;FOR p IN products FILTER p.id == 25 RETURN p&quot;</span>, 
  <span class="hljs-string">&quot;options&quot;</span> : { 
    <span class="hljs-string">&quot;allPlans&quot;</span> : <span class="hljs-literal">true</span> 
  } 
}
EOF

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">200</span> OK
content-type: application/json; charset=utf<span class="hljs-number">-8</span>

</pre><div class="example_show_button">show response body</div>
</div>
</div>

<p>A query that produces a warning</p>
<div id="RestExplainWarning_container">
<div id="RestExplainWarning_long" onclick="" style="Display: none;">
<pre>
shell&gt; curl -X POST --data-binary @- --dump - http://localhost:8529/_api/explain &lt;&lt;EOF
{ 
  <span class="hljs-string">&quot;query&quot;</span> : <span class="hljs-string">&quot;FOR i IN 1..10 RETURN 1 / 0&quot;</span> 
}
EOF

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">200</span> OK
content-type: application/json; charset=utf<span class="hljs-number">-8</span>

{ 
  <span class="hljs-string">&quot;plan&quot;</span> : { 
    <span class="hljs-string">&quot;nodes&quot;</span> : [ 
      { 
        <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;SingletonNode&quot;</span>, 
        <span class="hljs-string">&quot;dependencies&quot;</span> : [ ], 
        <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">1</span>, 
        <span class="hljs-string">&quot;estimatedCost&quot;</span> : <span class="hljs-number">1</span>, 
        <span class="hljs-string">&quot;estimatedNrItems&quot;</span> : <span class="hljs-number">1</span> 
      }, 
      { 
        <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;CalculationNode&quot;</span>, 
        <span class="hljs-string">&quot;dependencies&quot;</span> : [ 
          <span class="hljs-number">1</span> 
        ], 
        <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">2</span>, 
        <span class="hljs-string">&quot;estimatedCost&quot;</span> : <span class="hljs-number">2</span>, 
        <span class="hljs-string">&quot;estimatedNrItems&quot;</span> : <span class="hljs-number">1</span>, 
        <span class="hljs-string">&quot;expression&quot;</span> : { 
          <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;range&quot;</span>, 
          <span class="hljs-string">&quot;subNodes&quot;</span> : [ 
            { 
              <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;value&quot;</span>, 
              <span class="hljs-string">&quot;value&quot;</span> : <span class="hljs-number">1</span> 
            }, 
            { 
              <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;value&quot;</span>, 
              <span class="hljs-string">&quot;value&quot;</span> : <span class="hljs-number">10</span> 
            } 
          ] 
        }, 
        <span class="hljs-string">&quot;outVariable&quot;</span> : { 
          <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">2</span>, 
          <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;1&quot;</span> 
        }, 
        <span class="hljs-string">&quot;canThrow&quot;</span> : <span class="hljs-literal">false</span>, 
        <span class="hljs-string">&quot;expressionType&quot;</span> : <span class="hljs-string">&quot;simple&quot;</span> 
      }, 
      { 
        <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;CalculationNode&quot;</span>, 
        <span class="hljs-string">&quot;dependencies&quot;</span> : [ 
          <span class="hljs-number">2</span> 
        ], 
        <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">4</span>, 
        <span class="hljs-string">&quot;estimatedCost&quot;</span> : <span class="hljs-number">3</span>, 
        <span class="hljs-string">&quot;estimatedNrItems&quot;</span> : <span class="hljs-number">1</span>, 
        <span class="hljs-string">&quot;expression&quot;</span> : { 
          <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;value&quot;</span>, 
          <span class="hljs-string">&quot;value&quot;</span> : <span class="hljs-number">0</span> 
        }, 
        <span class="hljs-string">&quot;outVariable&quot;</span> : { 
          <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">4</span>, 
          <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;3&quot;</span> 
        }, 
        <span class="hljs-string">&quot;canThrow&quot;</span> : <span class="hljs-literal">false</span>, 
        <span class="hljs-string">&quot;expressionType&quot;</span> : <span class="hljs-string">&quot;json&quot;</span> 
      }, 
      { 
        <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;EnumerateListNode&quot;</span>, 
        <span class="hljs-string">&quot;dependencies&quot;</span> : [ 
          <span class="hljs-number">4</span> 
        ], 
        <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">3</span>, 
        <span class="hljs-string">&quot;estimatedCost&quot;</span> : <span class="hljs-number">13</span>, 
        <span class="hljs-string">&quot;estimatedNrItems&quot;</span> : <span class="hljs-number">10</span>, 
        <span class="hljs-string">&quot;inVariable&quot;</span> : { 
          <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">2</span>, 
          <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;1&quot;</span> 
        }, 
        <span class="hljs-string">&quot;outVariable&quot;</span> : { 
          <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">0</span>, 
          <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;i&quot;</span> 
        } 
      }, 
      { 
        <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;ReturnNode&quot;</span>, 
        <span class="hljs-string">&quot;dependencies&quot;</span> : [ 
          <span class="hljs-number">3</span> 
        ], 
        <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">5</span>, 
        <span class="hljs-string">&quot;estimatedCost&quot;</span> : <span class="hljs-number">23</span>, 
        <span class="hljs-string">&quot;estimatedNrItems&quot;</span> : <span class="hljs-number">10</span>, 
        <span class="hljs-string">&quot;inVariable&quot;</span> : { 
          <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">4</span>, 
          <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;3&quot;</span> 
        } 
      } 
    ], 
    <span class="hljs-string">&quot;rules&quot;</span> : [ 
      <span class="hljs-string">&quot;move-calculations-up&quot;</span>, 
      <span class="hljs-string">&quot;move-calculations-up-2&quot;</span> 
    ], 
    <span class="hljs-string">&quot;collections&quot;</span> : [ ], 
    <span class="hljs-string">&quot;variables&quot;</span> : [ 
      { 
        <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">4</span>, 
        <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;3&quot;</span> 
      }, 
      { 
        <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">2</span>, 
        <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;1&quot;</span> 
      }, 
      { 
        <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">0</span>, 
        <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;i&quot;</span> 
      } 
    ], 
    <span class="hljs-string">&quot;estimatedCost&quot;</span> : <span class="hljs-number">23</span>, 
    <span class="hljs-string">&quot;estimatedNrItems&quot;</span> : <span class="hljs-number">10</span> 
  }, 
  <span class="hljs-string">&quot;warnings&quot;</span> : [ 
    { 
      <span class="hljs-string">&quot;code&quot;</span> : <span class="hljs-number">1562</span>, 
      <span class="hljs-string">&quot;message&quot;</span> : <span class="hljs-string">&quot;division by zero&quot;</span> 
    } 
  ], 
  <span class="hljs-string">&quot;stats&quot;</span> : { 
    <span class="hljs-string">&quot;rulesExecuted&quot;</span> : <span class="hljs-number">26</span>, 
    <span class="hljs-string">&quot;rulesSkipped&quot;</span> : <span class="hljs-number">0</span>, 
    <span class="hljs-string">&quot;plansCreated&quot;</span> : <span class="hljs-number">1</span> 
  }, 
  <span class="hljs-string">&quot;cacheable&quot;</span> : <span class="hljs-literal">false</span>, 
  <span class="hljs-string">&quot;error&quot;</span> : <span class="hljs-literal">false</span>, 
  <span class="hljs-string">&quot;code&quot;</span> : <span class="hljs-number">200</span> 
}
</pre>
</div>
<div id="RestExplainWarning_short" onclick="$(&apos;#RestExplainWarning_short&apos;).hide(); $(&apos;#RestExplainWarning_long&apos;).show();">
<pre>
shell&gt; curl -X POST --data-binary @- --dump - http://localhost:8529/_api/explain &lt;&lt;EOF
{ 
  <span class="hljs-string">&quot;query&quot;</span> : <span class="hljs-string">&quot;FOR i IN 1..10 RETURN 1 / 0&quot;</span> 
}
EOF

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">200</span> OK
content-type: application/json; charset=utf<span class="hljs-number">-8</span>

</pre><div class="example_show_button">show response body</div>
</div>
</div>

<p>Invalid query (missing bind parameter)</p>
<div id="RestExplainInvalid_container">
<div id="RestExplainInvalid_long" onclick="" style="Display: none;">
<pre>
shell&gt; curl -X POST --data-binary @- --dump - http://localhost:8529/_api/explain &lt;&lt;EOF
{ 
  <span class="hljs-string">&quot;query&quot;</span> : <span class="hljs-string">&quot;FOR p IN products FILTER p.id == @id LIMIT 2 RETURN p.n&quot;</span> 
}
EOF

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">400</span> Bad Request
content-type: application/json; charset=utf<span class="hljs-number">-8</span>

{ 
  <span class="hljs-string">&quot;error&quot;</span> : <span class="hljs-literal">true</span>, 
  <span class="hljs-string">&quot;code&quot;</span> : <span class="hljs-number">400</span>, 
  <span class="hljs-string">&quot;errorNum&quot;</span> : <span class="hljs-number">1551</span>, 
  <span class="hljs-string">&quot;errorMessage&quot;</span> : <span class="hljs-string">&quot;no value specified for declared bind parameter &apos;id&apos; (while parsing)&quot;</span> 
}
</pre>
</div>
<div id="RestExplainInvalid_short" onclick="$(&apos;#RestExplainInvalid_short&apos;).hide(); $(&apos;#RestExplainInvalid_long&apos;).show();">
<pre>
shell&gt; curl -X POST --data-binary @- --dump - http://localhost:8529/_api/explain &lt;&lt;EOF
{ 
  <span class="hljs-string">&quot;query&quot;</span> : <span class="hljs-string">&quot;FOR p IN products FILTER p.id == @id LIMIT 2 RETURN p.n&quot;</span> 
}
EOF

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">400</span> Bad Request
content-type: application/json; charset=utf<span class="hljs-number">-8</span>

</pre><div class="example_show_button">show response body</div>
</div>
</div>

<p>The data returned in the <em>plan</em> attribute of the result contains one
element per AQL top-level statement (i.e. <em>FOR</em>, <em>RETURN</em>,
<em>FILTER</em> etc.). If the query optimizer removed some unnecessary statements,
the result might also contain less elements than there were top-level
statements in the AQL query.
The following example shows a query with a non-sensible filter condition that
the optimizer has removed so that there are less top-level statements.</p>
<div id="RestExplainEmpty_container">
<div id="RestExplainEmpty_long" onclick="" style="Display: none;">
<pre>
shell&gt; curl -X POST --data-binary @- --dump - http://localhost:8529/_api/explain &lt;&lt;EOF
{ &quot;query&quot; : &quot;FOR i IN [ 1, 2, 3 ] FILTER 1 == 2 RETURN i&quot; }
EOF

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">200</span> OK
content-type: application/json; charset=utf<span class="hljs-number">-8</span>

{ 
  <span class="hljs-string">&quot;plan&quot;</span> : { 
    <span class="hljs-string">&quot;nodes&quot;</span> : [ 
      { 
        <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;SingletonNode&quot;</span>, 
        <span class="hljs-string">&quot;dependencies&quot;</span> : [ ], 
        <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">1</span>, 
        <span class="hljs-string">&quot;estimatedCost&quot;</span> : <span class="hljs-number">1</span>, 
        <span class="hljs-string">&quot;estimatedNrItems&quot;</span> : <span class="hljs-number">1</span> 
      }, 
      { 
        <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;CalculationNode&quot;</span>, 
        <span class="hljs-string">&quot;dependencies&quot;</span> : [ 
          <span class="hljs-number">1</span> 
        ], 
        <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">2</span>, 
        <span class="hljs-string">&quot;estimatedCost&quot;</span> : <span class="hljs-number">2</span>, 
        <span class="hljs-string">&quot;estimatedNrItems&quot;</span> : <span class="hljs-number">1</span>, 
        <span class="hljs-string">&quot;expression&quot;</span> : { 
          <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;array&quot;</span>, 
          <span class="hljs-string">&quot;subNodes&quot;</span> : [ 
            { 
              <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;value&quot;</span>, 
              <span class="hljs-string">&quot;value&quot;</span> : <span class="hljs-number">1</span> 
            }, 
            { 
              <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;value&quot;</span>, 
              <span class="hljs-string">&quot;value&quot;</span> : <span class="hljs-number">2</span> 
            }, 
            { 
              <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;value&quot;</span>, 
              <span class="hljs-string">&quot;value&quot;</span> : <span class="hljs-number">3</span> 
            } 
          ] 
        }, 
        <span class="hljs-string">&quot;outVariable&quot;</span> : { 
          <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">2</span>, 
          <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;1&quot;</span> 
        }, 
        <span class="hljs-string">&quot;canThrow&quot;</span> : <span class="hljs-literal">false</span>, 
        <span class="hljs-string">&quot;expressionType&quot;</span> : <span class="hljs-string">&quot;json&quot;</span> 
      }, 
      { 
        <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;NoResultsNode&quot;</span>, 
        <span class="hljs-string">&quot;dependencies&quot;</span> : [ 
          <span class="hljs-number">2</span> 
        ], 
        <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">7</span>, 
        <span class="hljs-string">&quot;estimatedCost&quot;</span> : <span class="hljs-number">0.5</span>, 
        <span class="hljs-string">&quot;estimatedNrItems&quot;</span> : <span class="hljs-number">0</span> 
      }, 
      { 
        <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;EnumerateListNode&quot;</span>, 
        <span class="hljs-string">&quot;dependencies&quot;</span> : [ 
          <span class="hljs-number">7</span> 
        ], 
        <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">3</span>, 
        <span class="hljs-string">&quot;estimatedCost&quot;</span> : <span class="hljs-number">0.5</span>, 
        <span class="hljs-string">&quot;estimatedNrItems&quot;</span> : <span class="hljs-number">0</span>, 
        <span class="hljs-string">&quot;inVariable&quot;</span> : { 
          <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">2</span>, 
          <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;1&quot;</span> 
        }, 
        <span class="hljs-string">&quot;outVariable&quot;</span> : { 
          <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">0</span>, 
          <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;i&quot;</span> 
        } 
      }, 
      { 
        <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;ReturnNode&quot;</span>, 
        <span class="hljs-string">&quot;dependencies&quot;</span> : [ 
          <span class="hljs-number">3</span> 
        ], 
        <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">6</span>, 
        <span class="hljs-string">&quot;estimatedCost&quot;</span> : <span class="hljs-number">0.5</span>, 
        <span class="hljs-string">&quot;estimatedNrItems&quot;</span> : <span class="hljs-number">0</span>, 
        <span class="hljs-string">&quot;inVariable&quot;</span> : { 
          <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">0</span>, 
          <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;i&quot;</span> 
        } 
      } 
    ], 
    <span class="hljs-string">&quot;rules&quot;</span> : [ 
      <span class="hljs-string">&quot;move-calculations-up&quot;</span>, 
      <span class="hljs-string">&quot;move-filters-up&quot;</span>, 
      <span class="hljs-string">&quot;remove-unnecessary-filters&quot;</span>, 
      <span class="hljs-string">&quot;remove-unnecessary-calculations&quot;</span> 
    ], 
    <span class="hljs-string">&quot;collections&quot;</span> : [ ], 
    <span class="hljs-string">&quot;variables&quot;</span> : [ 
      { 
        <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">4</span>, 
        <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;3&quot;</span> 
      }, 
      { 
        <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">2</span>, 
        <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;1&quot;</span> 
      }, 
      { 
        <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">0</span>, 
        <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;i&quot;</span> 
      } 
    ], 
    <span class="hljs-string">&quot;estimatedCost&quot;</span> : <span class="hljs-number">0.5</span>, 
    <span class="hljs-string">&quot;estimatedNrItems&quot;</span> : <span class="hljs-number">0</span> 
  }, 
  <span class="hljs-string">&quot;warnings&quot;</span> : [ ], 
  <span class="hljs-string">&quot;stats&quot;</span> : { 
    <span class="hljs-string">&quot;rulesExecuted&quot;</span> : <span class="hljs-number">26</span>, 
    <span class="hljs-string">&quot;rulesSkipped&quot;</span> : <span class="hljs-number">0</span>, 
    <span class="hljs-string">&quot;plansCreated&quot;</span> : <span class="hljs-number">1</span> 
  }, 
  <span class="hljs-string">&quot;cacheable&quot;</span> : <span class="hljs-literal">true</span>, 
  <span class="hljs-string">&quot;error&quot;</span> : <span class="hljs-literal">false</span>, 
  <span class="hljs-string">&quot;code&quot;</span> : <span class="hljs-number">200</span> 
}
</pre>
</div>
<div id="RestExplainEmpty_short" onclick="$(&apos;#RestExplainEmpty_short&apos;).hide(); $(&apos;#RestExplainEmpty_long&apos;).show();">
<pre>
shell&gt; curl -X POST --data-binary @- --dump - http://localhost:8529/_api/explain &lt;&lt;EOF
{ &quot;query&quot; : &quot;FOR i IN [ 1, 2, 3 ] FILTER 1 == 2 RETURN i&quot; }
EOF

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">200</span> OK
content-type: application/json; charset=utf<span class="hljs-number">-8</span>

</pre><div class="example_show_button">show response body</div>
</div>
</div>


<h3 id="parse-an-aql-query">Parse an AQL query</h3>
<p> parse an AQL query and return information about it</p>
<p><code>POST /_api/query</code></p>
<p>This endpoint is for query validation only. To actually query the database,
see <code>/api/cursor</code>.</p>
<p><strong>Body Parameters</strong></p>
<ul>
<li><strong>query</strong>: To validate a query string without executing it, the query string can be
passed to the server via an HTTP POST request.</li>
</ul>
<div id="RestQueryValid_container">
<div id="RestQueryValid_long" onclick="" style="Display: none;">
<pre>
shell&gt; curl -X POST --data-binary @- --dump - http://localhost:8529/_api/query &lt;&lt;EOF
{ &quot;query&quot; : &quot;FOR p IN products FILTER p.name == @name LIMIT 2 RETURN p.n&quot; }
EOF

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">200</span> OK
content-type: application/json; charset=utf<span class="hljs-number">-8</span>

{ 
  <span class="hljs-string">&quot;error&quot;</span> : <span class="hljs-literal">false</span>, 
  <span class="hljs-string">&quot;code&quot;</span> : <span class="hljs-number">200</span>, 
  <span class="hljs-string">&quot;parsed&quot;</span> : <span class="hljs-literal">true</span>, 
  <span class="hljs-string">&quot;collections&quot;</span> : [ 
    <span class="hljs-string">&quot;products&quot;</span> 
  ], 
  <span class="hljs-string">&quot;bindVars&quot;</span> : [ 
    <span class="hljs-string">&quot;name&quot;</span> 
  ], 
  <span class="hljs-string">&quot;ast&quot;</span> : [ 
    { 
      <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;root&quot;</span>, 
      <span class="hljs-string">&quot;subNodes&quot;</span> : [ 
        { 
          <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;for&quot;</span>, 
          <span class="hljs-string">&quot;subNodes&quot;</span> : [ 
            { 
              <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;variable&quot;</span>, 
              <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;p&quot;</span>, 
              <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">0</span> 
            }, 
            { 
              <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;collection&quot;</span>, 
              <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;products&quot;</span> 
            } 
          ] 
        }, 
        { 
          <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;filter&quot;</span>, 
          <span class="hljs-string">&quot;subNodes&quot;</span> : [ 
            { 
              <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;compare ==&quot;</span>, 
              <span class="hljs-string">&quot;subNodes&quot;</span> : [ 
                { 
                  <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;attribute access&quot;</span>, 
                  <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;name&quot;</span>, 
                  <span class="hljs-string">&quot;subNodes&quot;</span> : [ 
                    { 
                      <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;reference&quot;</span>, 
                      <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;p&quot;</span>, 
                      <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">0</span> 
                    } 
                  ] 
                }, 
                { 
                  <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;parameter&quot;</span>, 
                  <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;name&quot;</span> 
                } 
              ] 
            } 
          ] 
        }, 
        { 
          <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;limit&quot;</span>, 
          <span class="hljs-string">&quot;subNodes&quot;</span> : [ 
            { 
              <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;value&quot;</span>, 
              <span class="hljs-string">&quot;value&quot;</span> : <span class="hljs-number">0</span> 
            }, 
            { 
              <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;value&quot;</span>, 
              <span class="hljs-string">&quot;value&quot;</span> : <span class="hljs-number">2</span> 
            } 
          ] 
        }, 
        { 
          <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;return&quot;</span>, 
          <span class="hljs-string">&quot;subNodes&quot;</span> : [ 
            { 
              <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;attribute access&quot;</span>, 
              <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;n&quot;</span>, 
              <span class="hljs-string">&quot;subNodes&quot;</span> : [ 
                { 
                  <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;reference&quot;</span>, 
                  <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;p&quot;</span>, 
                  <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-number">0</span> 
                } 
              ] 
            } 
          ] 
        } 
      ] 
    } 
  ] 
}
</pre>
</div>
<div id="RestQueryValid_short" onclick="$(&apos;#RestQueryValid_short&apos;).hide(); $(&apos;#RestQueryValid_long&apos;).show();">
<pre>
shell&gt; curl -X POST --data-binary @- --dump - http://localhost:8529/_api/query &lt;&lt;EOF
{ &quot;query&quot; : &quot;FOR p IN products FILTER p.name == @name LIMIT 2 RETURN p.n&quot; }
EOF

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">200</span> OK
content-type: application/json; charset=utf<span class="hljs-number">-8</span>

</pre><div class="example_show_button">show response body</div>
</div>
</div>

<p>an Invalid query</p>
<div id="RestQueryInvalid_container">
<div id="RestQueryInvalid_long" onclick="" style="Display: none;">
<pre>
shell&gt; curl -X POST --data-binary @- --dump - http://localhost:8529/_api/query &lt;&lt;EOF
{ &quot;query&quot; : &quot;FOR p IN products FILTER p.name = @name LIMIT 2 RETURN p.n&quot; }
EOF

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">400</span> Bad Request
content-type: application/json; charset=utf<span class="hljs-number">-8</span>

{ 
  <span class="hljs-string">&quot;error&quot;</span> : <span class="hljs-literal">true</span>, 
  <span class="hljs-string">&quot;errorMessage&quot;</span> : <span class="hljs-string">&quot;syntax error, unexpected assignment near &apos;= @name LIMIT 2 RETURN p.n&apos; at position 1:33&quot;</span>, 
  <span class="hljs-string">&quot;code&quot;</span> : <span class="hljs-number">400</span>, 
  <span class="hljs-string">&quot;errorNum&quot;</span> : <span class="hljs-number">1501</span> 
}
</pre>
</div>
<div id="RestQueryInvalid_short" onclick="$(&apos;#RestQueryInvalid_short&apos;).hide(); $(&apos;#RestQueryInvalid_long&apos;).show();">
<pre>
shell&gt; curl -X POST --data-binary @- --dump - http://localhost:8529/_api/query &lt;&lt;EOF
{ &quot;query&quot; : &quot;FOR p IN products FILTER p.name = @name LIMIT 2 RETURN p.n&quot; }
EOF

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">400</span> Bad Request
content-type: application/json; charset=utf<span class="hljs-number">-8</span>

</pre><div class="example_show_button">show response body</div>
</div>
</div>

<p><a name="query_tracking"></a></p>
<h3 id="query-tracking">Query tracking</h3>
<p>ArangoDB has an HTTP interface for retrieving the lists of currently
executing AQL queries and the list of slow AQL queries. In order to make meaningful
use of these APIs, query tracking needs to be enabled in the database the HTTP 
request is executed for.</p>
<!--arangod/RestHandler/RestQueryHandler.cpp -->
<h3 id="returns-the-properties-for-the-aql-query-tracking">Returns the properties for the AQL query tracking</h3>
<p> returns the configuration for the AQL query tracking</p>
<p><code>GET /_api/query/properties</code></p>
<p>Returns the current query tracking configuration. The configuration is a
JSON object with the following properties:</p>
<ul>
<li><em>enabled</em>: if set to <em>true</em>, then queries will be tracked. If set to
<em>false</em>, neither queries nor slow queries will be tracked.</li>
<li><em>trackSlowQueries</em>: if set to <em>true</em>, then slow queries will be tracked
in the list of slow queries if their runtime exceeds the value set in 
<em>slowQueryThreshold</em>. In order for slow queries to be tracked, the <em>enabled</em>
property must also be set to <em>true</em>.</li>
<li><em>maxSlowQueries</em>: the maximum number of slow queries to keep in the list
of slow queries. If the list of slow queries is full, the oldest entry in
it will be discarded when additional slow queries occur.</li>
<li><em>slowQueryThreshold</em>: the threshold value for treating a query as slow. A
query with a runtime greater or equal to this threshold value will be
put into the list of slow queries when slow query tracking is enabled.
The value for <em>slowQueryThreshold</em> is specified in seconds.</li>
<li><em>maxQueryStringLength</em>: the maximum query string length to keep in the
list of queries. Query strings can have arbitrary lengths, and this property
can be used to save memory in case very long query strings are used. The
value is specified in bytes.</li>
</ul>
<p><strong>Return Codes</strong></p>
<ul>
<li><em>200</em>:
Is returned if properties were retrieved successfully.</li>
<li><em>400</em>:
The server will respond with <em>HTTP 400</em> in case of a malformed request,<!--arangod/RestHandler/RestQueryHandler.cpp -->
</li>
</ul>
<h3 id="changes-the-properties-for-the-aql-query-tracking">Changes the properties for the AQL query tracking</h3>
<p> changes the configuration for the AQL query tracking</p>
<p><code>PUT /_api/query/properties</code></p>
<p><strong>Body Parameters</strong></p>
<ul>
<li><strong>slowQueryThreshold</strong>: The threshold value for treating a query as slow. A
query with a runtime greater or equal to this threshold value will be
put into the list of slow queries when slow query tracking is enabled.
The value for <em>slowQueryThreshold</em> is specified in seconds.</li>
<li><strong>enabled</strong>: If set to <em>true</em>, then queries will be tracked. If set to
<em>false</em>, neither queries nor slow queries will be tracked.</li>
<li><strong>maxQueryStringLength</strong>: The maximum query string length to keep in the list of queries.
Query strings can have arbitrary lengths, and this property
can be used to save memory in case very long query strings are used. The
value is specified in bytes.</li>
<li><strong>trackSlowQueries</strong>: If set to <em>true</em>, then slow queries will be tracked
in the list of slow queries if their runtime exceeds the value set in
<em>slowQueryThreshold</em>. In order for slow queries to be tracked, the <em>enabled</em>
property must also be set to <em>true</em>.</li>
<li><strong>maxSlowQueries</strong>: The maximum number of slow queries to keep in the list
of slow queries. If the list of slow queries is full, the oldest entry in
it will be discarded when additional slow queries occur.</li>
</ul>
<!--arangod/RestHandler/RestQueryHandler.cpp -->
<h3 id="returns-the-currently-running-aql-queries">Returns the currently running AQL queries</h3>
<p> returns a list of currently running AQL queries</p>
<p><code>GET /_api/query/current</code></p>
<p>Returns an array containing the AQL queries currently running in the selected
database. Each query is a JSON object with the following attributes:</p>
<ul>
<li><em>id</em>: the query&apos;s id</li>
<li><em>query</em>: the query string (potentially truncated)</li>
<li><em>started</em>: the date and time when the query was started</li>
<li><em>runTime</em>: the query&apos;s run time up to the point the list of queries was
queried</li>
</ul>
<p><strong>Return Codes</strong></p>
<ul>
<li><em>200</em>:
Is returned when the list of queries can be retrieved successfully.</li>
<li><em>400</em>:
The server will respond with <em>HTTP 400</em> in case of a malformed request,<!--arangod/RestHandler/RestQueryHandler.cpp -->
</li>
</ul>
<h3 id="returns-the-list-of-slow-aql-queries">Returns the list of slow AQL queries</h3>
<p> returns a list of slow running AQL queries</p>
<p><code>GET /_api/query/slow</code></p>
<p>Returns an array containing the last AQL queries that exceeded the slow
query threshold in the selected database.
The maximum amount of queries in the list can be controlled by setting
the query tracking property <code>maxSlowQueries</code>. The threshold for treating
a query as <em>slow</em> can be adjusted by setting the query tracking property
<code>slowQueryThreshold</code>.
Each query is a JSON object with the following attributes:</p>
<ul>
<li><em>id</em>: the query&apos;s id</li>
<li><em>query</em>: the query string (potentially truncated)</li>
<li><em>started</em>: the date and time when the query was started</li>
<li><em>runTime</em>: the query&apos;s run time up to the point the list of queries was
queried</li>
</ul>
<p><strong>Return Codes</strong></p>
<ul>
<li><em>200</em>:
Is returned when the list of queries can be retrieved successfully.</li>
<li><em>400</em>:
The server will respond with <em>HTTP 400</em> in case of a malformed request,<!--arangod/RestHandler/RestQueryHandler.cpp -->
</li>
</ul>
<h3 id="clears-the-list-of-slow-aql-queries">Clears the list of slow AQL queries</h3>
<p> clears the list of slow AQL queries</p>
<p><code>DELETE /_api/query/slow</code></p>
<p>Clears the list of slow AQL queries</p>
<p><strong>Return Codes</strong></p>
<ul>
<li><em>200</em>:
The server will respond with <em>HTTP 200</em> when the list of queries was
cleared successfully.</li>
<li><em>400</em>:
The server will respond with <em>HTTP 400</em> in case of a malformed request.
<a name="killing_queries"></a><h3 id="killing-queries">Killing queries</h3>
</li>
</ul>
<p>Running AQL queries can also be killed on the server. ArangoDB provides a kill facility
via an HTTP interface. To kill a running query, its id (as returned for the query in the
list of currently running queries) must be specified. The kill flag of the query will
then be set, and the query will be aborted as soon as it reaches a cancelation point.</p>
<!--arangod/RestHandler/RestQueryHandler.cpp -->
<h3 id="kills-a-running-aql-query">Kills a running AQL query</h3>
<p> kills an AQL query</p>
<p><code>DELETE /_api/query/{query-id}</code></p>
<p><strong>Path Parameters</strong></p>
<ul>
<li><em>query-id</em> (required):
The id of the query.</li>
</ul>
<p>Kills a running query. The query will be terminated at the next cancelation
point.</p>
<p><strong>Return Codes</strong></p>
<ul>
<li><em>200</em>:
The server will respond with <em>HTTP 200</em> when the query was still running when
the kill request was executed and the query&apos;s kill flag was set.</li>
<li><em>400</em>:
The server will respond with <em>HTTP 400</em> in case of a malformed request.</li>
<li><em>404</em>:
The server will respond with <em>HTTP 404</em> when no query with the specified
id was found.</li>
</ul>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../AqlQueryCursor/AccessingCursors.html" class="navigation navigation-prev " aria-label="Previous page: Accessing Cursors"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../AqlQueryCache/index.html" class="navigation navigation-next " aria-label="Next page: AQL Query Cache"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../gitbook/app.js"></script>

    
    <script src="../gitbook/plugins/gitbook-plugin-toggle-chapters/toggle.js"></script>
    

    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/3.1.1/anchor.min.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-anchorjs/anchor-style.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-piwik/plugin.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"addcssjs":{"js":["styles/header.js"],"css":["styles/header.css"]},"add-header":{"BASE_PATH":"https://docs.arangodb.com/devel"},"piwik":{"URL":"www.arangodb.com/piwik/","siteId":12},"toggle-chapters":{},"anchorjs":{},"highlight":{},"fontsettings":{"theme":"white","family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        <!-- body:end -->
<script type="text/javascript">var _paq = _paq || [];_paq.push(['trackPageView']);_paq.push(['enableLinkTracking']);(function() {var u=(("https:" == document.location.protocol) ? "https" : "http") + "://www.arangodb.com/piwik/";_paq.push(['setTrackerUrl', u+'piwik.php']);_paq.push(['setSiteId', 12]);var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0]; g.type='text/javascript';g.defer=true; g.async=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);})();</script><noscript><p><img src="http://www.arangodb.com/piwik/piwik.php?idsite=12" style="border:0;" alt="" /></p></noscript>
    </body>
    <!-- End of book ArangoDB v3.0.x-devel (2016-06-02) HTTP API Documentation -->
</html>
