<!DOCTYPE HTML>
<html lang="en" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>My first Foxx App | Cookbook</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.5.2">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="gitbook/style.css">
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-search/search.css">
        
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
    
        <link rel="stylesheet" href="./styles/website.css">
    

        
    
    
    <link rel="next" href="./FoxxFirstStepsLegacy.html" />
    
    
    <link rel="prev" href="./GraphExampleActorsAndMovies.html" />
    

        <script type="text/javascript" src="styles/header.js"></script><link rel="stylesheet" type="text/css" href="styles/header.css">
    </head>
    <body>
        
        
    <div class="book" data-level="5.1" data-chapter-title="My first Foxx App" data-filepath="FoxxFirstSteps.md" data-basepath="." data-revision="Tue Jan 19 2016 13:30:25 GMT+0100 (CET)">
    

<div class="book-summary">
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="./index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="ModulDocumentInheritance.html">
            
                
                    <a href="./ModulDocumentInheritance.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        Modelling Document Inheritance
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2" data-path="AccessingShapesData.html">
            
                
                    <a href="./AccessingShapesData.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        Accessing Shapes Data
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3" >
            
            <span><b>3.</b> AQL</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1" data-path="JoinsInAQL.html">
            
                
                    <a href="./JoinsInAQL.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.</b>
                        
                        Using Joins in AQL
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="UsingDynamicAttributeNames.html">
            
                
                    <a href="./UsingDynamicAttributeNames.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.</b>
                        
                        Using Dynamic Attribute Names
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="FindingLeafNodesGraph.html">
            
                
                    <a href="./FindingLeafNodesGraph.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.3.</b>
                        
                        Finding Leaf Nodes in a Graph
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="FilteringNodesGraph.html">
            
                
                    <a href="./FilteringNodesGraph.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.4.</b>
                        
                        Filtering Nodes in a Graph
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.5" data-path="CountingNodesEfficientlyGraph.html">
            
                
                    <a href="./CountingNodesEfficientlyGraph.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.5.</b>
                        
                        Counting Nodes efficiently
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.6" data-path="CreatingTestDataAQL.html">
            
                
                    <a href="./CreatingTestDataAQL.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.6.</b>
                        
                        Creating Test-data using AQL
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.7" data-path="DiffingDocuments.html">
            
                
                    <a href="./DiffingDocuments.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.7.</b>
                        
                        Diffing Documents
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.8" data-path="AvoidingInjection.html">
            
                
                    <a href="./AvoidingInjection.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.8.</b>
                        
                        Avoiding Parameter Injection
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.9" data-path="MultilineQueryStrings.html">
            
                
                    <a href="./MultilineQueryStrings.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.9.</b>
                        
                        Multiline Query Strings
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4" >
            
            <span><b>4.</b> Graph-based Recipes</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1" data-path="Fulldepth.html">
            
                
                    <a href="./Fulldepth.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.1.</b>
                        
                        Fulldepth Graph-Traversal
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="FindingConnectedVerticesForSubgraphs.html">
            
                
                    <a href="./FindingConnectedVerticesForSubgraphs.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.2.</b>
                        
                        Vertices for Subgraphs
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="JavaDriverGraphExampleVertex.html">
            
                
                    <a href="./JavaDriverGraphExampleVertex.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.3.</b>
                        
                        Vertex example with Java
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.4" data-path="JavaDriverBaseDocument.html">
            
                
                    <a href="./JavaDriverBaseDocument.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.4.</b>
                        
                        Accessing base documents with Java
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.5" data-path="UsingCustomVisitorFromNodeJs.html">
            
                
                    <a href="./UsingCustomVisitorFromNodeJs.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.5.</b>
                        
                        Using a custom Visitor
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.6" data-path="GraphExampleActorsAndMovies.html">
            
                
                    <a href="./GraphExampleActorsAndMovies.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.6.</b>
                        
                        Example AQL Queries for Graphs
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5" >
            
            <span><b>5.</b> Foxx Framework</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="5.1" data-path="FoxxFirstSteps.html">
            
                
                    <a href="./FoxxFirstSteps.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.1.</b>
                        
                        My first Foxx App
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="FoxxFirstStepsLegacy.html">
            
                
                    <a href="./FoxxFirstStepsLegacy.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.2.</b>
                        
                        My first Foxx App pre-2.4
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.3" data-path="FoxxAuth.html">
            
                
                    <a href="./FoxxAuth.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.3.</b>
                        
                        Adding Authentication
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.4" data-path="FoxxAuthLegacy.html">
            
                
                    <a href="./FoxxAuthLegacy.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.4.</b>
                        
                        Adding Authentication pre-2.5
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.5" data-path="MakingRequests.html">
            
                
                    <a href="./MakingRequests.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.5.</b>
                        
                        Using external APIs
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.6" data-path="FoxxQueues.html">
            
                
                    <a href="./FoxxQueues.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.6.</b>
                        
                        Background jobs
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.7" data-path="FoxxQueuesLegacy.html">
            
                
                    <a href="./FoxxQueuesLegacy.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.7.</b>
                        
                        legacy background jobs
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.8" data-path="FoxxCustomQueueJobsLegacy.html">
            
                
                    <a href="./FoxxCustomQueueJobsLegacy.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.8.</b>
                        
                        legacy custom Background jobs
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.9" data-path="FoxxScripts.html">
            
                
                    <a href="./FoxxScripts.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.9.</b>
                        
                        Creating a Foxx script
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.10" data-path="FoxxCustomQueueJobs.html">
            
                
                    <a href="./FoxxCustomQueueJobs.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.10.</b>
                        
                        Custom job types for Queues
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.11" data-path="FoxxGeneratorFirstSteps.html">
            
                
                    <a href="./FoxxGeneratorFirstSteps.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.11.</b>
                        
                        My first FoxxGenerator App
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.12" data-path="FoxxDeploy.html">
            
                
                    <a href="./FoxxDeploy.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.12.</b>
                        
                        How to deploy a Foxx App
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.13" data-path="MakingFoxxAppAccessible.html">
            
                
                    <a href="./MakingFoxxAppAccessible.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.13.</b>
                        
                        Apps accessible from the Web
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.14" data-path="FoxxApiKeys.html">
            
                
                    <a href="./FoxxApiKeys.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.14.</b>
                        
                        API-Key Management
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.15" data-path="FoxxBinaryHttpPost.html">
            
                
                    <a href="./FoxxBinaryHttpPost.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.15.</b>
                        
                        Binary HTTP documents
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.16" data-path="FoxxTesting.html">
            
                
                    <a href="./FoxxTesting.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.16.</b>
                        
                        Foxx Testing
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6" >
            
            <span><b>6.</b> Use Cases, Examples</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1" data-path="CrawlingGithubPromises.html">
            
                
                    <a href="./CrawlingGithubPromises.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.1.</b>
                        
                        Crawling Github with Promises
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.2" data-path="UsingArangoDBWithSailsJS.html">
            
                
                    <a href="./UsingArangoDBWithSailsJS.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.2.</b>
                        
                        Using ArangoDB with Sails.js
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.3" data-path="PopulatingAnAutocompleteTextbox.html">
            
                
                    <a href="./PopulatingAnAutocompleteTextbox.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.3.</b>
                        
                        Populating a Textbox
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.4" data-path="ExportingData.html">
            
                
                    <a href="./ExportingData.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.4.</b>
                        
                        Exporting Data
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="7" >
            
            <span><b>7.</b> ArangoDB Setup / Administration</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="7.1" data-path="UsingAuthentication.html">
            
                
                    <a href="./UsingAuthentication.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.1.</b>
                        
                        Using Authentication
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.2" data-path="ImportingData.html">
            
                
                    <a href="./ImportingData.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.2.</b>
                        
                        Importing Data
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.3" data-path="ReplicatingData.html">
            
                
                    <a href="./ReplicatingData.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.3.</b>
                        
                        Replicating Data
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.4" data-path="XCopyInstallWindows.html">
            
                
                    <a href="./XCopyInstallWindows.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.4.</b>
                        
                        XCopy Install Windows
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.5" data-path="Compiling.html">
            
                
                    <a href="./Compiling.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.5.</b>
                        
                        Compiling / Build
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="7.5.1" data-path="CompilingOnDebian.html">
            
                
                    <a href="./CompilingOnDebian.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.5.1.</b>
                        
                        Compile on Debian
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.5.2" data-path="CompilingUnderWindows.html">
            
                
                    <a href="./CompilingUnderWindows.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.5.2.</b>
                        
                        Compile on Windows
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.5.3" data-path="CompilingUnderWindowsLegacy.html">
            
                
                    <a href="./CompilingUnderWindowsLegacy.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.5.3.</b>
                        
                        Compile on Windows pre-2.4
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.5.4" data-path="RunningCustomBuild.html">
            
                
                    <a href="./RunningCustomBuild.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.5.4.</b>
                        
                        Running Custom Build
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="8" >
            
            <span><b>8.</b> Cloud, DCOS and Docker</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="8.1" data-path="RunningOnAWS.html">
            
                
                    <a href="./RunningOnAWS.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.1.</b>
                        
                        Running on AWS
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8.2" data-path="UpdateArangoDBOnAWS.html">
            
                
                    <a href="./UpdateArangoDBOnAWS.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.2.</b>
                        
                        Update on AWS
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8.3" data-path="UsingArangoDBAzure.html">
            
                
                    <a href="./UsingArangoDBAzure.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.3.</b>
                        
                        Running on Azure
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8.4" data-path="RunningInDockerContainer.html">
            
                
                    <a href="./RunningInDockerContainer.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.4.</b>
                        
                        Docker ArangoDB
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8.5" data-path="UsingArangoDBNodeJSDocker.html">
            
                
                    <a href="./UsingArangoDBNodeJSDocker.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.5.</b>
                        
                        Docker with NodeJS App
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8.6" data-path="UsingArangoDBInGiantSwarm.html">
            
                
                    <a href="./UsingArangoDBInGiantSwarm.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.6.</b>
                        
                        In the GiantSwarm
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8.7" data-path="UsingArangoDBMesosphere.html">
            
                
                    <a href="./UsingArangoDBMesosphere.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.7.</b>
                        
                        ArangoDB in Mesos
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="9" >
            
            <span><b>9.</b> Monitoring</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="9.1" data-path="MonitoringWithCollectd.html">
            
                
                    <a href="./MonitoringWithCollectd.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.1.</b>
                        
                        Monitoring with Collectd
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9.2" data-path="MonitoringSlaveStatus.html">
            
                
                    <a href="./MonitoringSlaveStatus.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.2.</b>
                        
                        Collectd - Replication Slaves
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9.3" data-path="MonitoringTrafficWithIPAccounting.html">
            
                
                    <a href="./MonitoringTrafficWithIPAccounting.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.3.</b>
                        
                        Collectd - Network usage
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9.4" data-path="MonitoringOtherRelevantMetrics.html">
            
                
                    <a href="./MonitoringOtherRelevantMetrics.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.4.</b>
                        
                        Collectd - more Metrics
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9.5" data-path="MonitoringFoxxApps.html">
            
                
                    <a href="./MonitoringFoxxApps.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.5.</b>
                        
                        Collectd - Monitoring Foxx
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Published with GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="./" >Cookbook</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="my-first-foxx-app">My first Foxx App</h1>
<h2 id="problem">Problem</h2>
<p>I want to create a simple API with <a href="https://foxx.arangodb.com" target="_blank">Foxx</a>, but I never created one before. Specifically I want to create simple API to organize my todo items.</p>
<p><strong>Note:</strong> For this recipe you need at least Arango 2.4. For versions before look at the <a href="FoxxFirstStepsLegacy.html">old My first Foxx App</a>.</p>
<h2 id="solution">Solution</h2>
<h3 id="start-up-arangodb-in-development-mode">Start up ArangoDB in development mode</h3>
<p>Create a folder <code>foxx_apps</code> somewhere where you have write access. Create a folder <code>databases</code> inside of it, and one called <code>_system</code> inside of that. Now you can start ArangoDB with the following command:</p>
<pre><code>arangod --javascript.dev-app-path /PATH/TO/foxx_apps /PATH/TO/DB
</code></pre><p>In that case, <code>/PATH/TO/foxx_apps</code> is the path to the <code>foxx_apps</code> folder you created above and <code>/PATH/TO/DB</code> is the path to the folder where your database should be. If you can see the admin interface on <code>http://localhost:8529</code> you&apos;re now ready to go. Click on &apos;Applications&apos; in the navigation bar &#x2013; this is the place where all your Foxx apps are. We are now ready to go.</p>
<p><em>Don&apos;t have ArangoDB installed yet? Check out the instructions <a href="https://www.arangodb.com/download" target="_blank">on our downloads page</a>.</em></p>
<h3 id="create-your-app">Create your app</h3>
<p>Now in the application area click on &quot;Add Application&quot;. Now enter the required information (without any collections) and click &quot;Generate&quot;. This will create the app. It will prompt the path to your app to you which you should open with the text editor of your choice. In the list of apps you will now find an app with the name you chose. When you click on the app you will see a page with information about your app including the documentation.</p>
<p>We could also have added some collections when generating. This would have created the collections and the according CRUD actions. But in this recipe we want to see how to write them ourselves.</p>
<h3 id="create-the-required-collections">Create the required collections</h3>
<p>In ArangoDB you need to create a collection in order to save documents. We will need a collection for our todos. We need to do that before the app is running. In Foxx we use a setup script to prepare ArangoDB for running our app, which includes creating collections. Add the following line to the <code>scripts/setup.js</code> file:</p>
<pre><code class="lang-js">createCollection(<span class="hljs-string">&apos;todos&apos;</span>);
</code></pre>
<p>If you want to learn more about <code>db</code>, please check out <a href="https://docs.arangodb.com/Collections/index.html" target="_blank">our documentation about handling collections</a>. The setup script will be executed when the app is installed. In the development mode however, it will be called every time we request the app. If we click on the tiny <code>i</code> on our app, we will get to interactive documentation for our app (which is empty right now, because we don&apos;t have any routes yet). This will trigger our app and therefore execute our setup script. To check if that worked, go to <code>collections</code>. You will see a collection called <code>dev_todos_todos</code>. Setup is done!</p>
<h3 id="create-our-first-route">Create our first route</h3>
<p>In Foxx, we use controllers to add routes to our application. Inside of the folder <code>controller</code> create your first controller in a file <code>todos.js</code>:</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> Foxx = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;org/arangodb/foxx&apos;</span>),
  controller;

controller = <span class="hljs-keyword">new</span> Foxx.Controller(applicationContext);

controller.get(<span class="hljs-string">&apos;/&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req, res</span>) </span>{
  res.json({
    hello: <span class="hljs-string">&apos;world&apos;</span>
  });
});
</code></pre>
<p>This will add a <code>get</code> route on the route of the controller which returns a JSON response <code>{ &quot;hello&quot;: &quot;world&quot; }</code>. We now need to mount that controller to some endpoint, this is again done in our manifest file:</p>
<pre><code class="lang-json"><span class="hljs-string">&quot;controllers&quot;</span>: {
  <span class="hljs-string">&quot;/todos&quot;</span>: <span class="hljs-string">&quot;controllers/todos.js&quot;</span>
}
</code></pre>
<p>Our controller is now reachable on the <code>todos</code> endpoint. Want to see it in action? Let&apos;s go to the interactive documentation for our app again (click on Applications, then on the <code>i</code> next to the app <code>todos (dev)</code>). Click on <code>todos</code> and then you will see a <code>get</code> route &#x2013; clicking on that will reveal the documentation for this specific route. Click <code>Try it out</code> and you will see the response we defined. But this description seems a little empty &#x2013; let&apos;s add some description of what this route should do to our controller:</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> Foxx = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;org/arangodb/foxx&apos;</span>),
  controller;

controller = <span class="hljs-keyword">new</span> Foxx.Controller(applicationContext);

<span class="hljs-comment">/** Get a list of all todos
 *
 * Get a list of all todos that are stored in the database.
 */</span>
controller.get(<span class="hljs-string">&apos;/&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req, res</span>) </span>{
  res.json({
    hello: <span class="hljs-string">&apos;world&apos;</span>
  });
});
</code></pre>
<p>If you go to the interactive documentation again, you will now see the description you just added. Great! If you want more information about controllers, see <a href="https://docs.arangodb.com/Foxx/Develop/Controller.html" target="_blank">in the documentation</a>.</p>
<h3 id="add-a-model-that-describes-our-todo-items">Add a model that describes our todo items</h3>
<p>We now need to define how we want a single todo item looks like. Foxx uses this information for both the documentation as well as for validating inputs. In a file called <code>todo.js</code> in the folder <code>models</code> you put the following <a href="https://docs.arangodb.com/Foxx/Develop/Model.html" target="_blank">Foxx Model</a> prototype:</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> Foxx = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;org/arangodb/foxx&apos;</span>),
  Joi = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;joi&apos;</span>),
  Todo;

Todo = Foxx.Model.extend({
  schema: {
    completed: Joi.boolean().default(<span class="hljs-literal">true</span>),
    order: Joi.number().integer().required(),
    title: Joi.string().required()
  }
});

<span class="hljs-built_in">module</span>.exports = Todo;
</code></pre>
<p>Now we can use the model in our post route to create new items. We want to store the model in the database &#x2013; in order to do that we create a Repository. A repository has the responsibility to store models in a collection as well as giving a nice interface for searching for those models as well as updating or deleting them. To create a repository you have to provide the collection it should use as well as the model used for the documents in the collection. We create a standard repository in the following snippet. Our post action receives a Todo as its body. We provide a name for it as well as a short description. In the body of the function we then get the parameter <code>todo</code> which is an instance of our Todo model. We then save this model into our database. This will also add some meta data to the model (the ID, key and revision from ArangoDB). We then send a response back to the client.</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> Foxx = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;org/arangodb/foxx&apos;</span>),
  Todo = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;models/todo&apos;</span>),
  todosCollection = applicationContext.collection(<span class="hljs-string">&quot;todos&quot;</span>),
  todos,
  controller;

todos = <span class="hljs-keyword">new</span> Foxx.Repository(todosCollection, {
  model: Todo
});

controller = <span class="hljs-keyword">new</span> Foxx.Controller(applicationContext);

<span class="hljs-comment">/** Get a list of all todos
*
* Get a list of all todos that are stored in the database.
*/</span>
controller.get(<span class="hljs-string">&apos;/&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req, res</span>) </span>{
  res.json({
    hello: <span class="hljs-string">&apos;world&apos;</span>
  });
});

<span class="hljs-comment">/** Add a new todo to the list
*
* Create a new todo and add it to the list of todos.
*/</span>
controller.post(<span class="hljs-string">&apos;/&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req, res</span>) </span>{
  <span class="hljs-keyword">var</span> todo = req.params(<span class="hljs-string">&apos;todo&apos;</span>);
  todos.save(todo);
  res.json(todo.forClient());
}).bodyParam(<span class="hljs-string">&apos;todo&apos;</span>, {description: <span class="hljs-string">&apos;The Todo you want to create&apos;</span>, type: Todo});
</code></pre>
<p>We can now create a todo via the interactive documentation. If you click on the post route, you will see a text box where you can add the raw body that you want to send to the database. Enter the following for example:</p>
<pre><code class="lang-json">{
  <span class="hljs-string">&quot;order&quot;</span>: <span class="hljs-number">1</span>,
  <span class="hljs-string">&quot;title&quot;</span>: <span class="hljs-string">&quot;Clean my house&quot;</span>
}
</code></pre>
<p>This will create a new todo and add it to the collection. If you look into the collection, you will see that the completed attribute is set to <code>false</code>, because that&apos;s what we set as a default in our model.</p>
<h3 id="get-a-list-of-all-todos">Get a list of all todos</h3>
<p>Our initial implementation of the route to get all todos was a fake, let us fix that. We will use <a href="http://underscorejs.org" target="_blank">underscore.js</a> to iterate over all stored todos to call the <code>forClient</code> method on them. First require underscore as <code>_</code> (<code>_ = require(&apos;underscore&apos;)</code>), then change the index action to be the following:</p>
<pre><code class="lang-js">controller.get(<span class="hljs-string">&apos;/&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req, res</span>) </span>{
  res.json(_.map(todos.all(), <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">todo</span>) </span>{
    <span class="hljs-keyword">return</span> todo.forClient();
  }));
});
</code></pre>
<p>Try it out in the interactive documentation, you will get a list of all the todos.</p>
<h3 id="extending-the-representation-of-our-model">Extending the representation of our model</h3>
<p>In both our list as well as the return value we don&apos;t get the key of the document. In order to delete a single item we will however need this information. Let&apos;s change the <code>forClient</code> method of our model in order to get this information. The method could look like this:</p>
<pre><code class="lang-js">forClient: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> {
    completed: <span class="hljs-keyword">this</span>.get(<span class="hljs-string">&apos;completed&apos;</span>),
    order: <span class="hljs-keyword">this</span>.get(<span class="hljs-string">&apos;order&apos;</span>),
    title: <span class="hljs-keyword">this</span>.get(<span class="hljs-string">&apos;title&apos;</span>),
    key: <span class="hljs-keyword">this</span>.get(<span class="hljs-string">&apos;_key&apos;</span>)
  };
}
</code></pre>
<p>We now get the key in both routes.</p>
<h3 id="deleting-a-todo-item">Deleting a todo item</h3>
<p>We could for example define the following route to delete a todo:</p>
<pre><code class="lang-js">controller.del(<span class="hljs-string">&apos;/:key&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req, res</span>) </span>{
  <span class="hljs-keyword">var</span> key = req.params(<span class="hljs-string">&apos;key&apos;</span>);
  todos.removeById(key);
  res.json({ success: <span class="hljs-literal">true</span> });
}).pathParam(<span class="hljs-string">&apos;key&apos;</span>, Joi.string().description(<span class="hljs-string">&apos;The key of the Todo&apos;</span>));
</code></pre>
<p><code>pathParam</code> works similar to <code>bodyParam</code>, but for path parameters. Declare a path parameter in the route by prefixing it with a colon. We use joi again to describe our parameter. </p>
<pre><code class="lang-js">controller.del(<span class="hljs-string">&apos;/:key&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req, res</span>) </span>{
  <span class="hljs-keyword">var</span> key = req.params(<span class="hljs-string">&apos;key&apos;</span>);
  todos.removeById(key);
  res.json({ success: <span class="hljs-literal">true</span> });
}).pathParam(<span class="hljs-string">&apos;key&apos;</span>, Joi.string().description(<span class="hljs-string">&apos;The key of the Todo&apos;</span>));
</code></pre>
<p>When you try this with a todo item you created, it will work. Send the same request again: It will blow up with an error: The document could not be found. This is of course correct, but you may want to have a nicer error response. In Foxx, we just add an error response description to the route and Foxx will handle this case for us. When ArangoDB (require it with <code>ArangoError = require(&apos;org/arangodb&apos;).ArangoError</code>) can&apos;t find a document, it will throw an &apos;ArangoDB error&apos;. We will instead return a 404 status code with a descriptive error message:</p>
<pre><code class="lang-js">controller.del(<span class="hljs-string">&apos;/:key&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req, res</span>) </span>{
  <span class="hljs-keyword">var</span> key = req.params(<span class="hljs-string">&apos;key&apos;</span>);
  todos.removeById(key);
  res.json({ success: <span class="hljs-literal">true</span> });
}).pathParam(<span class="hljs-string">&apos;key&apos;</span>, Joi.string().description(<span class="hljs-string">&apos;The key of the Todo&apos;</span>))
  .errorResponse(ArangoError, <span class="hljs-number">404</span>, <span class="hljs-string">&apos;The todo item could not be found&apos;</span>);
</code></pre>
<h2 id="comment">Comment</h2>
<ul>
<li>If you want to have custom methods on your repository, you can extend it in the same way you extended the Foxx.Model. <a href="https://docs.arangodb.com/Foxx/Develop/Repository.html" target="_blank">Learn more about it here</a></li>
<li>We will add a new recipe for authentication in the future. In the mean time check out the <a href="https://github.com/arangodb/foxx-sessions-example" target="_blank">foxx-sessions-example</a> app.</li>
<li>We will also talk about workers and how to do work outside the request-response-cycle. Until then <a href="https://docs.arangodb.com/Foxx/Develop/Queries.html" target="_blank">check out the documentation for it</a>.</li>
</ul>
<p><strong>Author</strong>: <a href="https://github.com/moonglum" target="_blank">Lucas Dohmen</a></p>
<p><strong>Tags</strong>: #foxx</p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="./GraphExampleActorsAndMovies.html" class="navigation navigation-prev " aria-label="Previous page: Example AQL Queries for Graphs"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="./FoxxFirstStepsLegacy.html" class="navigation navigation-next " aria-label="Next page: My first Foxx App pre-2.4"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="gitbook/app.js"></script>

    
    <script src="gitbook/plugins/gitbook-plugin-piwik/plugin.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-search/lunr.min.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-search/search.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-sharing/buttons.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"piwik":{"URL":"www.arangodb.com/piwik/","siteId":12},"addcssjs":{"js":["styles/header.js"],"css":["styles/header.css"]},"highlight":{},"search":{},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        <script type="text/javascript">var _paq = _paq || [];_paq.push(['trackPageView']);_paq.push(['enableLinkTracking']);(function() {var u=(("https:" == document.location.protocol) ? "https" : "http") + "://www.arangodb.com/piwik/";_paq.push(['setTrackerUrl', u+'piwik.php']);_paq.push(['setSiteId', 12]);var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0]; g.type='text/javascript';g.defer=true; g.async=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);})();</script><noscript><p><img src="http://www.arangodb.com/piwik/piwik.php?idsite=12" style="border:0;" alt="" /></p></noscript>
    </body>
    
</html>
