<!DOCTYPE HTML>
<html lang="en" >
    <!-- Start book ArangoDB Cookbook -->
    <head>
        <!-- head:start -->
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>My first Foxx App pre-2.4 | ArangoDB Cookbook</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.6.7">
        <meta name="author" content="ArangoDB GmbH">
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="../gitbook/style.css">
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-toggle-chapters/toggle.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
    
        <link rel="stylesheet" href="../styles/website.css">
    

        
    
    
    <link rel="next" href="../Foxx/Auth.html" />
    
    
    <link rel="prev" href="../Foxx/FirstSteps.html" />
    

        <!-- head:end -->
<script type="text/javascript" src="../styles/header.js"></script><link rel="stylesheet" type="text/css" href="../styles/header.css">
    </head>
    <body>
        <!-- body:start -->
<div id="header">
  <div id="logo">
    <a href="https://arangodb.com/">
      <img src="https://docs.arangodb.com/assets/arangodb_logo_2016.png">
    </a>
  </div>
  <div id="logo-small">
    <a href="https://arangodb.com/">
      <img src="https://docs.arangodb.com/assets/arangodb_logo_small_2016.png">
    </a>
  </div>
  <!--
  <select id="version-switcher">
    <option value="devel">VERSION_NUMBER</option>
    <option value="2.8">v2.8</option>
    <option value="2.7">v2.7</option>
    <option value="2.6">v2.6</option>
    <option value="2.5">v2.5</option>
    <option value="2.4">v2.4</option>
    <option value="2.3">v2.3</option>
    <option value="2.2">v2.2</option>
    <option value="2.1">v2.1</option>
  </select>
  -->
  <div class="google-search">
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
  <ul id="navmenu">
    <li>
      <a href="https://docs.arangodb.com/devel/Manual/index.html">Manual</a>
    </li>
    <li>
      <a href="https://docs.arangodb.com/devel/AQL/index.html">AQL</a>
    </li>
    <li>
      <a href="https://docs.arangodb.com/devel/HTTP/index.html">HTTP</a>
    </li>
    <li class="active-tab">
      <a href="https://docs.arangodb.com/cookbook">Cookbook</a>
    </li>
    <li class="socialIcons">
      <a href="https://github.com/ArangoDB/ArangoDB/issues" target="blank" name="github">
        <i title="GitHub" class="fa fa-github"></i>
      </a>
    </li>
    <li class="socialIcons">
      <a href="http://stackoverflow.com/questions/tagged/arangodb" target="blank" name="stackoverflow">
        <i title="Stackoverflow" class="fa fa-stack-overflow"></i>
      </a>
    </li>
    <li class="socialIcons socialIcons-googlegroups">
      <a href="https://groups.google.com/forum/#!forum/arangodb" target="blank" name="google groups">
        <img title="Google Groups" alt="Google Groups" src="https://docs.arangodb.com/assets/googlegroupsIcon.png" />
      </a>
    </li>
  </ul>
</div>
        
    <div class="book"
        data-level="5.2"
        data-chapter-title="My first Foxx App pre-2.4"
        data-filepath="Foxx/FirstStepsLegacy.md"
        data-basepath=".."
        data-revision="Thu Jun 02 2016 12:54:56 GMT+0000 (UTC)"
        data-innerlanguage="">
    

<div class="book-summary">
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="DocumentInheritance.html">
            
                
                    <a href="../DocumentInheritance.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        Modelling Document Inheritance
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2" data-path="AccessingShapesData.html">
            
                
                    <a href="../AccessingShapesData.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        Accessing Shapes Data
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3" data-path="AQL/index.html">
            
                
                    <a href="../AQL/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        AQL
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1" data-path="AQL/Joins.html">
            
                
                    <a href="../AQL/Joins.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.</b>
                        
                        Using Joins in AQL
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="AQL/DynamicAttributeNames.html">
            
                
                    <a href="../AQL/DynamicAttributeNames.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.</b>
                        
                        Using Dynamic Attribute Names
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="AQL/CreatingTestData.html">
            
                
                    <a href="../AQL/CreatingTestData.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.3.</b>
                        
                        Creating Test-data using AQL
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="AQL/DiffingDocuments.html">
            
                
                    <a href="../AQL/DiffingDocuments.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.4.</b>
                        
                        Diffing Documents
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.5" data-path="AQL/AvoidingInjection.html">
            
                
                    <a href="../AQL/AvoidingInjection.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.5.</b>
                        
                        Avoiding Parameter Injection
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.6" data-path="AQL/MultilineQueryStrings.html">
            
                
                    <a href="../AQL/MultilineQueryStrings.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.6.</b>
                        
                        Multiline Query Strings
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4" data-path="Graph/index.html">
            
                
                    <a href="../Graph/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        Graph
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1" data-path="Graph/FindingLeafNodesAql.html">
            
                
                    <a href="../Graph/FindingLeafNodesAql.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.1.</b>
                        
                        Finding Leaf Nodes with AQL
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="Graph/FilteringNodesAql.html">
            
                
                    <a href="../Graph/FilteringNodesAql.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.2.</b>
                        
                        Filtering Nodes with AQL
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="Graph/CountingNodesEfficientlyAql.html">
            
                
                    <a href="../Graph/CountingNodesEfficientlyAql.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.3.</b>
                        
                        Counting Nodes efficiently with AQL
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.4" data-path="Graph/FulldepthTraversal.html">
            
                
                    <a href="../Graph/FulldepthTraversal.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.4.</b>
                        
                        Fulldepth Graph-Traversal
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.5" data-path="Graph/FindingConnectedVerticesForSubgraphs.html">
            
                
                    <a href="../Graph/FindingConnectedVerticesForSubgraphs.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.5.</b>
                        
                        Vertices for Subgraphs
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.6" data-path="Graph/JavaDriverGraphExampleVertex.html">
            
                
                    <a href="../Graph/JavaDriverGraphExampleVertex.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.6.</b>
                        
                        Vertex example with Java
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.7" data-path="Graph/JavaDriverBaseDocument.html">
            
                
                    <a href="../Graph/JavaDriverBaseDocument.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.7.</b>
                        
                        Accessing base documents with Java
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.8" data-path="Graph/CustomVisitorFromNodeJs.html">
            
                
                    <a href="../Graph/CustomVisitorFromNodeJs.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.8.</b>
                        
                        Using a custom Visitor
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.9" data-path="Graph/ExampleActorsAndMovies.html">
            
                
                    <a href="../Graph/ExampleActorsAndMovies.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.9.</b>
                        
                        Example AQL Queries for Graphs
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.10" data-path="Graph/JavaDriverXmlData.html">
            
                
                    <a href="../Graph/JavaDriverXmlData.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.10.</b>
                        
                        Add XML data to ArangoDB with Java
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5" data-path="Foxx/index.html">
            
                
                    <a href="../Foxx/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                        Foxx
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.1" data-path="Foxx/FirstSteps.html">
            
                
                    <a href="../Foxx/FirstSteps.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.1.</b>
                        
                        My first Foxx App
                    </a>
            
            
        </li>
    
        <li class="chapter active" data-level="5.2" data-path="Foxx/FirstStepsLegacy.html">
            
                
                    <a href="../Foxx/FirstStepsLegacy.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.2.</b>
                        
                        My first Foxx App pre-2.4
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.3" data-path="Foxx/Auth.html">
            
                
                    <a href="../Foxx/Auth.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.3.</b>
                        
                        Adding Authentication
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.4" data-path="Foxx/AuthLegacy.html">
            
                
                    <a href="../Foxx/AuthLegacy.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.4.</b>
                        
                        Adding Authentication pre-2.5
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.5" data-path="Foxx/MakingRequests.html">
            
                
                    <a href="../Foxx/MakingRequests.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.5.</b>
                        
                        Using external APIs
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.6" data-path="Foxx/Queues.html">
            
                
                    <a href="../Foxx/Queues.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.6.</b>
                        
                        Background jobs
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.7" data-path="Foxx/QueuesLegacy.html">
            
                
                    <a href="../Foxx/QueuesLegacy.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.7.</b>
                        
                        Legacy background jobs
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.8" data-path="Foxx/CustomQueueJobsLegacy.html">
            
                
                    <a href="../Foxx/CustomQueueJobsLegacy.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.8.</b>
                        
                        Legacy custom Background jobs
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.9" data-path="Foxx/Scripts.html">
            
                
                    <a href="../Foxx/Scripts.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.9.</b>
                        
                        Creating a Foxx script
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.10" data-path="Foxx/CustomQueueJobs.html">
            
                
                    <a href="../Foxx/CustomQueueJobs.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.10.</b>
                        
                        Custom job types for Queues
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.11" data-path="Foxx/GeneratorFirstSteps.html">
            
                
                    <a href="../Foxx/GeneratorFirstSteps.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.11.</b>
                        
                        My first FoxxGenerator App
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.12" data-path="Foxx/Deploy.html">
            
                
                    <a href="../Foxx/Deploy.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.12.</b>
                        
                        How to deploy a Foxx App
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.13" data-path="Foxx/MakingAppAccessible.html">
            
                
                    <a href="../Foxx/MakingAppAccessible.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.13.</b>
                        
                        Apps accessible from the Web
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.14" data-path="Foxx/ApiKeys.html">
            
                
                    <a href="../Foxx/ApiKeys.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.14.</b>
                        
                        API-Key Management
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.15" data-path="Foxx/BinaryFileUploads.html">
            
                
                    <a href="../Foxx/BinaryFileUploads.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.15.</b>
                        
                        Handling Binary HTTP documents in Foxx
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.16" data-path="Foxx/BinaryHttpPost.html">
            
                
                    <a href="../Foxx/BinaryHttpPost.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.16.</b>
                        
                        Sending Binary HTTP documents from Foxx
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.17" data-path="Foxx/Testing.html">
            
                
                    <a href="../Foxx/Testing.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.17.</b>
                        
                        Foxx Testing
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6" data-path="UseCases/index.html">
            
                
                    <a href="../UseCases/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                        Use Cases / Examples
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1" data-path="UseCases/CrawlingGithubPromises.html">
            
                
                    <a href="../UseCases/CrawlingGithubPromises.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.1.</b>
                        
                        Crawling Github with Promises
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.2" data-path="UseCases/SailsJS.html">
            
                
                    <a href="../UseCases/SailsJS.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.2.</b>
                        
                        Using ArangoDB with Sails.js
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.3" data-path="UseCases/PopulatingAnAutocompleteTextbox.html">
            
                
                    <a href="../UseCases/PopulatingAnAutocompleteTextbox.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.3.</b>
                        
                        Populating a Textbox
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.4" data-path="UseCases/ExportingData.html">
            
                
                    <a href="../UseCases/ExportingData.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.4.</b>
                        
                        Exporting Data
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="7" data-path="Administration/index.html">
            
                
                    <a href="../Administration/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.</b>
                        
                        Administration
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="7.1" data-path="Administration/Authentication.html">
            
                
                    <a href="../Administration/Authentication.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.1.</b>
                        
                        Using Authentication
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.2" data-path="Administration/ImportingData.html">
            
                
                    <a href="../Administration/ImportingData.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.2.</b>
                        
                        Importing Data
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.3" data-path="Administration/ReplicatingData.html">
            
                
                    <a href="../Administration/ReplicatingData.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.3.</b>
                        
                        Replicating Data
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.4" data-path="Administration/XCopyInstallWindows.html">
            
                
                    <a href="../Administration/XCopyInstallWindows.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.4.</b>
                        
                        XCopy Install Windows
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="8" data-path="Compiling/index.html">
            
                
                    <a href="../Compiling/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.</b>
                        
                        Compiling / Build
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="8.1" data-path="Compiling/Debian.html">
            
                
                    <a href="../Compiling/Debian.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.1.</b>
                        
                        Compile on Debian
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8.2" data-path="Compiling/Windows.html">
            
                
                    <a href="../Compiling/Windows.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.2.</b>
                        
                        Compile on Windows
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8.3" data-path="Compiling/WindowsLegacy.html">
            
                
                    <a href="../Compiling/WindowsLegacy.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.3.</b>
                        
                        Compile on Windows pre-2.4
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8.4" data-path="Compiling/RunningCustomBuild.html">
            
                
                    <a href="../Compiling/RunningCustomBuild.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.4.</b>
                        
                        Running Custom Build
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8.5" data-path="Compiling/Windows30.html">
            
                
                    <a href="../Compiling/Windows30.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.5.</b>
                        
                        Compile 3.0 on Windows (devel)
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="9" data-path="Cloud/index.html">
            
                
                    <a href="../Cloud/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.</b>
                        
                        Cloud, DCOS and Docker
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="9.1" data-path="Cloud/Aws.html">
            
                
                    <a href="../Cloud/Aws.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.1.</b>
                        
                        Running on AWS
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9.2" data-path="Cloud/AwsUpdate.html">
            
                
                    <a href="../Cloud/AwsUpdate.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.2.</b>
                        
                        Update on AWS
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9.3" data-path="Cloud/Azure.html">
            
                
                    <a href="../Cloud/Azure.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.3.</b>
                        
                        Running on Azure
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9.4" data-path="Cloud/DockerContainer.html">
            
                
                    <a href="../Cloud/DockerContainer.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.4.</b>
                        
                        Docker ArangoDB
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9.5" data-path="Cloud/NodeJsDocker.html">
            
                
                    <a href="../Cloud/NodeJsDocker.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.5.</b>
                        
                        Docker with NodeJS App
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9.6" data-path="Cloud/GiantSwarm.html">
            
                
                    <a href="../Cloud/GiantSwarm.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.6.</b>
                        
                        In the GiantSwarm
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9.7" data-path="Cloud/Mesosphere.html">
            
                
                    <a href="../Cloud/Mesosphere.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.7.</b>
                        
                        ArangoDB in Mesos
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="10" data-path="Monitoring/Collectd.html">
            
                
                    <a href="../Monitoring/Collectd.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.</b>
                        
                        Monitoring
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="10.1" data-path="Monitoring/SlaveStatus.html">
            
                
                    <a href="../Monitoring/SlaveStatus.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.1.</b>
                        
                        Collectd - Replication Slaves
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="10.2" data-path="Monitoring/TrafficWithIPAccounting.html">
            
                
                    <a href="../Monitoring/TrafficWithIPAccounting.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.2.</b>
                        
                        Collectd - Network usage
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="10.3" data-path="Monitoring/OtherRelevantMetrics.html">
            
                
                    <a href="../Monitoring/OtherRelevantMetrics.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.3.</b>
                        
                        Collectd - more Metrics
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="10.4" data-path="Monitoring/FoxxApps.html">
            
                
                    <a href="../Monitoring/FoxxApps.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.4.</b>
                        
                        Collectd - Monitoring Foxx
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Published with GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../" >ArangoDB Cookbook</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="my-first-foxx-app">My first Foxx App</h1>
<h2 id="problem">Problem</h2>
<p>I want to create a simple API with <a href="https://foxx.arangodb.com" target="_blank">Foxx</a>, but I never created one before. Specifically I want to create simple API to organize my todo items.</p>
<p><strong>Note:</strong> For this recipe you need Arango 2.3. or a version below. For Arango since 2.4 look at the <a href="https://docs.arangodb.com/2.8/Foxx/Nutshell/index.html" target="_blank">new My first Foxx App</a>.</p>
<h2 id="solution">Solution</h2>
<h3 id="create-the-folder-structure-for-foxx-apps-and-start-arangodb">Create the folder structure for Foxx apps and start ArangoDB</h3>
<p>Create a folder <code>foxx_apps</code> somewhere where you have write access. Create a folder <code>databases</code> inside of it, and one called <code>_system</code> inside of that. Inside of this folder, create a folder for your app. Let&apos;s call it <code>todos</code>. From now on we will work in that folder. We now create a file called <code>manifest.json</code> where we will add some meta information (if you want to get more information about the manifest file, check out <a href="https://docs.arangodb.com/2.3/Foxx/FoxxManifest.html" target="_blank">in the documentation</a>):</p>
<pre><code class="lang-json">{
  <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;todos&quot;</span>,
  <span class="hljs-string">&quot;version&quot;</span>: <span class="hljs-string">&quot;0.1.0&quot;</span>,
  <span class="hljs-string">&quot;description&quot;</span>: <span class="hljs-string">&quot;My first Foxx app to save todos in ArangoDB&quot;</span>,
  <span class="hljs-string">&quot;author&quot;</span>: <span class="hljs-string">&quot;YOUR NAME&quot;</span>,
  <span class="hljs-string">&quot;license&quot;</span>: <span class="hljs-string">&quot;Apache 2 License&quot;</span>
}
</code></pre>
<p>Now you can start ArangoDB with the following command:</p>
<pre><code>arangod --javascript.dev-app-path /PATH/TO/foxx_apps /PATH/TO/DB
</code></pre><p>In that case, <code>/PATH/TO/foxx_apps</code> is the path to the <code>foxx_apps</code> folder you created above and <code>/PATH/TO/DB</code> is the path to the folder where your database should be. If you can see the admin interface on <a href="http://localhost:8529" target="_blank">http://localhost:8529</a> you&apos;re now ready to go. Click on &apos;Applications&apos; in the navigation bar &#x2013; this is the place where all your Foxx apps are. You will see an app called <code>todos (dev)</code> &#x2013; the <code>dev</code> means that your app is running in development mode which features automatic reloading. We are now ready to go.</p>
<p><em>Don&apos;t have ArangoDB installed yet? Check out the instructions <a href="https://www.arangodb.com/install" target="_blank">on our downloads page</a>.</em></p>
<h3 id="create-the-required-collections">Create the required collections</h3>
<p>In ArangoDB you need to create a collection in order to save documents. We will need a collection for our todos. We need to do that before the app is running. In Foxx we use a setup script to prepare ArangoDB for running our app, which includes creating collections. Create a folder <code>scripts</code> and a file called <code>setup.js</code> inside of it:</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> db = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;org/arangodb&apos;</span>).db,
  todos = applicationContext.collectionName(<span class="hljs-string">&apos;todos&apos;</span>);

<span class="hljs-keyword">if</span> (db._collection(todos) === <span class="hljs-literal">null</span>) {
  db._create(todos);
}
</code></pre>
<p>We use <code>applicationContext.collectionName</code> to get a name for a collection that is specific for our apps. This allows you to install the same app twice and also prevents different apps writing into the same collection by accident. We will only create the collection, if it has not been created yet. If you want to learn more about <code>db</code>, please check out <a href="https://docs.arangodb.com/2.8/Collections/index.html" target="_blank">our documentation about handling collections</a>. In our manifest file we now need to add this setup script by adding the following line:</p>
<pre><code class="lang-json"><span class="hljs-string">&quot;setup&quot;</span>: <span class="hljs-string">&quot;scripts/setup.js&quot;</span>
</code></pre>
<p>The setup script will be executed when the app is installed. In the development mode however, it will be called everytime we request the app. If we click on the tiny <code>i</code> on our app, we will get to interactive documentation for our app (which is empty right now, because we don&apos;t have any routes yet). This will trigger our app and therefore execute our setup script. To check if that worked, go to <code>collections</code>. You will see a collection called <code>dev_ideas_ideas</code>. Setup is done!</p>
<h3 id="create-our-first-route">Create our first route</h3>
<p>In Foxx, we use controllers to add routes to our application. Let&apos;s create a folder <code>controllers</code> and inside of that our first controller in a file <code>todos.js</code>:</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> Foxx = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;org/arangodb/foxx&apos;</span>),
  controller;

controller = <span class="hljs-keyword">new</span> Foxx.Controller(applicationContext);

controller.get(<span class="hljs-string">&apos;/&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req, res</span>) </span>{
  res.json({
    hello: <span class="hljs-string">&apos;world&apos;</span>
  });
});
</code></pre>
<p>This will add a <code>get</code> route on the route of the controller which returns a JSON response <code>{ &quot;hello&quot;: &quot;world&quot; }</code>. We now need to mount that controller to some endpoint, this is again done in our manifest file:</p>
<pre><code class="lang-json"><span class="hljs-string">&quot;controllers&quot;</span>: {
  <span class="hljs-string">&quot;/todos&quot;</span>: <span class="hljs-string">&quot;controllers/todos.js&quot;</span>
}
</code></pre>
<p>Our controller is now reachable on the <code>todos</code> endpoint. Want to see it in action? Let&apos;s go to the interactive documentation for our app again (click on Applications, then on the <code>i</code> next to the app <code>todos (dev)</code>). Click on <code>todos</code> and then you will see a <code>get</code> route &#x2013; clicking on that will reveal the documentation for this specific route. Click <code>Try it out</code> and you will see the response we defined. But this description seems a little empty &#x2013; let&apos;s add some description of what this route should do to our controller:</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> Foxx = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;org/arangodb/foxx&apos;</span>),
  controller;

controller = <span class="hljs-keyword">new</span> Foxx.Controller(applicationContext);

<span class="hljs-comment">/** Get a list of all todos
 *
 * Get a list of all todos that are stored in the database.
 */</span>
controller.get(<span class="hljs-string">&apos;/&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req, res</span>) </span>{
  res.json({
    hello: <span class="hljs-string">&apos;world&apos;</span>
  });
});
</code></pre>
<p>If you go to the interactive documentation again, you will now see the description you just added. Great! If you want more information about controllers, see <a href="https://docs.arangodb.com/2.3/Foxx/FoxxController.html" target="_blank">the documentation</a>.</p>
<h3 id="add-a-model-that-describes-our-todo-items">Add a model that describes our todo items</h3>
<p>We now need to define how we want a single todo item looks like. Foxx uses this information for both the documentation as well as for validating inputs. In a file called <code>todo.js</code> in the folder <code>models</code> you put the following <a href="https://docs.arangodb.com/2.3/Foxx/FoxxModel.html" target="_blank">Foxx Model</a> prototype:</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> Foxx = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;org/arangodb/foxx&apos;</span>),
  Joi = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;joi&apos;</span>),
  Todo;

Todo = Foxx.Model.extend({
  schema: {
    completed: Joi.boolean().default(<span class="hljs-literal">true</span>),
    order: Joi.number().integer().required(),
    title: Joi.string().required()
  }
});

exports.Model = Todo;
</code></pre>
<p>Now we can use the model in our post route to create new items. We want to store the model in the database &#x2013; in order to do that we create a Repository. A repository has the responsibility to store models in a collection as well as giving a nice interface for searching for those models as well as updating or deleting them. To create a repository you have to provide the collection it should use as well as the model used for the documents in the collection. We create a standard repository in the following snippet. Our post action receives a Todo as its body. We provide a name for it as well as a short description. In the body of the function we then get the parameter <code>todo</code> which is an instance of our Todo model. We then save this model into our database. This will also add some meta data to the model (the ID, key and revision from ArangoDB). We then send a response back to the client.</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> Foxx = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;org/arangodb/foxx&apos;</span>),
  Todo = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;models/todo&apos;</span>).Model,
  todosCollection = applicationContext.collection(<span class="hljs-string">&quot;todos&quot;</span>),
  todos,
  controller;

todos = <span class="hljs-keyword">new</span> Foxx.Repository(todosCollection, {
  model: Todo
});

controller = <span class="hljs-keyword">new</span> Foxx.Controller(applicationContext);

<span class="hljs-comment">/** Get a list of all todos
*
* Get a list of all todos that are stored in the database.
*/</span>
controller.get(<span class="hljs-string">&apos;/&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req, res</span>) </span>{
  res.json({
    hello: <span class="hljs-string">&apos;world&apos;</span>
  });
});

<span class="hljs-comment">/** Add a new todo to the list
*
* Create a new todo and add it to the list of todos.
*/</span>
controller.post(<span class="hljs-string">&apos;/&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req, res</span>) </span>{
  <span class="hljs-keyword">var</span> todo = req.params(<span class="hljs-string">&apos;todo&apos;</span>);
  todos.save(todo);
  res.json(todo.forClient());
}).bodyParam(<span class="hljs-string">&apos;todo&apos;</span>, <span class="hljs-string">&apos;The Todo you want to create&apos;</span>, Todo);
</code></pre>
<p>We can now create a todo via the interactive documentation. If you click on the post route, you will see a text box where you can add the raw body that you want to send to the database. Enter the following for example:</p>
<pre><code class="lang-json">{
  <span class="hljs-string">&quot;order&quot;</span>: <span class="hljs-number">1</span>,
  <span class="hljs-string">&quot;title&quot;</span>: <span class="hljs-string">&quot;Clean my house&quot;</span>
}
</code></pre>
<p>This will create a new todo and add it to the collection. If you look into the collection, you will see that the completed attribute is set to <code>false</code>, because that&apos;s what we set as a default in our model.</p>
<h3 id="get-a-list-of-all-todos">Get a list of all todos</h3>
<p>Our initial implementation of the route to get all todos was a fake, let us fix that. We will use <a href="http://underscorejs.org" target="_blank">underscore.js</a> to iterate over all stored todos to call the <code>forClient</code> method on them. First require underscore as <code>_</code> (<code>_ = require(&apos;underscore&apos;)</code>), then change the index action to be the following:</p>
<pre><code class="lang-js">controller.get(<span class="hljs-string">&apos;/&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req, res</span>) </span>{
  res.json(_.map(todos.all(), <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">todo</span>) </span>{
    <span class="hljs-keyword">return</span> todo.forClient();
  }));
});
</code></pre>
<p>Try it out in the interactive documentation, you will get a list of all the todos.</p>
<h3 id="extending-the-representation-of-our-model">Extending the representation of our model</h3>
<p>In both our list as well as the return value we don&apos;t get the key of the document. In order to delete a single item we will however need this information. Let&apos;s change the <code>forClient</code> method of our model in order to get this information. The method could look like this:</p>
<pre><code class="lang-js">forClient: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> {
    completed: <span class="hljs-keyword">this</span>.get(<span class="hljs-string">&apos;completed&apos;</span>),
    order: <span class="hljs-keyword">this</span>.get(<span class="hljs-string">&apos;order&apos;</span>),
    title: <span class="hljs-keyword">this</span>.get(<span class="hljs-string">&apos;title&apos;</span>),
    key: <span class="hljs-keyword">this</span>.get(<span class="hljs-string">&apos;_key&apos;</span>)
  };
}
</code></pre>
<p>We now get the key in both routes.</p>
<h3 id="deleting-a-todo-item">Deleting a todo item</h3>
<p>We could for example define the following route to delete a todo:</p>
<pre><code class="lang-js">controller.del(<span class="hljs-string">&apos;/:key&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req, res</span>) </span>{
  <span class="hljs-keyword">var</span> key = req.params(<span class="hljs-string">&apos;key&apos;</span>);
  todos.removeById(key);
  res.json({ success: <span class="hljs-literal">true</span> });
}).pathParam(<span class="hljs-string">&apos;key&apos;</span>, Joi.string().description(<span class="hljs-string">&apos;The key of the Todo&apos;</span>));
</code></pre>
<p><code>pathParam</code> works similar to <code>bodyParam</code>, but for path parameters. Declare a path parameter in the route by prefixing it with a colon. We use joi again to describe our parameter. </p>
<pre><code class="lang-js">controller.del(<span class="hljs-string">&apos;/:key&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req, res</span>) </span>{
  <span class="hljs-keyword">var</span> key = req.params(<span class="hljs-string">&apos;key&apos;</span>);
  todos.removeById(key);
  res.json({ success: <span class="hljs-literal">true</span> });
}).pathParam(<span class="hljs-string">&apos;key&apos;</span>, Joi.string().description(<span class="hljs-string">&apos;The key of the Todo&apos;</span>));
</code></pre>
<p>When you try this with a todo item you created, it will work. Send the same request again: It will blow up with an error: The document could not be found. This is of course correct, but you may want to have a nicer error response. In Foxx, we just add an error response description to the route and Foxx will handle this case for us. When ArangoDB (require it with <code>ArangoError = require(&apos;org/arangodb&apos;).ArangoError</code>) can&apos;t find a document, it will throw an &apos;ArangoDB error&apos;. We will instead return a 404 status code with a descriptive error message:</p>
<pre><code class="lang-js">controller.del(<span class="hljs-string">&apos;/:key&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req, res</span>) </span>{
  <span class="hljs-keyword">var</span> key = req.params(<span class="hljs-string">&apos;key&apos;</span>);
  todos.removeById(key);
  res.json({ success: <span class="hljs-literal">true</span> });
}).pathParam(<span class="hljs-string">&apos;key&apos;</span>, Joi.string().description(<span class="hljs-string">&apos;The key of the Todo&apos;</span>))
  .errorResponse(ArangoError, <span class="hljs-number">404</span>, <span class="hljs-string">&apos;The todo item could not be found&apos;</span>);
</code></pre>
<h2 id="comment">Comment</h2>
<ul>
<li>If you want to have custom methods on your repository, you can extend it in the same way you extended the Foxx.Model. <a href="https://docs.arangodb.com/2.3/Foxx/FoxxRepository.html" target="_blank">Learn more about it here</a></li>
<li>We will add a new recipe for authentication in the future. In the mean time check out the <a href="https://github.com/arangodb/foxx-sessions-example" target="_blank">foxx-sessions-example</a> app</li>
<li>We will also talk about workers and how to do work outside the request-response-cycle</li>
</ul>
<p><strong>Author</strong>: <a href="https://github.com/moonglum" target="_blank">Lucas Dohmen</a></p>
<p><strong>Tags</strong>: #foxx</p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../Foxx/FirstSteps.html" class="navigation navigation-prev " aria-label="Previous page: My first Foxx App"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../Foxx/Auth.html" class="navigation navigation-next " aria-label="Next page: Adding Authentication"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../gitbook/app.js"></script>

    
    <script src="../gitbook/plugins/gitbook-plugin-toggle-chapters/toggle.js"></script>
    

    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/3.1.1/anchor.min.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-anchorjs/anchor-style.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-piwik/plugin.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"addcssjs":{"js":["styles/header.js"],"css":["styles/header.css"]},"add-header":{"BASE_PATH":"https://docs.arangodb.com/devel"},"piwik":{"URL":"www.arangodb.com/piwik/","siteId":12},"toggle-chapters":{},"anchorjs":{},"highlight":{},"fontsettings":{"theme":"white","family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        <!-- body:end -->
<script type="text/javascript">var _paq = _paq || [];_paq.push(['trackPageView']);_paq.push(['enableLinkTracking']);(function() {var u=(("https:" == document.location.protocol) ? "https" : "http") + "://www.arangodb.com/piwik/";_paq.push(['setTrackerUrl', u+'piwik.php']);_paq.push(['setSiteId', 12]);var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0]; g.type='text/javascript';g.defer=true; g.async=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);})();</script><noscript><p><img src="http://www.arangodb.com/piwik/piwik.php?idsite=12" style="border:0;" alt="" /></p></noscript>
    </body>
    <!-- End of book ArangoDB Cookbook -->
</html>
