<!DOCTYPE HTML>
<html lang="en" >
    <!-- Start book ArangoDB v3.0.x-devel (2016-06-02) AQL Documentation -->
    <head>
        <!-- head:start -->
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>with Arangosh | ArangoDB v3.0.x-devel (2016-06-02) AQL Documentation</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.6.7">
        <meta name="author" content="ArangoDB GmbH">
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="../gitbook/style.css">
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-toggle-chapters/toggle.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
    
        <link rel="stylesheet" href="../styles/website.css">
    

        
    
    
    <link rel="next" href="../Invocation/WithWebInterface.html" />
    
    
    <link rel="prev" href="../Invocation/index.html" />
    

        <!-- head:end -->
<script type="text/javascript" src="../styles/header.js"></script><link rel="stylesheet" type="text/css" href="../styles/header.css">
    </head>
    <body>
        <!-- body:start -->
<div id="header">
  <div id="logo">
    <a href="https://arangodb.com/">
      <img src="https://docs.arangodb.com/assets/arangodb_logo_2016.png">
    </a>
  </div>
  <div id="logo-small">
    <a href="https://arangodb.com/">
      <img src="https://docs.arangodb.com/assets/arangodb_logo_small_2016.png">
    </a>
  </div>
  <select id="version-switcher">
    <option value="devel">v3.0.x-devel (2016-06-02)</option>
    <option value="2.8">v2.8</option>
    <option value="2.7">v2.7</option>
    <option value="2.6">v2.6</option>
    <option value="2.5">v2.5</option>
    <option value="2.4">v2.4</option>
    <option value="2.3">v2.3</option>
    <option value="2.2">v2.2</option>
    <option value="2.1">v2.1</option>
  </select>
  <div class="google-search">
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
  <ul id="navmenu">
    <li>
      <a href="https://docs.arangodb.com/devel/Manual/index.html">Manual</a>
    </li>
    <li class="active-tab">
      <a href="https://docs.arangodb.com/devel/AQL/index.html">AQL</a>
    </li>
    <li>
      <a href="https://docs.arangodb.com/devel/HTTP/index.html">HTTP</a>
    </li>
    <li>
      <a href="https://docs.arangodb.com/cookbook">Cookbook</a>
    </li>
    <li class="socialIcons">
      <a href="https://github.com/ArangoDB/ArangoDB/issues" target="blank" name="github">
        <i title="GitHub" class="fa fa-github"></i>
      </a>
    </li>
    <li class="socialIcons">
      <a href="http://stackoverflow.com/questions/tagged/arangodb" target="blank" name="stackoverflow">
        <i title="Stackoverflow" class="fa fa-stack-overflow"></i>
      </a>
    </li>
    <li class="socialIcons socialIcons-googlegroups">
      <a href="https://groups.google.com/forum/#!forum/arangodb" target="blank" name="google groups">
        <img title="Google Groups" alt="Google Groups" src="https://docs.arangodb.com/assets/googlegroupsIcon.png" />
      </a>
    </li>
  </ul>
</div>
        
    <div class="book"
        data-level="1.1"
        data-chapter-title="with Arangosh"
        data-filepath="Invocation/WithArangosh.md"
        data-basepath=".."
        data-revision="Thu Jun 02 2016 11:44:53 GMT+0000 (UTC)"
        data-innerlanguage="">
    

<div class="book-summary">
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="Invocation/index.html">
            
                
                    <a href="../Invocation/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        How to invoke AQL
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.1" data-path="Invocation/WithArangosh.html">
            
                
                    <a href="../Invocation/WithArangosh.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                        with Arangosh
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="Invocation/WithWebInterface.html">
            
                
                    <a href="../Invocation/WithWebInterface.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.</b>
                        
                        with the Web Interface
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2" data-path="Fundamentals/index.html">
            
                
                    <a href="../Fundamentals/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        AQL Fundamentals
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1" data-path="Fundamentals/Syntax.html">
            
                
                    <a href="../Fundamentals/Syntax.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                        AQL Syntax
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="Fundamentals/DataTypes.html">
            
                
                    <a href="../Fundamentals/DataTypes.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                        Data types
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="Fundamentals/BindParameters.html">
            
                
                    <a href="../Fundamentals/BindParameters.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.3.</b>
                        
                        Bind Parameters
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="Fundamentals/TypeValueOrder.html">
            
                
                    <a href="../Fundamentals/TypeValueOrder.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.4.</b>
                        
                        Type and value order
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.5" data-path="Fundamentals/DocumentData.html">
            
                
                    <a href="../Fundamentals/DocumentData.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.5.</b>
                        
                        Accessing data from collections
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.6" data-path="Fundamentals/QueryResults.html">
            
                
                    <a href="../Fundamentals/QueryResults.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.6.</b>
                        
                        Query Results
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.7" data-path="Fundamentals/QueryErrors.html">
            
                
                    <a href="../Fundamentals/QueryErrors.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.7.</b>
                        
                        Query Errors
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3" data-path="Operators.html">
            
                
                    <a href="../Operators.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        Operators
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4" data-path="DataModification.html">
            
                
                    <a href="../DataModification.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        Data Modification Queries
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5" data-path="Operations/index.html">
            
                
                    <a href="../Operations/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                        High level Operations
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.1" data-path="Operations/For.html">
            
                
                    <a href="../Operations/For.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.1.</b>
                        
                        FOR
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="Operations/Return.html">
            
                
                    <a href="../Operations/Return.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.2.</b>
                        
                        RETURN
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.3" data-path="Operations/Filter.html">
            
                
                    <a href="../Operations/Filter.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.3.</b>
                        
                        FILTER
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.4" data-path="Operations/Sort.html">
            
                
                    <a href="../Operations/Sort.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.4.</b>
                        
                        SORT
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.5" data-path="Operations/Limit.html">
            
                
                    <a href="../Operations/Limit.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.5.</b>
                        
                        LIMIT
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.6" data-path="Operations/Let.html">
            
                
                    <a href="../Operations/Let.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.6.</b>
                        
                        LET
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.7" data-path="Operations/Collect.html">
            
                
                    <a href="../Operations/Collect.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.7.</b>
                        
                        COLLECT
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.8" data-path="Operations/Remove.html">
            
                
                    <a href="../Operations/Remove.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.8.</b>
                        
                        REMOVE
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.9" data-path="Operations/Update.html">
            
                
                    <a href="../Operations/Update.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.9.</b>
                        
                        UPDATE
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.10" data-path="Operations/Replace.html">
            
                
                    <a href="../Operations/Replace.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.10.</b>
                        
                        REPLACE
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.11" data-path="Operations/Insert.html">
            
                
                    <a href="../Operations/Insert.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.11.</b>
                        
                        INSERT
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.12" data-path="Operations/Upsert.html">
            
                
                    <a href="../Operations/Upsert.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.12.</b>
                        
                        UPSERT
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6" data-path="Functions/index.html">
            
                
                    <a href="../Functions/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                        Functions
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1" data-path="Functions/TypeCast.html">
            
                
                    <a href="../Functions/TypeCast.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.1.</b>
                        
                        Type cast
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.2" data-path="Functions/String.html">
            
                
                    <a href="../Functions/String.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.2.</b>
                        
                        String
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.3" data-path="Functions/Numeric.html">
            
                
                    <a href="../Functions/Numeric.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.3.</b>
                        
                        Numeric
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.4" data-path="Functions/Date.html">
            
                
                    <a href="../Functions/Date.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.4.</b>
                        
                        Date
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.5" data-path="Functions/Array.html">
            
                
                    <a href="../Functions/Array.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.5.</b>
                        
                        Array
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.6" data-path="Functions/Document.html">
            
                
                    <a href="../Functions/Document.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.6.</b>
                        
                        Object / Document
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.7" data-path="Functions/Geo.html">
            
                
                    <a href="../Functions/Geo.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.7.</b>
                        
                        Geo
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.8" data-path="Functions/Fulltext.html">
            
                
                    <a href="../Functions/Fulltext.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.8.</b>
                        
                        Fulltext
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.9" data-path="Functions/Miscellaneous.html">
            
                
                    <a href="../Functions/Miscellaneous.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.9.</b>
                        
                        Miscellaneous
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="7" data-path="Graphs/index.html">
            
                
                    <a href="../Graphs/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.</b>
                        
                        Graphs
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="7.1" data-path="Graphs/Traversals.html">
            
                
                    <a href="../Graphs/Traversals.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.1.</b>
                        
                        Traversal
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.2" data-path="Graphs/Operations.html">
            
                
                    <a href="../Graphs/Operations.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.2.</b>
                        
                        Named Operations
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.3" data-path="Graphs/Functions.html">
            
                
                    <a href="../Graphs/Functions.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.3.</b>
                        
                        Other
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="8" data-path="Advanced/index.html">
            
                
                    <a href="../Advanced/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.</b>
                        
                        Advanced Features
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="8.1" data-path="Advanced/ArrayOperators.html">
            
                
                    <a href="../Advanced/ArrayOperators.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.1.</b>
                        
                        Array Operators
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="9" data-path="Examples/index.html">
            
                
                    <a href="../Examples/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.</b>
                        
                        Usual Query Patterns
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="9.1" data-path="Examples/Counting.html">
            
                
                    <a href="../Examples/Counting.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.1.</b>
                        
                        Counting
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9.2" data-path="Examples/DataModificationQueries.html">
            
                
                    <a href="../Examples/DataModificationQueries.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.2.</b>
                        
                        Data-modification queries
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9.3" data-path="Examples/CombiningQueries.html">
            
                
                    <a href="../Examples/CombiningQueries.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.3.</b>
                        
                        Subqueries
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9.4" data-path="Examples/ProjectionsAndFilters.html">
            
                
                    <a href="../Examples/ProjectionsAndFilters.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.4.</b>
                        
                        Projections and filters
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9.5" data-path="Examples/Join.html">
            
                
                    <a href="../Examples/Join.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.5.</b>
                        
                        Joins
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9.6" data-path="Examples/Grouping.html">
            
                
                    <a href="../Examples/Grouping.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.6.</b>
                        
                        Grouping
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9.7" data-path="Examples/CombiningGraphTraversals.html">
            
                
                    <a href="../Examples/CombiningGraphTraversals.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.7.</b>
                        
                        Traversals
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9.8" data-path="Examples/QueriesNoCollections.html">
            
                
                    <a href="../Examples/QueriesNoCollections.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.8.</b>
                        
                        Queries without collections
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="10" data-path="Extending/index.html">
            
                
                    <a href="../Extending/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.</b>
                        
                        User Functions
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="10.1" data-path="Extending/Conventions.html">
            
                
                    <a href="../Extending/Conventions.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.1.</b>
                        
                        Conventions
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="10.2" data-path="Extending/Functions.html">
            
                
                    <a href="../Extending/Functions.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.2.</b>
                        
                        Registering Functions
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="11" data-path="ExecutionAndPerformance/index.html">
            
                
                    <a href="../ExecutionAndPerformance/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>11.</b>
                        
                        Execution and Performance
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="11.1" data-path="ExecutionAndPerformance/QueryStatistics.html">
            
                
                    <a href="../ExecutionAndPerformance/QueryStatistics.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>11.1.</b>
                        
                        Query statistics
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="11.2" data-path="ExecutionAndPerformance/ParsingQueries.html">
            
                
                    <a href="../ExecutionAndPerformance/ParsingQueries.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>11.2.</b>
                        
                        Parsing queries
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="11.3" data-path="ExecutionAndPerformance/ExplainingQueries.html">
            
                
                    <a href="../ExecutionAndPerformance/ExplainingQueries.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>11.3.</b>
                        
                        Explaining queries
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="11.4" data-path="ExecutionAndPerformance/Optimizer.html">
            
                
                    <a href="../ExecutionAndPerformance/Optimizer.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>11.4.</b>
                        
                        Optimizing queries
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="11.5" data-path="ExecutionAndPerformance/QueryCache.html">
            
                
                    <a href="../ExecutionAndPerformance/QueryCache.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>11.5.</b>
                        
                        Caching query results
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="12" data-path="CommonErrors.html">
            
                
                    <a href="../CommonErrors.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>12.</b>
                        
                        Common Errors
                    </a>
            
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Published with GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../" >ArangoDB v3.0.x-devel (2016-06-02) AQL Documentation</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <p><a name="executing_queries_from_arangosh"></a></p>
<h1 id="executing-queries-from-arangosh">Executing queries from Arangosh</h1>
<p>Within the ArangoDB shell, the <em>_query</em> and <em>_createStatement</em> methods of the <em>db</em> object can be used to execute AQL queries. 
This chapter also describes how to use bind parameters, counting, statistics and cursors. </p>
<p><a name="with_db._query"></a></p>
<h3 id="with-dbquery">with db._query</h3>
<p>One can execute queries with the <em>_query</em> method of the <em>db</em> object. 
This will run the specified query in the context of the currently
selected database and return the query results in a cursor. The results of the cursor
can be printed using its <em>toArray</em> method:</p>
<div id="01_workWithAQL_all_container">
<div id="01_workWithAQL_all_long" onclick="" style="Display: none;">
<pre>
arangosh&gt; db._create(<span class="hljs-string">&quot;mycollection&quot;</span>)
[ArangoCollection <span class="hljs-number">6618</span>, <span class="hljs-string">&quot;mycollection&quot;</span> (type <span class="hljs-built_in">document</span>, status loaded)]
arangosh&gt; db.mycollection.save({ _key: <span class="hljs-string">&quot;testKey&quot;</span>, Hello : <span class="hljs-string">&quot;World&quot;</span> })
{ 
  <span class="hljs-string">&quot;_id&quot;</span> : <span class="hljs-string">&quot;mycollection/testKey&quot;</span>, 
  <span class="hljs-string">&quot;_key&quot;</span> : <span class="hljs-string">&quot;testKey&quot;</span>, 
  <span class="hljs-string">&quot;_rev&quot;</span> : <span class="hljs-string">&quot;6621&quot;</span> 
}
arangosh&gt; db._query(<span class="hljs-string">&apos;FOR my IN mycollection RETURN my._key&apos;</span>).toArray()
[ 
  <span class="hljs-string">&quot;testKey&quot;</span> 
]
</pre>
</div>
<div id="01_workWithAQL_all_short" onclick="$(&apos;#01_workWithAQL_all_short&apos;).hide(); $(&apos;#01_workWithAQL_all_long&apos;).show();">
<pre>
arangosh&gt; db._create(<span class="hljs-string">&quot;mycollection&quot;</span>)
arangosh&gt; db.mycollection.save({ _key: <span class="hljs-string">&quot;testKey&quot;</span>, Hello : <span class="hljs-string">&quot;World&quot;</span> })
arangosh&gt; db._query(<span class="hljs-string">&apos;FOR my IN mycollection RETURN my._key&apos;</span>).toArray()
</pre><div class="example_show_button">show execution results</div>
</div>
</div>



<p><a name="db._query_bind_parameters"></a></p>
<h4 id="dbquery-bind-parameters">db._query Bind parameters</h4>
<p>To pass bind parameters into a query, they can be specified as second argument to the
<em>_query</em> method:</p>
<div id="02_workWithAQL_bindValues_container">
<div id="02_workWithAQL_bindValues_long">
<pre>
arangosh&gt; db._query(
........&gt; <span class="hljs-string">&apos;FOR c IN @@collection FILTER c._key == @key RETURN c._key&apos;</span>, {
........&gt;   <span class="hljs-string">&apos;@collection&apos;</span>: <span class="hljs-string">&apos;mycollection&apos;</span>, 
........&gt;   <span class="hljs-string">&apos;key&apos;</span>: <span class="hljs-string">&apos;testKey&apos;</span>
........&gt; }).toArray();
[ 
  <span class="hljs-string">&quot;testKey&quot;</span> 
]
</pre>
</div>
</div>



<p><a name="es6_template_strings"></a></p>
<h4 id="es6-template-strings">ES6 template strings</h4>
<p>It is also possible to use ES6 template strings for generating AQL queries. There is
a template string generator function named <em>aqlQuery</em>; we call it once to demonstrate
its result, and once putting it directly into the query:</p>
<pre><code>```js
var key = &apos;testKey&apos;;
aqlQuery`FOR c IN mycollection FILTER c._key == ${key} RETURN c._key`;
{ 
  &quot;query&quot; : &quot;FOR c IN mycollection FILTER c._key == @value0 RETURN c._key&quot;, 
  &quot;bindVars&quot; : { 
    &quot;value0&quot; : &quot;testKey&quot; 
  } 
}
```
</code></pre><div id="02_workWithAQL_aqlQuery_container">
<div id="02_workWithAQL_aqlQuery_long">
<pre>
arangosh&gt; <span class="hljs-keyword">var</span> key = <span class="hljs-string">&apos;testKey&apos;</span>;
arangosh&gt; db._query(
........&gt; aqlQuery<span class="hljs-string">`FOR c IN mycollection FILTER c._key == <span class="hljs-subst">${key}</span> RETURN c._key`</span>
........&gt; ).toArray();
[ 
  <span class="hljs-string">&quot;testKey&quot;</span> 
]
</pre>
</div>
</div>



<p>Arbitrary JavaScript expressions can be used in queries that are generated with the 
<em>aqlQuery</em> template string generator. Collection objects are handled automatically:</p>
<div id="02_workWithAQL_aqlCollectionQuery_container">
<div id="02_workWithAQL_aqlCollectionQuery_long" onclick="" style="Display: none;">
<pre>
arangosh&gt; <span class="hljs-keyword">var</span> key = <span class="hljs-string">&apos;testKey&apos;</span>;
arangosh&gt; db._query(aqlQuery<span class="hljs-string">`FOR doc IN <span class="hljs-subst">${ db.mycollection }</span> RETURN doc`</span>
........&gt; ).toArray();
[ 
  { 
    <span class="hljs-string">&quot;_key&quot;</span> : <span class="hljs-string">&quot;testKey&quot;</span>, 
    <span class="hljs-string">&quot;_id&quot;</span> : <span class="hljs-string">&quot;mycollection/testKey&quot;</span>, 
    <span class="hljs-string">&quot;_rev&quot;</span> : <span class="hljs-string">&quot;6621&quot;</span>, 
    <span class="hljs-string">&quot;Hello&quot;</span> : <span class="hljs-string">&quot;World&quot;</span> 
  } 
]
</pre>
</div>
<div id="02_workWithAQL_aqlCollectionQuery_short" onclick="$(&apos;#02_workWithAQL_aqlCollectionQuery_short&apos;).hide(); $(&apos;#02_workWithAQL_aqlCollectionQuery_long&apos;).show();">
<pre>
arangosh&gt; <span class="hljs-keyword">var</span> key = <span class="hljs-string">&apos;testKey&apos;</span>;
arangosh&gt; db._query(aqlQuery<span class="hljs-string">`FOR doc IN <span class="hljs-subst">${ db.mycollection }</span> RETURN doc`</span>
........&gt; ).toArray();
</pre><div class="example_show_button">show execution results</div>
</div>
</div>



<p>Note: data-modification AQL queries normally do not return a result (unless the AQL query 
contains an extra <em>RETURN</em> statement). When not using a <em>RETURN</em> statement in the query, the 
<em>toArray</em> method will return an empty array. </p>
<p><a name="statistics_and_extra_information"></a></p>
<h4 id="statistics-and-extra-information">Statistics and extra Information</h4>
<p>It is always possible to retrieve statistics for a query with the <em>getExtra</em> method:</p>
<div id="03_workWithAQL_getExtra_container">
<div id="03_workWithAQL_getExtra_long" onclick="" style="Display: none;">
<pre>
arangosh&gt; db._query(<span class="hljs-string">`FOR i IN 1..100
........&gt;             INSERT { _key: CONCAT(&apos;test&apos;, TO_STRING(i)) }
........&gt;                INTO mycollection`</span>
........&gt; ).getExtra();
{ 
  <span class="hljs-string">&quot;stats&quot;</span> : { 
    <span class="hljs-string">&quot;writesExecuted&quot;</span> : <span class="hljs-number">100</span>, 
    <span class="hljs-string">&quot;writesIgnored&quot;</span> : <span class="hljs-number">0</span>, 
    <span class="hljs-string">&quot;scannedFull&quot;</span> : <span class="hljs-number">0</span>, 
    <span class="hljs-string">&quot;scannedIndex&quot;</span> : <span class="hljs-number">0</span>, 
    <span class="hljs-string">&quot;filtered&quot;</span> : <span class="hljs-number">0</span>, 
    <span class="hljs-string">&quot;executionTime&quot;</span> : <span class="hljs-number">0.0003979206085205078</span> 
  }, 
  <span class="hljs-string">&quot;warnings&quot;</span> : [ ] 
}
</pre>
</div>
<div id="03_workWithAQL_getExtra_short" onclick="$(&apos;#03_workWithAQL_getExtra_short&apos;).hide(); $(&apos;#03_workWithAQL_getExtra_long&apos;).show();">
<pre>
arangosh&gt; db._query(<span class="hljs-string">`FOR i IN 1..100
........&gt;             INSERT { _key: CONCAT(&apos;test&apos;, TO_STRING(i)) }
........&gt;                INTO mycollection`</span>
........&gt; ).getExtra();
</pre><div class="example_show_button">show execution results</div>
</div>
</div>



<p>The meaning of the statistics values is described in <a href="../ExecutionAndPerformance/QueryStatistics.html">Execution statistics</a>.
You also will find warnings in here; If you&apos;re designing queries on the shell be sure to also look at it.</p>
<p><a name="with__createstatement_(arangostatement)"></a></p>
<h3 id="with-createstatement-arangostatement">with _createStatement (ArangoStatement)</h3>
<p>The <em>_query</em> method is a shorthand for creating an ArangoStatement object,
executing it and iterating over the resulting cursor. If more control over the
result set iteration is needed, it is recommended to first create an
ArangoStatement object as follows:</p>
<div id="04_workWithAQL_statements1_container">
<div id="04_workWithAQL_statements1_long">
<pre>
arangosh&gt; stmt = db._createStatement( {
........&gt; <span class="hljs-string">&quot;query&quot;</span>: <span class="hljs-string">&quot;FOR i IN [ 1, 2 ] RETURN i * 2&quot;</span> } );
[object ArangoStatement]
</pre>
</div>
</div>



<p>To execute the query, use the <em>execute</em> method of the statement:</p>
<div id="05_workWithAQL_statements2_container">
<div id="05_workWithAQL_statements2_long" onclick="" style="Display: none;">
<pre>
arangosh&gt; c = stmt.execute();
[ 
  <span class="hljs-number">2</span>, 
  <span class="hljs-number">4</span> 
]
[object ArangoQueryCursor, count: <span class="hljs-number">2</span>, hasMore: <span class="hljs-literal">false</span>]
</pre>
</div>
<div id="05_workWithAQL_statements2_short" onclick="$(&apos;#05_workWithAQL_statements2_short&apos;).hide(); $(&apos;#05_workWithAQL_statements2_long&apos;).show();">
<pre>
arangosh&gt; c = stmt.execute();
</pre><div class="example_show_button">show execution results</div>
</div>
</div>



<p><a name="cursors"></a></p>
<h4 id="cursors">Cursors</h4>
<p>Once the query executed the query results are available in a cursor. 
The cursor can return all its results at once using the <em>toArray</em> method.
This is a short-cut that you can use if you want to access the full result
set without iterating over it yourself.</p>
<div id="05_workWithAQL_statements3_container">
<div id="05_workWithAQL_statements3_long">
<pre>
arangosh&gt; c.toArray();
[ 
  <span class="hljs-number">2</span>, 
  <span class="hljs-number">4</span> 
]
</pre>
</div>
</div>





<p>Cursors can also be used to iterate over the result set document-by-document.
To do so, use the <em>hasNext</em> and <em>next</em> methods of the cursor:</p>
<div id="05_workWithAQL_statements4_container">
<div id="05_workWithAQL_statements4_long">
<pre>
arangosh&gt; <span class="hljs-keyword">while</span> (c.hasNext()) { <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;internal&quot;</span>).print(c.next()); }
<span class="hljs-number">2</span>
<span class="hljs-number">4</span>
</pre>
</div>
</div>



<p>Please note that you can iterate over the results of a cursor only once, and that
the cursor will be empty when you have fully iterated over it. To iterate over
the results again, the query needs to be re-executed.</p>
<p>Additionally, the iteration can be done in a forward-only fashion. There is no 
backwards iteration or random access to elements in a cursor.    </p>
<p><a name="arangostatement_parameters_binding"></a></p>
<h4 id="arangostatement-parameters-binding">ArangoStatement parameters binding</h4>
<p>To execute an AQL query using bind parameters, you need to create a statement first
and then bind the parameters to it before execution:</p>
<div id="05_workWithAQL_statements5_container">
<div id="05_workWithAQL_statements5_long" onclick="" style="Display: none;">
<pre>
arangosh&gt; <span class="hljs-keyword">var</span> stmt = db._createStatement( {
........&gt; <span class="hljs-string">&quot;query&quot;</span>: <span class="hljs-string">&quot;FOR i IN [ @one, @two ] RETURN i * 2&quot;</span> } );
arangosh&gt; stmt.bind(<span class="hljs-string">&quot;one&quot;</span>, <span class="hljs-number">1</span>);
arangosh&gt; stmt.bind(<span class="hljs-string">&quot;two&quot;</span>, <span class="hljs-number">2</span>);
arangosh&gt; c = stmt.execute();
[ 
  <span class="hljs-number">2</span>, 
  <span class="hljs-number">4</span> 
]
[object ArangoQueryCursor, count: <span class="hljs-number">2</span>, hasMore: <span class="hljs-literal">false</span>]
</pre>
</div>
<div id="05_workWithAQL_statements5_short" onclick="$(&apos;#05_workWithAQL_statements5_short&apos;).hide(); $(&apos;#05_workWithAQL_statements5_long&apos;).show();">
<pre>
arangosh&gt; <span class="hljs-keyword">var</span> stmt = db._createStatement( {
........&gt; <span class="hljs-string">&quot;query&quot;</span>: <span class="hljs-string">&quot;FOR i IN [ @one, @two ] RETURN i * 2&quot;</span> } );
arangosh&gt; stmt.bind(<span class="hljs-string">&quot;one&quot;</span>, <span class="hljs-number">1</span>);
arangosh&gt; stmt.bind(<span class="hljs-string">&quot;two&quot;</span>, <span class="hljs-number">2</span>);
arangosh&gt; c = stmt.execute();
</pre><div class="example_show_button">show execution results</div>
</div>
</div>



<p>The cursor results can then be dumped or iterated over as usual, e.g.:</p>
<div id="05_workWithAQL_statements6_container">
<div id="05_workWithAQL_statements6_long">
<pre>
arangosh&gt; c.toArray();
[ 
  <span class="hljs-number">2</span>, 
  <span class="hljs-number">4</span> 
]
</pre>
</div>
</div>



<p>or</p>
<div id="05_workWithAQL_statements7_container">
<div id="05_workWithAQL_statements7_long">
<pre>
arangosh&gt; <span class="hljs-keyword">while</span> (c.hasNext()) { <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;internal&quot;</span>).print(c.next()); }
<span class="hljs-number">2</span>
<span class="hljs-number">4</span>
</pre>
</div>
</div>



<p>Please note that bind parameters can also be passed into the <em>_createStatement</em> method directly,
making it a bit more convenient:</p>
<div id="05_workWithAQL_statements8_container">
<div id="05_workWithAQL_statements8_long">
<pre>
arangosh&gt; stmt = db._createStatement( { 
........&gt;  <span class="hljs-string">&quot;query&quot;</span>: <span class="hljs-string">&quot;FOR i IN [ @one, @two ] RETURN i * 2&quot;</span>, 
........&gt;  <span class="hljs-string">&quot;bindVars&quot;</span>: { 
........&gt;    <span class="hljs-string">&quot;one&quot;</span>: <span class="hljs-number">1</span>, 
........&gt;    <span class="hljs-string">&quot;two&quot;</span>: <span class="hljs-number">2</span> 
........&gt;  } 
........&gt; } );
[object ArangoStatement]
</pre>
</div>
</div>



<p><a name="counting_with_a_cursor"></a></p>
<h4 id="counting-with-a-cursor">Counting with a cursor</h4>
<p>Cursors also optionally provide the total number of results. By default, they do not. 
To make the server return the total number of results, you may set the <em>count</em> attribute to 
<em>true</em> when creating a statement:</p>
<div id="05_workWithAQL_statements9_container">
<div id="05_workWithAQL_statements9_long">
<pre>
arangosh&gt; stmt = db._createStatement( {
........&gt; <span class="hljs-string">&quot;query&quot;</span>: <span class="hljs-string">&quot;FOR i IN [ 1, 2, 3, 4 ] RETURN i&quot;</span>,
........&gt; <span class="hljs-string">&quot;count&quot;</span>: <span class="hljs-literal">true</span> } );
[object ArangoStatement]
</pre>
</div>
</div>



<p>After executing this query, you can use the <em>count</em> method of the cursor to get the 
number of total results from the result set:</p>
<div id="05_workWithAQL_statements10_container">
<div id="05_workWithAQL_statements10_long">
<pre>
arangosh&gt; <span class="hljs-keyword">var</span> c = stmt.execute();
arangosh&gt; c.count();
<span class="hljs-number">4</span>
</pre>
</div>
</div>



<p>Please note that the <em>count</em> method returns nothing if you did not specify the <em>count</em>
attribute when creating the query.</p>
<p>This is intentional so that the server may apply optimizations when executing the query and 
construct the result set incrementally. Incremental creation of the result sets
is no possible
if all of the results need to be shipped to the client anyway. Therefore, the client
has the choice to specify <em>count</em> and retrieve the total number of results for a query (and
disable potential incremental result set creation on the server), or to not retrieve the total
number of results and allow the server to apply optimizations.</p>
<p>Please note that at the moment the server will always create the full result set for each query so 
specifying or omitting the <em>count</em> attribute currently does not have any impact on query execution.
This may change in the future. Future versions of ArangoDB may create result sets incrementally 
on the server-side and may be able to apply optimizations if a result set is not fully fetched by 
a client.</p>
<p><a name="using_cursors_to_obtain_additional_information_on_internal_timings"></a></p>
<h4 id="using-cursors-to-obtain-additional-information-on-internal-timings">Using cursors to obtain additional information on internal timings</h4>
<p>Cursors can also optionally provide statistics of the internal execution phases. By default, they do not. 
To get to know how long parsing, otpimisation, instanciation and execution took,
make the server return that by setting the <em>profile</em> attribute to
<em>true</em> when creating a statement:</p>
<div id="06_workWithAQL_statements11_container">
<div id="06_workWithAQL_statements11_long">
<pre>
arangosh&gt; stmt = db._createStatement( {
........&gt; <span class="hljs-string">&quot;query&quot;</span>: <span class="hljs-string">&quot;FOR i IN [ 1, 2, 3, 4 ] RETURN i&quot;</span>,
........&gt; options: {<span class="hljs-string">&quot;profile&quot;</span>: <span class="hljs-literal">true</span>}} );
[object ArangoStatement]
</pre>
</div>
</div>



<p>After executing this query, you can use the <em>getExtra()</em> method of the cursor to get the 
produced statistics:</p>
<div id="06_workWithAQL_statements12_container">
<div id="06_workWithAQL_statements12_long" onclick="" style="Display: none;">
<pre>
arangosh&gt; <span class="hljs-keyword">var</span> c = stmt.execute();
arangosh&gt; c.getExtra();
{ 
  <span class="hljs-string">&quot;stats&quot;</span> : { 
    <span class="hljs-string">&quot;writesExecuted&quot;</span> : <span class="hljs-number">0</span>, 
    <span class="hljs-string">&quot;writesIgnored&quot;</span> : <span class="hljs-number">0</span>, 
    <span class="hljs-string">&quot;scannedFull&quot;</span> : <span class="hljs-number">0</span>, 
    <span class="hljs-string">&quot;scannedIndex&quot;</span> : <span class="hljs-number">0</span>, 
    <span class="hljs-string">&quot;filtered&quot;</span> : <span class="hljs-number">0</span>, 
    <span class="hljs-string">&quot;executionTime&quot;</span> : <span class="hljs-number">0.000052928924560546875</span> 
  }, 
  <span class="hljs-string">&quot;profile&quot;</span> : { 
    <span class="hljs-string">&quot;initializing&quot;</span> : <span class="hljs-number">9.5367431640625e-7</span>, 
    <span class="hljs-string">&quot;parsing&quot;</span> : <span class="hljs-number">0.000013113021850585938</span>, 
    <span class="hljs-string">&quot;optimizing ast&quot;</span> : <span class="hljs-number">0.00000286102294921875</span>, 
    <span class="hljs-string">&quot;instantiating plan&quot;</span> : <span class="hljs-number">0.000007152557373046875</span>, 
    <span class="hljs-string">&quot;optimizing plan&quot;</span> : <span class="hljs-number">0.000015020370483398438</span>, 
    <span class="hljs-string">&quot;executing&quot;</span> : <span class="hljs-number">0.00002002716064453125</span> 
  }, 
  <span class="hljs-string">&quot;warnings&quot;</span> : [ ] 
}
</pre>
</div>
<div id="06_workWithAQL_statements12_short" onclick="$(&apos;#06_workWithAQL_statements12_short&apos;).hide(); $(&apos;#06_workWithAQL_statements12_long&apos;).show();">
<pre>
arangosh&gt; <span class="hljs-keyword">var</span> c = stmt.execute();
arangosh&gt; c.getExtra();
</pre><div class="example_show_button">show execution results</div>
</div>
</div>




                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../Invocation/index.html" class="navigation navigation-prev " aria-label="Previous page: How to invoke AQL"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../Invocation/WithWebInterface.html" class="navigation navigation-next " aria-label="Next page: with the Web Interface"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../gitbook/app.js"></script>

    
    <script src="../gitbook/plugins/gitbook-plugin-toggle-chapters/toggle.js"></script>
    

    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/3.1.1/anchor.min.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-anchorjs/anchor-style.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-piwik/plugin.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"addcssjs":{"js":["styles/header.js"],"css":["styles/header.css"]},"add-header":{"BASE_PATH":"https://docs.arangodb.com/devel"},"piwik":{"URL":"www.arangodb.com/piwik/","siteId":12},"toggle-chapters":{},"anchorjs":{},"highlight":{},"fontsettings":{"theme":"white","family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        <!-- body:end -->
<script type="text/javascript">var _paq = _paq || [];_paq.push(['trackPageView']);_paq.push(['enableLinkTracking']);(function() {var u=(("https:" == document.location.protocol) ? "https" : "http") + "://www.arangodb.com/piwik/";_paq.push(['setTrackerUrl', u+'piwik.php']);_paq.push(['setSiteId', 12]);var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0]; g.type='text/javascript';g.defer=true; g.async=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);})();</script><noscript><p><img src="http://www.arangodb.com/piwik/piwik.php?idsite=12" style="border:0;" alt="" /></p></noscript>
    </body>
    <!-- End of book ArangoDB v3.0.x-devel (2016-06-02) AQL Documentation -->
</html>
