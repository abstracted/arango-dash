<!DOCTYPE HTML>
<html lang="en" >
    <!-- Start book ArangoDB v3.0.x-devel (2016-06-02) HTTP API Documentation -->
    <head>
        <!-- head:start -->
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Working with Documents | ArangoDB v3.0.x-devel (2016-06-02) HTTP API Documentation</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.6.7">
        <meta name="author" content="ArangoDB GmbH">
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="../gitbook/style.css">
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-toggle-chapters/toggle.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
    
        <link rel="stylesheet" href="../styles/website.css">
    

        
    
    
    <link rel="next" href="../Edge/index.html" />
    
    
    <link rel="prev" href="../Document/AddressAndEtag.html" />
    

        <!-- head:end -->
<script type="text/javascript" src="../styles/header.js"></script><link rel="stylesheet" type="text/css" href="../styles/header.css">
    </head>
    <body>
        <!-- body:start -->
<div id="header">
  <div id="logo">
    <a href="https://arangodb.com/">
      <img src="https://docs.arangodb.com/assets/arangodb_logo_2016.png">
    </a>
  </div>
  <div id="logo-small">
    <a href="https://arangodb.com/">
      <img src="https://docs.arangodb.com/assets/arangodb_logo_small_2016.png">
    </a>
  </div>
  <select id="version-switcher">
    <option value="devel">v3.0.x-devel (2016-06-02)</option>
    <option value="2.8">v2.8</option>
    <option value="2.7">v2.7</option>
    <option value="2.6">v2.6</option>
    <option value="2.5">v2.5</option>
    <option value="2.4">v2.4</option>
    <option value="2.3">v2.3</option>
    <option value="2.2">v2.2</option>
    <option value="2.1">v2.1</option>
  </select>
  <div class="google-search">
    <gcse:searchbox-only></gcse:searchbox-only>
  </div>
  <ul id="navmenu">
    <li>
      <a href="https://docs.arangodb.com/devel/Manual/index.html">Manual</a>
    </li>
    <li>
      <a href="https://docs.arangodb.com/devel/AQL/index.html">AQL</a>
    </li>
    <li class="active-tab">
      <a href="https://docs.arangodb.com/devel/HTTP/index.html">HTTP</a>
    </li>
    <li>
      <a href="https://docs.arangodb.com/cookbook">Cookbook</a>
    </li>
    <li class="socialIcons">
      <a href="https://github.com/ArangoDB/ArangoDB/issues" target="blank" name="github">
        <i title="GitHub" class="fa fa-github"></i>
      </a>
    </li>
    <li class="socialIcons">
      <a href="http://stackoverflow.com/questions/tagged/arangodb" target="blank" name="stackoverflow">
        <i title="Stackoverflow" class="fa fa-stack-overflow"></i>
      </a>
    </li>
    <li class="socialIcons socialIcons-googlegroups">
      <a href="https://groups.google.com/forum/#!forum/arangodb" target="blank" name="google groups">
        <img title="Google Groups" alt="Google Groups" src="https://docs.arangodb.com/assets/googlegroupsIcon.png" />
      </a>
    </li>
  </ul>
</div>
        
    <div class="book"
        data-level="5.2"
        data-chapter-title="Working with Documents"
        data-filepath="Document/WorkingWithDocuments.md"
        data-basepath=".."
        data-revision="Thu Jun 02 2016 11:44:44 GMT+0000 (UTC)"
        data-innerlanguage="">
    

<div class="book-summary">
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="General/index.html">
            
                
                    <a href="../General/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        General HTTP Handling
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2" data-path="Api/index.html">
            
                
                    <a href="../Api/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        HTTP Interface
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3" data-path="Database/index.html">
            
                
                    <a href="../Database/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        Databases
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1" data-path="Database/DatabaseEndpoint.html">
            
                
                    <a href="../Database/DatabaseEndpoint.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.</b>
                        
                        To-Endpoint
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="Database/DatabaseManagement.html">
            
                
                    <a href="../Database/DatabaseManagement.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.</b>
                        
                        Management
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="Database/NotesOnDatabases.html">
            
                
                    <a href="../Database/NotesOnDatabases.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.3.</b>
                        
                        Notes on Databases
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4" data-path="Collection/index.html">
            
                
                    <a href="../Collection/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        Collections
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1" data-path="Collection/Creating.html">
            
                
                    <a href="../Collection/Creating.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.1.</b>
                        
                        Creating
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="Collection/Getting.html">
            
                
                    <a href="../Collection/Getting.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.2.</b>
                        
                        Getting Information
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="Collection/Modifying.html">
            
                
                    <a href="../Collection/Modifying.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.3.</b>
                        
                        Modifying
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5" data-path="Document/index.html">
            
                
                    <a href="../Document/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                        Documents
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.1" data-path="Document/AddressAndEtag.html">
            
                
                    <a href="../Document/AddressAndEtag.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.1.</b>
                        
                        Basics and Terminology
                    </a>
            
            
        </li>
    
        <li class="chapter active" data-level="5.2" data-path="Document/WorkingWithDocuments.html">
            
                
                    <a href="../Document/WorkingWithDocuments.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.2.</b>
                        
                        Working with Documents
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6" data-path="Edge/index.html">
            
                
                    <a href="../Edge/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                        Edges
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1" data-path="Edge/AddressAndEtag.html">
            
                
                    <a href="../Edge/AddressAndEtag.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.1.</b>
                        
                        Address and ETag
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.2" data-path="Edge/WorkingWithEdges.html">
            
                
                    <a href="../Edge/WorkingWithEdges.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.2.</b>
                        
                        Working with Edges
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="7" data-path="Gharial/index.html">
            
                
                    <a href="../Gharial/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.</b>
                        
                        General Graph
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="7.1" data-path="Gharial/Management.html">
            
                
                    <a href="../Gharial/Management.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.1.</b>
                        
                        Management
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.2" data-path="Gharial/Vertices.html">
            
                
                    <a href="../Gharial/Vertices.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.2.</b>
                        
                        Vertices
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.3" data-path="Gharial/Edges.html">
            
                
                    <a href="../Gharial/Edges.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.3.</b>
                        
                        Edges
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="8" data-path="Traversal/index.html">
            
                
                    <a href="../Traversal/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.</b>
                        
                        Traversals
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9" data-path="AqlQueryCursor/index.html">
            
                
                    <a href="../AqlQueryCursor/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.</b>
                        
                        AQL Query Cursors
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="9.1" data-path="AqlQueryCursor/QueryResults.html">
            
                
                    <a href="../AqlQueryCursor/QueryResults.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.1.</b>
                        
                        Query Results
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9.2" data-path="AqlQueryCursor/AccessingCursors.html">
            
                
                    <a href="../AqlQueryCursor/AccessingCursors.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.2.</b>
                        
                        Accessing Cursors
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="10" data-path="AqlQuery/index.html">
            
                
                    <a href="../AqlQuery/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.</b>
                        
                        AQL Queries
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="11" data-path="AqlQueryCache/index.html">
            
                
                    <a href="../AqlQueryCache/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>11.</b>
                        
                        AQL Query Cache
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="12" data-path="AqlUserFunctions/index.html">
            
                
                    <a href="../AqlUserFunctions/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>12.</b>
                        
                        AQL User Functions Management
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="13" data-path="SimpleQuery/index.html">
            
                
                    <a href="../SimpleQuery/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>13.</b>
                        
                        Simple Queries
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="14" data-path="AsyncResultsManagement/index.html">
            
                
                    <a href="../AsyncResultsManagement/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>14.</b>
                        
                        Async Result Handling
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="15" data-path="BulkImports/index.html">
            
                
                    <a href="../BulkImports/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>15.</b>
                        
                        Bulk Import / Export
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="15.1" data-path="BulkImports/ImportingSelfContained.html">
            
                
                    <a href="../BulkImports/ImportingSelfContained.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>15.1.</b>
                        
                        JSON Documents
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="15.2" data-path="BulkImports/ImportingHeadersAndValues.html">
            
                
                    <a href="../BulkImports/ImportingHeadersAndValues.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>15.2.</b>
                        
                        Headers &amp; Values
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="15.3" data-path="BatchRequest/index.html">
            
                
                    <a href="../BatchRequest/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>15.3.</b>
                        
                        Batch Requests
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="15.4" data-path="Export/index.html">
            
                
                    <a href="../Export/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>15.4.</b>
                        
                        Exporting data
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="16" data-path="Indexes/index.html">
            
                
                    <a href="../Indexes/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>16.</b>
                        
                        Indexes
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="16.1" data-path="Indexes/WorkingWith.html">
            
                
                    <a href="../Indexes/WorkingWith.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>16.1.</b>
                        
                        Working with Indexes
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="16.2" data-path="Indexes/Hash.html">
            
                
                    <a href="../Indexes/Hash.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>16.2.</b>
                        
                        Hash
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="16.3" data-path="Indexes/Skiplist.html">
            
                
                    <a href="../Indexes/Skiplist.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>16.3.</b>
                        
                        Skiplist
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="16.4" data-path="Indexes/Geo.html">
            
                
                    <a href="../Indexes/Geo.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>16.4.</b>
                        
                        Geo
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="16.5" data-path="Indexes/Fulltext.html">
            
                
                    <a href="../Indexes/Fulltext.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>16.5.</b>
                        
                        Fulltext
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="17" data-path="Transaction/index.html">
            
                
                    <a href="../Transaction/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>17.</b>
                        
                        Transactions
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="18" data-path="Replications/index.html">
            
                
                    <a href="../Replications/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>18.</b>
                        
                        Replication
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="18.1" data-path="Replications/ReplicationDump.html">
            
                
                    <a href="../Replications/ReplicationDump.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>18.1.</b>
                        
                        Replication Dump
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="18.2" data-path="Replications/ReplicationLogger.html">
            
                
                    <a href="../Replications/ReplicationLogger.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>18.2.</b>
                        
                        Replication Logger
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="18.3" data-path="Replications/ReplicationApplier.html">
            
                
                    <a href="../Replications/ReplicationApplier.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>18.3.</b>
                        
                        Replication Applier
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="18.4" data-path="Replications/OtherReplication.html">
            
                
                    <a href="../Replications/OtherReplication.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>18.4.</b>
                        
                        Other Replication Commands
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="19" data-path="ShardingInterface/index.html">
            
                
                    <a href="../ShardingInterface/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>19.</b>
                        
                        Sharding
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="20" data-path="AdministrationAndMonitoring/index.html">
            
                
                    <a href="../AdministrationAndMonitoring/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>20.</b>
                        
                        Monitoring
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="21" data-path="Endpoints/index.html">
            
                
                    <a href="../Endpoints/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>21.</b>
                        
                        Endpoints
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="22" data-path="UserManagement/index.html">
            
                
                    <a href="../UserManagement/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>22.</b>
                        
                        User Management
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="23" data-path="Tasks/index.html">
            
                
                    <a href="../Tasks/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>23.</b>
                        
                        Tasks
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="24" data-path="MiscellaneousFunctions/index.html">
            
                
                    <a href="../MiscellaneousFunctions/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>24.</b>
                        
                        Miscellaneous functions
                    </a>
            
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Published with GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../" >ArangoDB v3.0.x-devel (2016-06-02) HTTP API Documentation</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <p><a name="working_with_documents_using_rest"></a></p>
<h1 id="working-with-documents-using-rest">Working with Documents using REST</h1>
<!-- arangod/RestHandler/RestDocumentHandler.cpp -->
<h3 id="read-document">Read document</h3>
<p> reads a single document</p>
<p><code>GET /_api/document/{document-handle}</code></p>
<p><strong>Path Parameters</strong></p>
<ul>
<li><em>document-handle</em> (required):
The handle of the document.</li>
</ul>
<p><strong>Header Parameters</strong></p>
<ul>
<li><em>If-None-Match</em> (optional):
If the &quot;If-None-Match&quot; header is given, then it must contain exactly one
ETag. The document is returned, if it has a different revision than the
given ETag. Otherwise an <em>HTTP 304</em> is returned.</li>
<li><em>If-Match</em> (optional):
If the &quot;If-Match&quot; header is given, then it must contain exactly one
ETag. The document is returned, if it has the same revision as the
given ETag. Otherwise a <em>HTTP 412</em> is returned.</li>
</ul>
<p>Returns the document identified by <em>document-handle</em>. The returned
document contains three special attributes: <em>_id</em> containing the document
handle, <em>_key</em> containing key which uniquely identifies a document
in a given collection and <em>_rev</em> containing the revision.</p>
<p><strong>Return Codes</strong></p>
<ul>
<li><em>200</em>:
is returned if the document was found</li>
<li><em>304</em>:
is returned if the &quot;If-None-Match&quot; header is given and the document has
the same version</li>
<li><em>404</em>:
is returned if the document or collection was not found</li>
<li><em>412</em>:
is returned if an &quot;If-Match&quot; header is given and the found
document has a different version. The response will also contain the found
document&apos;s current revision in the <em>_rev</em> attribute. Additionally, the
attributes <em>_id</em> and <em>_key</em> will be returned.</li>
</ul>
<p><strong>Examples</strong></p>
<p>Use a document handle:</p>
<div id="RestDocumentHandlerReadDocument_container">
<div id="RestDocumentHandlerReadDocument_long" onclick="" style="Display: none;">
<pre>
shell&gt; curl --dump - http://localhost:8529/_api/document/products/10327

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">200</span> OK
content-type: application/json; charset=utf<span class="hljs-number">-8</span>
etag: <span class="hljs-string">&quot;10327&quot;</span>

{ 
  <span class="hljs-string">&quot;_key&quot;</span> : <span class="hljs-string">&quot;10327&quot;</span>, 
  <span class="hljs-string">&quot;_id&quot;</span> : <span class="hljs-string">&quot;products/10327&quot;</span>, 
  <span class="hljs-string">&quot;_rev&quot;</span> : <span class="hljs-string">&quot;10327&quot;</span>, 
  <span class="hljs-string">&quot;hello&quot;</span> : <span class="hljs-string">&quot;world&quot;</span> 
}
</pre>
</div>
<div id="RestDocumentHandlerReadDocument_short" onclick="$(&apos;#RestDocumentHandlerReadDocument_short&apos;).hide(); $(&apos;#RestDocumentHandlerReadDocument_long&apos;).show();">
<pre>
shell&gt; curl --dump - http://localhost:8529/_api/document/products/10327

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">200</span> OK
content-type: application/json; charset=utf<span class="hljs-number">-8</span>
etag: <span class="hljs-string">&quot;10327&quot;</span>

</pre><div class="example_show_button">show response body</div>
</div>
</div>

<p>Use a document handle and an etag:</p>
<div id="RestDocumentHandlerReadDocumentIfNoneMatch_container">
<div id="RestDocumentHandlerReadDocumentIfNoneMatch_long">
<pre>
shell&gt; curl --header &apos;If-None-Match: &quot;10371&quot;&apos; --dump - http://localhost:8529/_api/document/products/10371

</pre>
</div>
</div>

<p>Unknown document handle:</p>
<div id="RestDocumentHandlerReadDocumentUnknownHandle_container">
<div id="RestDocumentHandlerReadDocumentUnknownHandle_long" onclick="" style="Display: none;">
<pre>
shell&gt; curl --dump - http://localhost:8529/_api/document/products/unknownhandle

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">404</span> Not Found
content-type: application/json; charset=utf<span class="hljs-number">-8</span>

{ 
  <span class="hljs-string">&quot;error&quot;</span> : <span class="hljs-literal">true</span>, 
  <span class="hljs-string">&quot;errorMessage&quot;</span> : <span class="hljs-string">&quot;collection &apos;products&apos; not found&quot;</span>, 
  <span class="hljs-string">&quot;code&quot;</span> : <span class="hljs-number">404</span>, 
  <span class="hljs-string">&quot;errorNum&quot;</span> : <span class="hljs-number">1203</span> 
}
</pre>
</div>
<div id="RestDocumentHandlerReadDocumentUnknownHandle_short" onclick="$(&apos;#RestDocumentHandlerReadDocumentUnknownHandle_short&apos;).hide(); $(&apos;#RestDocumentHandlerReadDocumentUnknownHandle_long&apos;).show();">
<pre>
shell&gt; curl --dump - http://localhost:8529/_api/document/products/unknownhandle

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">404</span> Not Found
content-type: application/json; charset=utf<span class="hljs-number">-8</span>

</pre><div class="example_show_button">show response body</div>
</div>
</div>

<p><a name="changes_in_3.0_from_2.8:"></a></p>
<h4 id="changes-in-30-from-28">Changes in 3.0 from 2.8:</h4>
<p>The <em>rev</em> query parameter has been withdrawn. The same effect can be
achieved with the <em>If-Match</em> HTTP header.</p>
<!-- arangod/RestHandler/RestDocumentHandler.cpp -->
<h3 id="read-document-header">Read document header</h3>
<p> reads a single document head</p>
<p><code>HEAD /_api/document/{document-handle}</code></p>
<p><strong>Path Parameters</strong></p>
<ul>
<li><em>document-handle</em> (required):
The handle of the document.</li>
</ul>
<p><strong>Header Parameters</strong></p>
<ul>
<li><em>If-None-Match</em> (optional):
If the &quot;If-None-Match&quot; header is given, then it must contain exactly one
ETag. If the current document revision is not equal to the specified ETag,
an <em>HTTP 200</em> response is returned. If the current document revision is
identical to the specified ETag, then an <em>HTTP 304</em> is returned.</li>
<li><em>If-Match</em> (optional):
If the &quot;If-Match&quot; header is given, then it must contain exactly one
ETag. The document is returned, if it has the same revision as the
given ETag. Otherwise a <em>HTTP 412</em> is returned.</li>
</ul>
<p>Like <em>GET</em>, but only returns the header fields and not the body. You
can use this call to get the current revision of a document or check if
the document was deleted.</p>
<p><strong>Return Codes</strong></p>
<ul>
<li><em>200</em>:
is returned if the document was found</li>
<li><em>304</em>:
is returned if the &quot;If-None-Match&quot; header is given and the document has
the same version</li>
<li><em>404</em>:
is returned if the document or collection was not found</li>
<li><em>412</em>:
is returned if an &quot;If-Match&quot; header is given and the found
document has a different version. The response will also contain the found
document&apos;s current revision in the <em>ETag</em> header.</li>
</ul>
<p><strong>Examples</strong></p>
<div id="RestDocumentHandlerReadDocumentHead_container">
<div id="RestDocumentHandlerReadDocumentHead_long">
<pre>
shell&gt; curl -X HEAD --dump - http://localhost:8529/_api/document/products/10363

</pre>
</div>
</div>

<p><a name="changes_in_3.0_from_2.8:"></a></p>
<h4 id="changes-in-30-from-28">Changes in 3.0 from 2.8:</h4>
<p>The <em>rev</em> query parameter has been withdrawn. The same effect can be
achieved with the <em>If-Match</em> HTTP header.</p>
<!-- arangod/RestHandler/RestDocumentHandler.cpp -->
<h3 id="read-all-documents">Read all documents</h3>
<p> reads all documents from collection</p>
<p><code>PUT /_api/simple/all-keys</code></p>
<p><strong>Query Parameters</strong></p>
<p><strong>Body Parameters</strong></p>
<ul>
<li><strong>type</strong>: The type of the result. The following values are allowed:<ul>
<li><em>id</em>: returns an array of document ids (<em>_id</em> attributes)</li>
<li><em>key</em>: returns an array of document keys (<em>_key</em> attributes)</li>
<li><em>path</em>: returns an array of document URI paths. This is the default.</li>
</ul>
</li>
<li><strong>collection</strong>: The name of the collection. This is only for backward compatibility.
In ArangoDB versions &lt; 3.0, the URL path was <em>/_api/document</em> and
this was passed in via the query parameter &quot;collection&quot;.
This combination was removed.</li>
</ul>
<div id="RestDocumentHandlerReadDocumentAllPath_container">
<div id="RestDocumentHandlerReadDocumentAllPath_long" onclick="" style="Display: none;">
<pre>
shell&gt; curl -X PUT --data-binary @- --dump - http://localhost:8529/_api/simple/all-keys &lt;&lt;EOF
{ 
  <span class="hljs-string">&quot;collection&quot;</span> : <span class="hljs-string">&quot;products&quot;</span> 
}
EOF

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">201</span> Created
content-type: application/json; charset=utf<span class="hljs-number">-8</span>

{ 
  <span class="hljs-string">&quot;result&quot;</span> : [ 
    <span class="hljs-string">&quot;/_db/_system/_api/document/products/10353&quot;</span>, 
    <span class="hljs-string">&quot;/_db/_system/_api/document/products/10349&quot;</span>, 
    <span class="hljs-string">&quot;/_db/_system/_api/document/products/10356&quot;</span> 
  ], 
  <span class="hljs-string">&quot;hasMore&quot;</span> : <span class="hljs-literal">false</span>, 
  <span class="hljs-string">&quot;cached&quot;</span> : <span class="hljs-literal">false</span>, 
  <span class="hljs-string">&quot;extra&quot;</span> : { 
    <span class="hljs-string">&quot;stats&quot;</span> : { 
      <span class="hljs-string">&quot;writesExecuted&quot;</span> : <span class="hljs-number">0</span>, 
      <span class="hljs-string">&quot;writesIgnored&quot;</span> : <span class="hljs-number">0</span>, 
      <span class="hljs-string">&quot;scannedFull&quot;</span> : <span class="hljs-number">3</span>, 
      <span class="hljs-string">&quot;scannedIndex&quot;</span> : <span class="hljs-number">0</span>, 
      <span class="hljs-string">&quot;filtered&quot;</span> : <span class="hljs-number">0</span>, 
      <span class="hljs-string">&quot;executionTime&quot;</span> : <span class="hljs-number">0.000102996826171875</span> 
    }, 
    <span class="hljs-string">&quot;warnings&quot;</span> : [ ] 
  }, 
  <span class="hljs-string">&quot;error&quot;</span> : <span class="hljs-literal">false</span>, 
  <span class="hljs-string">&quot;code&quot;</span> : <span class="hljs-number">201</span> 
}
</pre>
</div>
<div id="RestDocumentHandlerReadDocumentAllPath_short" onclick="$(&apos;#RestDocumentHandlerReadDocumentAllPath_short&apos;).hide(); $(&apos;#RestDocumentHandlerReadDocumentAllPath_long&apos;).show();">
<pre>
shell&gt; curl -X PUT --data-binary @- --dump - http://localhost:8529/_api/simple/all-keys &lt;&lt;EOF
{ 
  <span class="hljs-string">&quot;collection&quot;</span> : <span class="hljs-string">&quot;products&quot;</span> 
}
EOF

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">201</span> Created
content-type: application/json; charset=utf<span class="hljs-number">-8</span>

</pre><div class="example_show_button">show response body</div>
</div>
</div>

<p>Return all document keys</p>
<div id="RestDocumentHandlerReadDocumentAllKey_container">
<div id="RestDocumentHandlerReadDocumentAllKey_long" onclick="" style="Display: none;">
<pre>
shell&gt; curl -X PUT --data-binary @- --dump - http://localhost:8529/_api/simple/all-keys &lt;&lt;EOF
{ 
  <span class="hljs-string">&quot;collection&quot;</span> : <span class="hljs-string">&quot;products&quot;</span>, 
  <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;id&quot;</span> 
}
EOF

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">201</span> Created
content-type: application/json; charset=utf<span class="hljs-number">-8</span>

{ 
  <span class="hljs-string">&quot;result&quot;</span> : [ 
    <span class="hljs-string">&quot;products/10339&quot;</span>, 
    <span class="hljs-string">&quot;products/10342&quot;</span>, 
    <span class="hljs-string">&quot;products/10335&quot;</span> 
  ], 
  <span class="hljs-string">&quot;hasMore&quot;</span> : <span class="hljs-literal">false</span>, 
  <span class="hljs-string">&quot;cached&quot;</span> : <span class="hljs-literal">false</span>, 
  <span class="hljs-string">&quot;extra&quot;</span> : { 
    <span class="hljs-string">&quot;stats&quot;</span> : { 
      <span class="hljs-string">&quot;writesExecuted&quot;</span> : <span class="hljs-number">0</span>, 
      <span class="hljs-string">&quot;writesIgnored&quot;</span> : <span class="hljs-number">0</span>, 
      <span class="hljs-string">&quot;scannedFull&quot;</span> : <span class="hljs-number">3</span>, 
      <span class="hljs-string">&quot;scannedIndex&quot;</span> : <span class="hljs-number">0</span>, 
      <span class="hljs-string">&quot;filtered&quot;</span> : <span class="hljs-number">0</span>, 
      <span class="hljs-string">&quot;executionTime&quot;</span> : <span class="hljs-number">0.00015497207641601562</span> 
    }, 
    <span class="hljs-string">&quot;warnings&quot;</span> : [ ] 
  }, 
  <span class="hljs-string">&quot;error&quot;</span> : <span class="hljs-literal">false</span>, 
  <span class="hljs-string">&quot;code&quot;</span> : <span class="hljs-number">201</span> 
}
</pre>
</div>
<div id="RestDocumentHandlerReadDocumentAllKey_short" onclick="$(&apos;#RestDocumentHandlerReadDocumentAllKey_short&apos;).hide(); $(&apos;#RestDocumentHandlerReadDocumentAllKey_long&apos;).show();">
<pre>
shell&gt; curl -X PUT --data-binary @- --dump - http://localhost:8529/_api/simple/all-keys &lt;&lt;EOF
{ 
  <span class="hljs-string">&quot;collection&quot;</span> : <span class="hljs-string">&quot;products&quot;</span>, 
  <span class="hljs-string">&quot;type&quot;</span> : <span class="hljs-string">&quot;id&quot;</span> 
}
EOF

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">201</span> Created
content-type: application/json; charset=utf<span class="hljs-number">-8</span>

</pre><div class="example_show_button">show response body</div>
</div>
</div>

<p>Collection does not exist</p>
<div id="RestDocumentHandlerReadDocumentAllCollectionDoesNotExist_container">
<div id="RestDocumentHandlerReadDocumentAllCollectionDoesNotExist_long" onclick="" style="Display: none;">
<pre>
shell&gt; curl --dump - http://localhost:8529/_api/document/doesnotexist

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">404</span> Not Found
content-type: application/json; charset=utf<span class="hljs-number">-8</span>

{ 
  <span class="hljs-string">&quot;error&quot;</span> : <span class="hljs-literal">true</span>, 
  <span class="hljs-string">&quot;errorMessage&quot;</span> : <span class="hljs-string">&quot;expecting GET /_api/document/&lt;document-handle&gt;&quot;</span>, 
  <span class="hljs-string">&quot;code&quot;</span> : <span class="hljs-number">404</span>, 
  <span class="hljs-string">&quot;errorNum&quot;</span> : <span class="hljs-number">1203</span> 
}
</pre>
</div>
<div id="RestDocumentHandlerReadDocumentAllCollectionDoesNotExist_short" onclick="$(&apos;#RestDocumentHandlerReadDocumentAllCollectionDoesNotExist_short&apos;).hide(); $(&apos;#RestDocumentHandlerReadDocumentAllCollectionDoesNotExist_long&apos;).show();">
<pre>
shell&gt; curl --dump - http://localhost:8529/_api/document/doesnotexist

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">404</span> Not Found
content-type: application/json; charset=utf<span class="hljs-number">-8</span>

</pre><div class="example_show_button">show response body</div>
</div>
</div>

<p><a name="changes_in_3.0_from_2.8:"></a></p>
<h4 id="changes-in-30-from-28">Changes in 3.0 from 2.8:</h4>
<p>The collection name should now be specified in the URL path. The old
way with the URL path <em>/_api/document</em> and the required query parameter
<em>collection</em> still works.</p>
<!-- arangod/RestHandler/RestDocumentHandler.cpp -->
<h3 id="create-document">Create document</h3>
<p> creates documents</p>
<p><code>POST /_api/document/{collection}</code>
<strong>Post Body</strong>
 <em>data</em> (required):
A JSON representation of a single document or of an array of documents.</p>
<p><strong>Query Parameters</strong></p>
<ul>
<li><em>collection</em> (optional):
The name of the collection. This is only for backward compatibility.
In ArangoDB versions &lt; 3.0, the URL path was <em>/_api/document</em> and
this query parameter was required. This combination still works, but
the recommended way is to specify the collection in the URL path.</li>
<li><em>waitForSync</em> (optional):
Wait until document has been synced to disk.</li>
<li><em>returnNew</em> (optional):
Return additionally the complete new document under the attribute <em>new</em>
in the result.</li>
</ul>
<p>Creates a new document from the document given in the body, unless there
is already a document with the <em>_key</em> given. If no <em>_key</em> is given, a new
unique <em>_key</em> is generated automatically.
The body can be an array of documents, in which case all
documents in the array are inserted with the same semantics as for a
single document. The result body will contain a JSON array of the
same length as the input array, and each entry contains the result
of the operation for the corresponding input. In case of an error
the entry is a document with attributes <em>error</em> set to <em>true</em> and
errorCode set to the error code that has happened.
Possibly given <em>_id</em> and <em>_rev</em> attributes in the body are always ignored,
the URL part or the query parameter collection respectively counts.
If the document was created successfully, then the <em>Location</em> header
contains the path to the newly created document. The <em>ETag</em> header field
contains the revision of the document. Both are only set in the single
document case.
The body of the response contains a JSON object (single document case)
with the following attributes:</p>
<ul>
<li><em>_id</em> contains the document handle of the newly created document</li>
<li><em>_key</em> contains the document key</li>
<li><em>_rev</em> contains the document revision
In the multi case the body is an array of such objects.
If the collection parameter <em>waitForSync</em> is <em>false</em>, then the call
returns as soon as the document has been accepted. It will not wait
until the documents have been synced to disk.
Optionally, the query parameter <em>waitForSync</em> can be used to force
synchronization of the document creation operation to disk even in
case that the <em>waitForSync</em> flag had been disabled for the entire
collection. Thus, the <em>waitForSync</em> query parameter can be used to
force synchronization of just this specific operations. To use this,
set the <em>waitForSync</em> parameter to <em>true</em>. If the <em>waitForSync</em>
parameter is not specified or set to <em>false</em>, then the collection&apos;s
default <em>waitForSync</em> behavior is applied. The <em>waitForSync</em> query
parameter cannot be used to disable synchronization for collections
that have a default <em>waitForSync</em> value of <em>true</em>.
If the query parameter <em>returnNew</em> is <em>true</em>, then, for each
generated document, the complete new document is returned under
the <em>new</em> attribute in the result.</li>
</ul>
<p><strong>Return Codes</strong></p>
<ul>
<li><em>201</em>:
is returned if the documents were created successfully and
<em>waitForSync</em> was <em>true</em>.</li>
<li><em>202</em>:
is returned if the documents were created successfully and
<em>waitForSync</em> was <em>false</em>.</li>
<li><em>400</em>:
is returned if the body does not contain a valid JSON representation
of one document or an array of documents. The response body contains
an error document in this case.</li>
<li><em>404</em>:
is returned if the collection specified by <em>collection</em> is unknown.
The response body contains an error document in this case.</li>
<li><em>409</em>:
is returned in the single document case if a document with the
same qualifiers in an indexed attribute conflicts with an already
existing document and thus violates that unique constraint. The
response body contains an error document in this case. In the array
case only 201 or 202 is returned, but if an error occurred, the
additional HTTP header <em>X-Arango-Error-Codes</em> is set, which
contains a map of the error codes that occurred together with their
multiplicities, as in: <em>1205:10,1210:17</em> which means that in 10
cases the error 1205 &quot;illegal document handle&quot; and in 17 cases the
error 1210 &quot;unique constraint violated&quot; has happened.</li>
</ul>
<p><strong>Examples</strong></p>
<p>Create a document in a collection named <em>products</em>. Note that the
revision identifier might or might not by equal to the auto-generated
key.</p>
<div id="RestDocumentHandlerPostCreate1_container">
<div id="RestDocumentHandlerPostCreate1_long" onclick="" style="Display: none;">
<pre>
shell&gt; curl -X POST --data-binary @- --dump - http://localhost:8529/_api/document/products &lt;&lt;EOF
{ &quot;Hello&quot;: &quot;World&quot; }
EOF

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">201</span> Created
content-type: application/json; charset=utf<span class="hljs-number">-8</span>
etag: <span class="hljs-string">&quot;10293&quot;</span>
location: <span class="hljs-regexp">/_db/</span>_system/_api/<span class="hljs-built_in">document</span>/products/<span class="hljs-number">10293</span>

{ 
  <span class="hljs-string">&quot;_id&quot;</span> : <span class="hljs-string">&quot;products/10293&quot;</span>, 
  <span class="hljs-string">&quot;_key&quot;</span> : <span class="hljs-string">&quot;10293&quot;</span>, 
  <span class="hljs-string">&quot;_rev&quot;</span> : <span class="hljs-string">&quot;10293&quot;</span> 
}
</pre>
</div>
<div id="RestDocumentHandlerPostCreate1_short" onclick="$(&apos;#RestDocumentHandlerPostCreate1_short&apos;).hide(); $(&apos;#RestDocumentHandlerPostCreate1_long&apos;).show();">
<pre>
shell&gt; curl -X POST --data-binary @- --dump - http://localhost:8529/_api/document/products &lt;&lt;EOF
{ &quot;Hello&quot;: &quot;World&quot; }
EOF

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">201</span> Created
content-type: application/json; charset=utf<span class="hljs-number">-8</span>
etag: <span class="hljs-string">&quot;10293&quot;</span>
location: <span class="hljs-regexp">/_db/</span>_system/_api/<span class="hljs-built_in">document</span>/products/<span class="hljs-number">10293</span>

</pre><div class="example_show_button">show response body</div>
</div>
</div>

<p>Create a document in a collection named <em>products</em> with a collection-level
<em>waitForSync</em> value of <em>false</em>.</p>
<div id="RestDocumentHandlerPostAccept1_container">
<div id="RestDocumentHandlerPostAccept1_long" onclick="" style="Display: none;">
<pre>
shell&gt; curl -X POST --data-binary @- --dump - http://localhost:8529/_api/document/products &lt;&lt;EOF
{ &quot;Hello&quot;: &quot;World&quot; }
EOF

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">202</span> Accepted
content-type: application/json; charset=utf<span class="hljs-number">-8</span>
etag: <span class="hljs-string">&quot;10283&quot;</span>
location: <span class="hljs-regexp">/_db/</span>_system/_api/<span class="hljs-built_in">document</span>/products/<span class="hljs-number">10283</span>

{ 
  <span class="hljs-string">&quot;_id&quot;</span> : <span class="hljs-string">&quot;products/10283&quot;</span>, 
  <span class="hljs-string">&quot;_key&quot;</span> : <span class="hljs-string">&quot;10283&quot;</span>, 
  <span class="hljs-string">&quot;_rev&quot;</span> : <span class="hljs-string">&quot;10283&quot;</span> 
}
</pre>
</div>
<div id="RestDocumentHandlerPostAccept1_short" onclick="$(&apos;#RestDocumentHandlerPostAccept1_short&apos;).hide(); $(&apos;#RestDocumentHandlerPostAccept1_long&apos;).show();">
<pre>
shell&gt; curl -X POST --data-binary @- --dump - http://localhost:8529/_api/document/products &lt;&lt;EOF
{ &quot;Hello&quot;: &quot;World&quot; }
EOF

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">202</span> Accepted
content-type: application/json; charset=utf<span class="hljs-number">-8</span>
etag: <span class="hljs-string">&quot;10283&quot;</span>
location: <span class="hljs-regexp">/_db/</span>_system/_api/<span class="hljs-built_in">document</span>/products/<span class="hljs-number">10283</span>

</pre><div class="example_show_button">show response body</div>
</div>
</div>

<p>Create a document in a collection with a collection-level <em>waitForSync</em>
value of <em>false</em>, but using the <em>waitForSync</em> query parameter.</p>
<div id="RestDocumentHandlerPostWait1_container">
<div id="RestDocumentHandlerPostWait1_long" onclick="" style="Display: none;">
<pre>
shell&gt; curl -X POST --data-binary @- --dump - http://localhost:8529/_api/document/products?waitForSync=true &lt;&lt;EOF
{ &quot;Hello&quot;: &quot;World&quot; }
EOF

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">201</span> Created
content-type: application/json; charset=utf<span class="hljs-number">-8</span>
etag: <span class="hljs-string">&quot;10320&quot;</span>
location: <span class="hljs-regexp">/_db/</span>_system/_api/<span class="hljs-built_in">document</span>/products/<span class="hljs-number">10320</span>

{ 
  <span class="hljs-string">&quot;_id&quot;</span> : <span class="hljs-string">&quot;products/10320&quot;</span>, 
  <span class="hljs-string">&quot;_key&quot;</span> : <span class="hljs-string">&quot;10320&quot;</span>, 
  <span class="hljs-string">&quot;_rev&quot;</span> : <span class="hljs-string">&quot;10320&quot;</span> 
}
</pre>
</div>
<div id="RestDocumentHandlerPostWait1_short" onclick="$(&apos;#RestDocumentHandlerPostWait1_short&apos;).hide(); $(&apos;#RestDocumentHandlerPostWait1_long&apos;).show();">
<pre>
shell&gt; curl -X POST --data-binary @- --dump - http://localhost:8529/_api/document/products?waitForSync=true &lt;&lt;EOF
{ &quot;Hello&quot;: &quot;World&quot; }
EOF

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">201</span> Created
content-type: application/json; charset=utf<span class="hljs-number">-8</span>
etag: <span class="hljs-string">&quot;10320&quot;</span>
location: <span class="hljs-regexp">/_db/</span>_system/_api/<span class="hljs-built_in">document</span>/products/<span class="hljs-number">10320</span>

</pre><div class="example_show_button">show response body</div>
</div>
</div>

<p>Unknown collection name</p>
<div id="RestDocumentHandlerPostUnknownCollection1_container">
<div id="RestDocumentHandlerPostUnknownCollection1_long" onclick="" style="Display: none;">
<pre>
shell&gt; curl -X POST --data-binary @- --dump - http://localhost:8529/_api/document/products &lt;&lt;EOF
{ &quot;Hello&quot;: &quot;World&quot; }
EOF

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">404</span> Not Found
content-type: application/json; charset=utf<span class="hljs-number">-8</span>

{ 
  <span class="hljs-string">&quot;error&quot;</span> : <span class="hljs-literal">true</span>, 
  <span class="hljs-string">&quot;errorMessage&quot;</span> : <span class="hljs-string">&quot;collection &apos;products&apos; not found&quot;</span>, 
  <span class="hljs-string">&quot;code&quot;</span> : <span class="hljs-number">404</span>, 
  <span class="hljs-string">&quot;errorNum&quot;</span> : <span class="hljs-number">1203</span> 
}
</pre>
</div>
<div id="RestDocumentHandlerPostUnknownCollection1_short" onclick="$(&apos;#RestDocumentHandlerPostUnknownCollection1_short&apos;).hide(); $(&apos;#RestDocumentHandlerPostUnknownCollection1_long&apos;).show();">
<pre>
shell&gt; curl -X POST --data-binary @- --dump - http://localhost:8529/_api/document/products &lt;&lt;EOF
{ &quot;Hello&quot;: &quot;World&quot; }
EOF

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">404</span> Not Found
content-type: application/json; charset=utf<span class="hljs-number">-8</span>

</pre><div class="example_show_button">show response body</div>
</div>
</div>

<p>Illegal document</p>
<div id="RestDocumentHandlerPostBadJson1_container">
<div id="RestDocumentHandlerPostBadJson1_long" onclick="" style="Display: none;">
<pre>
shell&gt; curl -X POST --data-binary @- --dump - http://localhost:8529/_api/document/products &lt;&lt;EOF
{ 1: &quot;World&quot; }
EOF

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">400</span> Bad Request
content-type: application/json; charset=utf<span class="hljs-number">-8</span>

{ 
  <span class="hljs-string">&quot;error&quot;</span> : <span class="hljs-literal">true</span>, 
  <span class="hljs-string">&quot;errorMessage&quot;</span> : <span class="hljs-string">&quot;Parse error: Expecting &apos;\&quot;&apos; or &apos;}&apos;&quot;</span>, 
  <span class="hljs-string">&quot;code&quot;</span> : <span class="hljs-number">400</span>, 
  <span class="hljs-string">&quot;errorNum&quot;</span> : <span class="hljs-number">600</span> 
}
</pre>
</div>
<div id="RestDocumentHandlerPostBadJson1_short" onclick="$(&apos;#RestDocumentHandlerPostBadJson1_short&apos;).hide(); $(&apos;#RestDocumentHandlerPostBadJson1_long&apos;).show();">
<pre>
shell&gt; curl -X POST --data-binary @- --dump - http://localhost:8529/_api/document/products &lt;&lt;EOF
{ 1: &quot;World&quot; }
EOF

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">400</span> Bad Request
content-type: application/json; charset=utf<span class="hljs-number">-8</span>

</pre><div class="example_show_button">show response body</div>
</div>
</div>

<p>Insert multiple documents:</p>
<div id="RestDocumentHandlerPostMulti1_container">
<div id="RestDocumentHandlerPostMulti1_long">
<pre>
shell&gt; curl -X POST --data-binary @- --dump - http://localhost:8529/_api/document/products &lt;&lt;EOF
[{&quot;Hello&quot;:&quot;Earth&quot;}, {&quot;Hello&quot;:&quot;Venus&quot;}, {&quot;Hello&quot;:&quot;Mars&quot;}]
EOF

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">202</span> Accepted
content-type: application/json; charset=utf<span class="hljs-number">-8</span>

[ 
  { 
    <span class="hljs-string">&quot;_id&quot;</span> : <span class="hljs-string">&quot;products/10300&quot;</span>, 
    <span class="hljs-string">&quot;_key&quot;</span> : <span class="hljs-string">&quot;10300&quot;</span>, 
    <span class="hljs-string">&quot;_rev&quot;</span> : <span class="hljs-string">&quot;10300&quot;</span> 
  }, 
  { 
    <span class="hljs-string">&quot;_id&quot;</span> : <span class="hljs-string">&quot;products/10304&quot;</span>, 
    <span class="hljs-string">&quot;_key&quot;</span> : <span class="hljs-string">&quot;10304&quot;</span>, 
    <span class="hljs-string">&quot;_rev&quot;</span> : <span class="hljs-string">&quot;10304&quot;</span> 
  }, 
  { 
    <span class="hljs-string">&quot;_id&quot;</span> : <span class="hljs-string">&quot;products/10306&quot;</span>, 
    <span class="hljs-string">&quot;_key&quot;</span> : <span class="hljs-string">&quot;10306&quot;</span>, 
    <span class="hljs-string">&quot;_rev&quot;</span> : <span class="hljs-string">&quot;10306&quot;</span> 
  } 
]
</pre>
</div>
</div>

<p>Use of returnNew:</p>
<div id="RestDocumentHandlerPostMulti2_container">
<div id="RestDocumentHandlerPostMulti2_long" onclick="" style="Display: none;">
<pre>
shell&gt; curl -X POST --data-binary @- --dump - http://localhost:8529/_api/document/products?returnNew=true &lt;&lt;EOF
{&quot;Hello&quot;:&quot;World&quot;}
EOF

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">202</span> Accepted
content-type: application/json; charset=utf<span class="hljs-number">-8</span>
etag: <span class="hljs-string">&quot;10313&quot;</span>
location: <span class="hljs-regexp">/_db/</span>_system/_api/<span class="hljs-built_in">document</span>/products/<span class="hljs-number">10313</span>

{ 
  <span class="hljs-string">&quot;_id&quot;</span> : <span class="hljs-string">&quot;products/10313&quot;</span>, 
  <span class="hljs-string">&quot;_key&quot;</span> : <span class="hljs-string">&quot;10313&quot;</span>, 
  <span class="hljs-string">&quot;_rev&quot;</span> : <span class="hljs-string">&quot;10313&quot;</span>, 
  <span class="hljs-string">&quot;new&quot;</span> : { 
    <span class="hljs-string">&quot;_key&quot;</span> : <span class="hljs-string">&quot;10313&quot;</span>, 
    <span class="hljs-string">&quot;_id&quot;</span> : <span class="hljs-string">&quot;products/10313&quot;</span>, 
    <span class="hljs-string">&quot;_rev&quot;</span> : <span class="hljs-string">&quot;10313&quot;</span>, 
    <span class="hljs-string">&quot;Hello&quot;</span> : <span class="hljs-string">&quot;World&quot;</span> 
  } 
}
</pre>
</div>
<div id="RestDocumentHandlerPostMulti2_short" onclick="$(&apos;#RestDocumentHandlerPostMulti2_short&apos;).hide(); $(&apos;#RestDocumentHandlerPostMulti2_long&apos;).show();">
<pre>
shell&gt; curl -X POST --data-binary @- --dump - http://localhost:8529/_api/document/products?returnNew=true &lt;&lt;EOF
{&quot;Hello&quot;:&quot;World&quot;}
EOF

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">202</span> Accepted
content-type: application/json; charset=utf<span class="hljs-number">-8</span>
etag: <span class="hljs-string">&quot;10313&quot;</span>
location: <span class="hljs-regexp">/_db/</span>_system/_api/<span class="hljs-built_in">document</span>/products/<span class="hljs-number">10313</span>

</pre><div class="example_show_button">show response body</div>
</div>
</div>

<p><a name="changes_in_3.0_from_2.8:"></a></p>
<h4 id="changes-in-30-from-28">Changes in 3.0 from 2.8:</h4>
<p>The collection name should now be specified in the URL path. The old
way with the URL path <em>/_api/document</em> and the required query parameter
<em>collection</em> still works. The possibility to insert multiple documents
with one operation is new and the query parameter <em>returnNew</em> has been added.</p>
<!-- arangod/RestHandler/RestDocumentHandler.cpp -->
<h3 id="replace-document">Replace document</h3>
<p> replaces a document</p>
<p><code>PUT /_api/document/{document-handle}</code>
<strong>Post Body</strong>
 <em>document</em> (required):
A JSON representation of a single document.</p>
<p><strong>Path Parameters</strong></p>
<ul>
<li><em>document-handle</em> (required):
This URL parameter must be a document handle.</li>
</ul>
<p><strong>Query Parameters</strong></p>
<ul>
<li><em>waitForSync</em> (optional):
Wait until document has been synced to disk.</li>
<li><em>ignoreRevs</em> (optional):
By default, or if this is set to <em>true</em>, the <em>_rev</em> attributes in 
the given document is ignored. If this is set to <em>false</em>, then
the <em>_rev</em> attribute given in the body document is taken as a
precondition. The document is only replaced if the current revision
is the one specified.</li>
<li><em>returnOld</em> (optional):
Return additionally the complete previous revision of the changed 
document under the attribute <em>old</em> in the result.</li>
<li><em>returnNew</em> (optional):
Return additionally the complete new document under the attribute <em>new</em>
in the result.</li>
</ul>
<p><strong>Header Parameters</strong></p>
<ul>
<li><em>If-Match</em> (optional):
You can conditionally replace a document based on a target revision id by
using the <em>if-match</em> HTTP header.</li>
</ul>
<p>Replaces the document with handle <document-handle> with the one in
the body, provided there is such a document and no precondition is
violated.
If the <em>If-Match</em> header is specified and the revision of the
document in the database is unequal to the given revision, the
precondition is violated.
If <em>If-Match</em> is not given and <em>ignoreRevs</em> is <em>false</em> and there
is a <em>_rev</em> attribute in the body and its value does not match
the revision of the document in the database, the precondition is
violated.
If a precondition is violated, an <em>HTTP 412</em> is returned.
If the document exists and can be updated, then an <em>HTTP 201</em> or
an <em>HTTP 202</em> is returned (depending on <em>waitForSync</em>, see below),
the <em>ETag</em> header field contains the new revision of the document
and the <em>Location</em> header contains a complete URL under which the
document can be queried.
Optionally, the query parameter <em>waitForSync</em> can be used to force
synchronization of the document replacement operation to disk even in case
that the <em>waitForSync</em> flag had been disabled for the entire collection.
Thus, the <em>waitForSync</em> query parameter can be used to force synchronization
of just specific operations. To use this, set the <em>waitForSync</em> parameter
to <em>true</em>. If the <em>waitForSync</em> parameter is not specified or set to
<em>false</em>, then the collection&apos;s default <em>waitForSync</em> behavior is
applied. The <em>waitForSync</em> query parameter cannot be used to disable
synchronization for collections that have a default <em>waitForSync</em> value
of <em>true</em>.
The body of the response contains a JSON object with the information
about the handle and the revision. The attribute <em>_id</em> contains the
known <em>document-handle</em> of the updated document, <em>_key</em> contains the
key which uniquely identifies a document in a given collection, and
the attribute <em>_rev</em> contains the new document revision.
If the query parameter <em>returnOld</em> is <em>true</em>, then
the complete previous revision of the document
is returned under the <em>old</em> attribute in the result.
If the query parameter <em>returnNew</em> is <em>true</em>, then
the complete new document is returned under
the <em>new</em> attribute in the result.
If the document does not exist, then a <em>HTTP 404</em> is returned and the
body of the response contains an error document.</document-handle></p>
<p><strong>Return Codes</strong></p>
<ul>
<li><em>201</em>:
is returned if the document was replaced successfully and
<em>waitForSync</em> was <em>true</em>.</li>
<li><em>202</em>:
is returned if the document was replaced successfully and
<em>waitForSync</em> was <em>false</em>.</li>
<li><em>400</em>:
is returned if the body does not contain a valid JSON representation
of a document. The response body contains
an error document in this case.</li>
<li><em>404</em>:
is returned if the collection or the document was not found.</li>
<li><em>412</em>:
is returned if the precondition was violated. The response will
also contain the found documents&apos; current revisions in the <em>_rev</em>
attributes. Additionally, the attributes <em>_id</em> and <em>_key</em> will be
returned.</li>
</ul>
<p><strong>Examples</strong></p>
<p>Using a document handle</p>
<div id="RestDocumentHandlerUpdateDocument_container">
<div id="RestDocumentHandlerUpdateDocument_long" onclick="" style="Display: none;">
<pre>
shell&gt; curl -X PUT --data-binary @- --dump - http://localhost:8529/_api/document/products/10379 &lt;&lt;EOF
{&quot;Hello&quot;: &quot;you&quot;}
EOF

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">202</span> Accepted
content-type: application/json; charset=utf<span class="hljs-number">-8</span>
etag: <span class="hljs-string">&quot;10383&quot;</span>
location: <span class="hljs-regexp">/_db/</span>_system/_api/<span class="hljs-built_in">document</span>/products/<span class="hljs-number">10379</span>

{ 
  <span class="hljs-string">&quot;_id&quot;</span> : <span class="hljs-string">&quot;products/10379&quot;</span>, 
  <span class="hljs-string">&quot;_key&quot;</span> : <span class="hljs-string">&quot;10379&quot;</span>, 
  <span class="hljs-string">&quot;_rev&quot;</span> : <span class="hljs-string">&quot;10383&quot;</span>, 
  <span class="hljs-string">&quot;_oldRev&quot;</span> : <span class="hljs-string">&quot;10379&quot;</span> 
}
</pre>
</div>
<div id="RestDocumentHandlerUpdateDocument_short" onclick="$(&apos;#RestDocumentHandlerUpdateDocument_short&apos;).hide(); $(&apos;#RestDocumentHandlerUpdateDocument_long&apos;).show();">
<pre>
shell&gt; curl -X PUT --data-binary @- --dump - http://localhost:8529/_api/document/products/10379 &lt;&lt;EOF
{&quot;Hello&quot;: &quot;you&quot;}
EOF

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">202</span> Accepted
content-type: application/json; charset=utf<span class="hljs-number">-8</span>
etag: <span class="hljs-string">&quot;10383&quot;</span>
location: <span class="hljs-regexp">/_db/</span>_system/_api/<span class="hljs-built_in">document</span>/products/<span class="hljs-number">10379</span>

</pre><div class="example_show_button">show response body</div>
</div>
</div>

<p>Unknown document handle</p>
<div id="RestDocumentHandlerUpdateDocumentUnknownHandle_container">
<div id="RestDocumentHandlerUpdateDocumentUnknownHandle_long" onclick="" style="Display: none;">
<pre>
shell&gt; curl -X PUT --data-binary @- --dump - http://localhost:8529/_api/document/products/10401 &lt;&lt;EOF
{}
EOF

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">404</span> Not Found
content-type: application/json; charset=utf<span class="hljs-number">-8</span>

{ 
  <span class="hljs-string">&quot;error&quot;</span> : <span class="hljs-literal">true</span>, 
  <span class="hljs-string">&quot;errorMessage&quot;</span> : <span class="hljs-string">&quot;document not found&quot;</span>, 
  <span class="hljs-string">&quot;code&quot;</span> : <span class="hljs-number">404</span>, 
  <span class="hljs-string">&quot;errorNum&quot;</span> : <span class="hljs-number">1202</span> 
}
</pre>
</div>
<div id="RestDocumentHandlerUpdateDocumentUnknownHandle_short" onclick="$(&apos;#RestDocumentHandlerUpdateDocumentUnknownHandle_short&apos;).hide(); $(&apos;#RestDocumentHandlerUpdateDocumentUnknownHandle_long&apos;).show();">
<pre>
shell&gt; curl -X PUT --data-binary @- --dump - http://localhost:8529/_api/document/products/10401 &lt;&lt;EOF
{}
EOF

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">404</span> Not Found
content-type: application/json; charset=utf<span class="hljs-number">-8</span>

</pre><div class="example_show_button">show response body</div>
</div>
</div>

<p>Produce a revision conflict</p>
<div id="RestDocumentHandlerUpdateDocumentIfMatchOther_container">
<div id="RestDocumentHandlerUpdateDocumentIfMatchOther_long" onclick="" style="Display: none;">
<pre>
shell&gt; curl -X PUT --header &apos;If-Match: &quot;10393&quot;&apos; --data-binary @- --dump - http://localhost:8529/_api/document/products/10389 &lt;&lt;EOF
{&quot;other&quot;:&quot;content&quot;}
EOF

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">412</span> Precondition Failed
content-type: application/json; charset=utf<span class="hljs-number">-8</span>
etag: <span class="hljs-string">&quot;10389&quot;</span>

{ 
  <span class="hljs-string">&quot;error&quot;</span> : <span class="hljs-literal">true</span>, 
  <span class="hljs-string">&quot;code&quot;</span> : <span class="hljs-number">412</span>, 
  <span class="hljs-string">&quot;errorNum&quot;</span> : <span class="hljs-number">1200</span>, 
  <span class="hljs-string">&quot;errorMessage&quot;</span> : <span class="hljs-string">&quot;precondition failed&quot;</span>, 
  <span class="hljs-string">&quot;_id&quot;</span> : <span class="hljs-string">&quot;products/10389&quot;</span>, 
  <span class="hljs-string">&quot;_key&quot;</span> : <span class="hljs-string">&quot;10389&quot;</span>, 
  <span class="hljs-string">&quot;_rev&quot;</span> : <span class="hljs-string">&quot;10389&quot;</span> 
}
</pre>
</div>
<div id="RestDocumentHandlerUpdateDocumentIfMatchOther_short" onclick="$(&apos;#RestDocumentHandlerUpdateDocumentIfMatchOther_short&apos;).hide(); $(&apos;#RestDocumentHandlerUpdateDocumentIfMatchOther_long&apos;).show();">
<pre>
shell&gt; curl -X PUT --header &apos;If-Match: &quot;10393&quot;&apos; --data-binary @- --dump - http://localhost:8529/_api/document/products/10389 &lt;&lt;EOF
{&quot;other&quot;:&quot;content&quot;}
EOF

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">412</span> Precondition Failed
content-type: application/json; charset=utf<span class="hljs-number">-8</span>
etag: <span class="hljs-string">&quot;10389&quot;</span>

</pre><div class="example_show_button">show response body</div>
</div>
</div>

<p><a name="changes_in_3.0_from_2.8:"></a></p>
<h4 id="changes-in-30-from-28">Changes in 3.0 from 2.8:</h4>
<p>There are quite some changes in this in comparison to Version 2.8, but
few break existing usage:</p>
<ul>
<li>the <em>rev</em> query parameter is gone (was duplication of If-Match)</li>
<li>the <em>policy</em> query parameter is gone (was non-sensical)</li>
<li>the <em>ignoreRevs</em> query parameter is new, the default <em>true</em> gives 
the traditional behaviour as in 2.8</li>
<li>the <em>returnNew</em> and <em>returnOld</em> query parameters are new</li>
</ul>
<p>There should be very few changes to behaviour happening in real-world
situations or drivers. Essentially, one has to replace usage of the
<em>rev</em> query parameter by usage of the <em>If-Match</em> header. The non-sensical
combination of <em>If-Match</em> given and <em>policy=last</em> no longer works, but can
easily be achieved by leaving out the <em>If-Match</em> header.</p>
<p>The collection name should now be specified in the URL path. The old
way with the URL path <em>/_api/document</em> and the required query parameter
<em>collection</em> still works.</p>
<!-- arangod/RestHandler/RestDocumentHandler.cpp -->
<h3 id="replace-documents">Replace documents</h3>
<p> replaces multiple documents</p>
<p><code>PUT /_api/document/{collection}</code>
<strong>Post Body</strong>
 <em>documents</em> (required):
A JSON representation of an array of documents.</p>
<p><strong>Path Parameters</strong></p>
<ul>
<li><em>collection</em> (required):
This URL parameter is the name of the collection in which the
documents are replaced.</li>
</ul>
<p><strong>Query Parameters</strong></p>
<ul>
<li><em>waitForSync</em> (optional):
Wait until the new documents have been synced to disk.</li>
<li><em>ignoreRevs</em> (optional):
By default, or if this is set to <em>true</em>, the <em>_rev</em> attributes in 
the given documents are ignored. If this is set to <em>false</em>, then
any <em>_rev</em> attribute given in a body document is taken as a
precondition. The document is only replaced if the current revision
is the one specified.</li>
<li><em>returnOld</em> (optional):
Return additionally the complete previous revision of the changed 
documents under the attribute <em>old</em> in the result.</li>
<li><em>returnNew</em> (optional):
Return additionally the complete new documents under the attribute <em>new</em>
in the result.</li>
</ul>
<p>Replaces multiple documents in the specified collection with the
ones in the body, the replaced documents are specified by the <em>_key</em>
attributes in the body documents.
If <em>ignoreRevs</em> is <em>false</em> and there is a <em>_rev</em> attribute in a
document in the body and its value does not match the revision of
the corresponding document in the database, the precondition is
violated.
If the document exists and can be updated, then an <em>HTTP 201</em> or
an <em>HTTP 202</em> is returned (depending on <em>waitForSync</em>, see below).
Optionally, the query parameter <em>waitForSync</em> can be used to force
synchronization of the document replacement operation to disk even in case
that the <em>waitForSync</em> flag had been disabled for the entire collection.
Thus, the <em>waitForSync</em> query parameter can be used to force synchronization
of just specific operations. To use this, set the <em>waitForSync</em> parameter
to <em>true</em>. If the <em>waitForSync</em> parameter is not specified or set to
<em>false</em>, then the collection&apos;s default <em>waitForSync</em> behavior is
applied. The <em>waitForSync</em> query parameter cannot be used to disable
synchronization for collections that have a default <em>waitForSync</em> value
of <em>true</em>.
The body of the response contains a JSON array of the same length
as the input array with the information about the handle and the
revision of the replaced documents. In each entry, the attribute
<em>_id</em> contains the known <em>document-handle</em> of each updated document,
<em>_key</em> contains the key which uniquely identifies a document in a
given collection, and the attribute <em>_rev</em> contains the new document
revision. In case of an error or violated precondition, an error
object with the attribute <em>error</em> set to <em>true</em> and the attribute
<em>errorCode</em> set to the error code is built.
If the query parameter <em>returnOld</em> is <em>true</em>, then, for each
generated document, the complete previous revision of the document
is returned under the <em>old</em> attribute in the result.
If the query parameter <em>returnNew</em> is <em>true</em>, then, for each
generated document, the complete new document is returned under
the <em>new</em> attribute in the result.
Note that if any precondition is violated or an error occurred with
some of the documents, the return code is still 201 or 202, but
the additional HTTP header <em>X-Arango-Error-Codes</em> is set, which
contains a map of the error codes that occurred together with their
multiplicities, as in: <em>1200:17,1205:10</em> which means that in 17
cases the error 1200 &quot;revision conflict&quot; and in 10 cases the error
1205 &quot;illegal document handle&quot; has happened.</p>
<p><strong>Return Codes</strong></p>
<ul>
<li><em>201</em>:
is returned if the documents were replaced successfully and
<em>waitForSync</em> was <em>true</em>.</li>
<li><em>202</em>:
is returned if the documents were replaced successfully and
<em>waitForSync</em> was <em>false</em>.</li>
<li><em>400</em>:
is returned if the body does not contain a valid JSON representation
of an array of documents. The response body contains
an error document in this case.</li>
<li><em>404</em>:
is returned if the collection was not found.
<a name="changes_in_3.0_from_2.8:"></a><h4 id="changes-in-30-from-28">Changes in 3.0 from 2.8:</h4>
</li>
</ul>
<p>The multi document version is new in 3.0.</p>
<!-- arangod/RestHandler/RestDocumentHandler.cpp -->
<h3 id="update-document">Update document</h3>
<p> updates a document</p>
<p><code>PATCH /_api/document/{document-handle}</code>
<strong>Post Body</strong>
 <em>document</em> (required):
A JSON representation of a document update as an object.</p>
<p><strong>Path Parameters</strong></p>
<ul>
<li><em>document-handle</em> (required):
This URL parameter must be a document handle.</li>
</ul>
<p><strong>Query Parameters</strong></p>
<ul>
<li><em>keepNull</em> (optional):
If the intention is to delete existing attributes with the patch
command, the URL query parameter <em>keepNull</em> can be used with a value
of <em>false</em>. This will modify the behavior of the patch command to
remove any attributes from the existing document that are contained
in the patch document with an attribute value of <em>null</em>.</li>
<li><em>mergeObjects</em> (optional):
Controls whether objects (not arrays) will be merged if present in
both the existing and the patch document. If set to <em>false</em>, the
value in the patch document will overwrite the existing document&apos;s
value. If set to <em>true</em>, objects will be merged. The default is
<em>true</em>.</li>
<li><em>waitForSync</em> (optional):
Wait until document has been synced to disk.</li>
<li><em>ignoreRevs</em> (optional):
By default, or if this is set to <em>true</em>, the <em>_rev</em> attributes in 
the given document is ignored. If this is set to <em>false</em>, then
the <em>_rev</em> attribute given in the body document is taken as a
precondition. The document is only updated if the current revision
is the one specified.</li>
<li><em>returnOld</em> (optional):
Return additionally the complete previous revision of the changed 
document under the attribute <em>old</em> in the result.</li>
<li><em>returnNew</em> (optional):
Return additionally the complete new document under the attribute <em>new</em>
in the result.</li>
</ul>
<p><strong>Header Parameters</strong></p>
<ul>
<li><em>If-Match</em> (optional):
You can conditionally update a document based on a target revision id by
using the <em>if-match</em> HTTP header.</li>
</ul>
<p>Partially updates the document identified by <em>document-handle</em>.
The body of the request must contain a JSON document with the
attributes to patch (the patch document). All attributes from the
patch document will be added to the existing document if they do not
yet exist, and overwritten in the existing document if they do exist
there.
Setting an attribute value to <em>null</em> in the patch document will cause a
value of <em>null</em> to be saved for the attribute by default.
If the <em>If-Match</em> header is specified and the revision of the
document in the database is unequal to the given revision, the
precondition is violated.
If <em>If-Match</em> is not given and <em>ignoreRevs</em> is <em>false</em> and there
is a <em>_rev</em> attribute in the body and its value does not match
the revision of the document in the database, the precondition is
violated.
If a precondition is violated, an <em>HTTP 412</em> is returned.
If the document exists and can be updated, then an <em>HTTP 201</em> or
an <em>HTTP 202</em> is returned (depending on <em>waitForSync</em>, see below),
the <em>ETag</em> header field contains the new revision of the document
and the <em>Location</em> header contains a complete URL under which the
document can be queried.
Optionally, the query parameter <em>waitForSync</em> can be used to force
synchronization of the updated document operation to disk even in case
that the <em>waitForSync</em> flag had been disabled for the entire collection.
Thus, the <em>waitForSync</em> query parameter can be used to force synchronization
of just specific operations. To use this, set the <em>waitForSync</em> parameter
to <em>true</em>. If the <em>waitForSync</em> parameter is not specified or set to
<em>false</em>, then the collection&apos;s default <em>waitForSync</em> behavior is
applied. The <em>waitForSync</em> query parameter cannot be used to disable
synchronization for collections that have a default <em>waitForSync</em> value
of <em>true</em>.
The body of the response contains a JSON object with the information
about the handle and the revision. The attribute <em>_id</em> contains the
known <em>document-handle</em> of the updated document, <em>_key</em> contains the
key which uniquely identifies a document in a given collection, and
the attribute <em>_rev</em> contains the new document revision.
If the query parameter <em>returnOld</em> is <em>true</em>, then
the complete previous revision of the document
is returned under the <em>old</em> attribute in the result.
If the query parameter <em>returnNew</em> is <em>true</em>, then
the complete new document is returned under
the <em>new</em> attribute in the result.
If the document does not exist, then a <em>HTTP 404</em> is returned and the
body of the response contains an error document.</p>
<p><strong>Return Codes</strong></p>
<ul>
<li><em>201</em>:
is returned if the document was updated successfully and
<em>waitForSync</em> was <em>true</em>.</li>
<li><em>202</em>:
is returned if the document was updated successfully and
<em>waitForSync</em> was <em>false</em>.</li>
<li><em>400</em>:
is returned if the body does not contain a valid JSON representation
of a document. The response body contains
an error document in this case.</li>
<li><em>404</em>:
is returned if the collection or the document was not found.</li>
<li><em>412</em>:
is returned if the precondition was violated. The response will
also contain the found documents&apos; current revisions in the <em>_rev</em>
attributes. Additionally, the attributes <em>_id</em> and <em>_key</em> will be
returned.</li>
</ul>
<p><strong>Examples</strong></p>
<p>Patches an existing document with new content.</p>
<div id="RestDocumentHandlerPatchDocument_container">
<div id="RestDocumentHandlerPatchDocument_long" onclick="" style="Display: none;">
<pre>
shell&gt; curl -X PATCH --data-binary @- --dump - http://localhost:8529/_api/document/products/10249 &lt;&lt;EOF
{ 
  <span class="hljs-string">&quot;hello&quot;</span> : <span class="hljs-string">&quot;world&quot;</span> 
}
EOF

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">202</span> Accepted
content-type: application/json; charset=utf<span class="hljs-number">-8</span>
etag: <span class="hljs-string">&quot;10253&quot;</span>
location: <span class="hljs-regexp">/_db/</span>_system/_api/<span class="hljs-built_in">document</span>/products/<span class="hljs-number">10249</span>

{ 
  <span class="hljs-string">&quot;_id&quot;</span> : <span class="hljs-string">&quot;products/10249&quot;</span>, 
  <span class="hljs-string">&quot;_key&quot;</span> : <span class="hljs-string">&quot;10249&quot;</span>, 
  <span class="hljs-string">&quot;_rev&quot;</span> : <span class="hljs-string">&quot;10253&quot;</span>, 
  <span class="hljs-string">&quot;_oldRev&quot;</span> : <span class="hljs-string">&quot;10249&quot;</span> 
}
shell&gt; curl -X PATCH --data-binary @- --dump - http://localhost:8529/_api/document/products/10249 &lt;&lt;EOF
{ 
  <span class="hljs-string">&quot;numbers&quot;</span> : { 
    <span class="hljs-string">&quot;one&quot;</span> : <span class="hljs-number">1</span>, 
    <span class="hljs-string">&quot;two&quot;</span> : <span class="hljs-number">2</span>, 
    <span class="hljs-string">&quot;three&quot;</span> : <span class="hljs-number">3</span>, 
    <span class="hljs-string">&quot;empty&quot;</span> : <span class="hljs-literal">null</span> 
  } 
}
EOF

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">202</span> Accepted
content-type: application/json; charset=utf<span class="hljs-number">-8</span>
etag: <span class="hljs-string">&quot;10256&quot;</span>
location: <span class="hljs-regexp">/_db/</span>_system/_api/<span class="hljs-built_in">document</span>/products/<span class="hljs-number">10249</span>

{ 
  <span class="hljs-string">&quot;_id&quot;</span> : <span class="hljs-string">&quot;products/10249&quot;</span>, 
  <span class="hljs-string">&quot;_key&quot;</span> : <span class="hljs-string">&quot;10249&quot;</span>, 
  <span class="hljs-string">&quot;_rev&quot;</span> : <span class="hljs-string">&quot;10256&quot;</span>, 
  <span class="hljs-string">&quot;_oldRev&quot;</span> : <span class="hljs-string">&quot;10253&quot;</span> 
}
shell&gt; curl --dump - http://localhost:8529/_api/document/products/10249

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">200</span> OK
content-type: application/json; charset=utf<span class="hljs-number">-8</span>
etag: <span class="hljs-string">&quot;10256&quot;</span>

{ 
  <span class="hljs-string">&quot;_key&quot;</span> : <span class="hljs-string">&quot;10249&quot;</span>, 
  <span class="hljs-string">&quot;_id&quot;</span> : <span class="hljs-string">&quot;products/10249&quot;</span>, 
  <span class="hljs-string">&quot;_rev&quot;</span> : <span class="hljs-string">&quot;10256&quot;</span>, 
  <span class="hljs-string">&quot;hello&quot;</span> : <span class="hljs-string">&quot;world&quot;</span>, 
  <span class="hljs-string">&quot;one&quot;</span> : <span class="hljs-string">&quot;world&quot;</span>, 
  <span class="hljs-string">&quot;numbers&quot;</span> : { 
    <span class="hljs-string">&quot;one&quot;</span> : <span class="hljs-number">1</span>, 
    <span class="hljs-string">&quot;two&quot;</span> : <span class="hljs-number">2</span>, 
    <span class="hljs-string">&quot;three&quot;</span> : <span class="hljs-number">3</span>, 
    <span class="hljs-string">&quot;empty&quot;</span> : <span class="hljs-literal">null</span> 
  } 
}
shell&gt; curl -X PATCH --data-binary @- --dump - http://localhost:8529/_api/document/products/10249?keepNull=false &lt;&lt;EOF
{ 
  <span class="hljs-string">&quot;hello&quot;</span> : <span class="hljs-literal">null</span>, 
  <span class="hljs-string">&quot;numbers&quot;</span> : { 
    <span class="hljs-string">&quot;four&quot;</span> : <span class="hljs-number">4</span> 
  } 
}
EOF

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">202</span> Accepted
content-type: application/json; charset=utf<span class="hljs-number">-8</span>
etag: <span class="hljs-string">&quot;10260&quot;</span>
location: <span class="hljs-regexp">/_db/</span>_system/_api/<span class="hljs-built_in">document</span>/products/<span class="hljs-number">10249</span>

{ 
  <span class="hljs-string">&quot;_id&quot;</span> : <span class="hljs-string">&quot;products/10249&quot;</span>, 
  <span class="hljs-string">&quot;_key&quot;</span> : <span class="hljs-string">&quot;10249&quot;</span>, 
  <span class="hljs-string">&quot;_rev&quot;</span> : <span class="hljs-string">&quot;10260&quot;</span>, 
  <span class="hljs-string">&quot;_oldRev&quot;</span> : <span class="hljs-string">&quot;10256&quot;</span> 
}
shell&gt; curl --dump - http://localhost:8529/_api/document/products/10249

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">200</span> OK
content-type: application/json; charset=utf<span class="hljs-number">-8</span>
etag: <span class="hljs-string">&quot;10260&quot;</span>

{ 
  <span class="hljs-string">&quot;_key&quot;</span> : <span class="hljs-string">&quot;10249&quot;</span>, 
  <span class="hljs-string">&quot;_id&quot;</span> : <span class="hljs-string">&quot;products/10249&quot;</span>, 
  <span class="hljs-string">&quot;_rev&quot;</span> : <span class="hljs-string">&quot;10260&quot;</span>, 
  <span class="hljs-string">&quot;numbers&quot;</span> : { 
    <span class="hljs-string">&quot;empty&quot;</span> : <span class="hljs-literal">null</span>, 
    <span class="hljs-string">&quot;one&quot;</span> : <span class="hljs-number">1</span>, 
    <span class="hljs-string">&quot;three&quot;</span> : <span class="hljs-number">3</span>, 
    <span class="hljs-string">&quot;two&quot;</span> : <span class="hljs-number">2</span>, 
    <span class="hljs-string">&quot;four&quot;</span> : <span class="hljs-number">4</span> 
  }, 
  <span class="hljs-string">&quot;one&quot;</span> : <span class="hljs-string">&quot;world&quot;</span> 
}
</pre>
</div>
<div id="RestDocumentHandlerPatchDocument_short" onclick="$(&apos;#RestDocumentHandlerPatchDocument_short&apos;).hide(); $(&apos;#RestDocumentHandlerPatchDocument_long&apos;).show();">
<pre>
shell&gt; curl -X PATCH --data-binary @- --dump - http://localhost:8529/_api/document/products/10249 &lt;&lt;EOF
{ 
  <span class="hljs-string">&quot;hello&quot;</span> : <span class="hljs-string">&quot;world&quot;</span> 
}
EOF

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">202</span> Accepted
content-type: application/json; charset=utf<span class="hljs-number">-8</span>
etag: <span class="hljs-string">&quot;10253&quot;</span>
location: <span class="hljs-regexp">/_db/</span>_system/_api/<span class="hljs-built_in">document</span>/products/<span class="hljs-number">10249</span>

</pre><div class="example_show_button">show response body</div>
</div>
</div>

<p>Merging attributes of an object using <code>mergeObjects</code>:</p>
<div id="RestDocumentHandlerPatchDocumentMerge_container">
<div id="RestDocumentHandlerPatchDocumentMerge_long" onclick="" style="Display: none;">
<pre>
shell&gt; curl --dump - http://localhost:8529/_api/document/products/10267

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">200</span> OK
content-type: application/json; charset=utf<span class="hljs-number">-8</span>
etag: <span class="hljs-string">&quot;10267&quot;</span>

{ 
  <span class="hljs-string">&quot;_key&quot;</span> : <span class="hljs-string">&quot;10267&quot;</span>, 
  <span class="hljs-string">&quot;_id&quot;</span> : <span class="hljs-string">&quot;products/10267&quot;</span>, 
  <span class="hljs-string">&quot;_rev&quot;</span> : <span class="hljs-string">&quot;10267&quot;</span>, 
  <span class="hljs-string">&quot;inhabitants&quot;</span> : { 
    <span class="hljs-string">&quot;china&quot;</span> : <span class="hljs-number">1366980000</span>, 
    <span class="hljs-string">&quot;india&quot;</span> : <span class="hljs-number">1263590000</span>, 
    <span class="hljs-string">&quot;usa&quot;</span> : <span class="hljs-number">319220000</span> 
  } 
}
shell&gt; curl -X PATCH --data-binary @- --dump - http://localhost:8529/_api/document/products/10267?mergeObjects=true &lt;&lt;EOF
{ 
  <span class="hljs-string">&quot;inhabitants&quot;</span> : { 
    <span class="hljs-string">&quot;indonesia&quot;</span> : <span class="hljs-number">252164800</span>, 
    <span class="hljs-string">&quot;brazil&quot;</span> : <span class="hljs-number">203553000</span> 
  } 
}
EOF

shell&gt; curl --dump - http://localhost:8529/_api/document/products/10267

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">200</span> OK
content-type: application/json; charset=utf<span class="hljs-number">-8</span>
etag: <span class="hljs-string">&quot;10272&quot;</span>

{ 
  <span class="hljs-string">&quot;_key&quot;</span> : <span class="hljs-string">&quot;10267&quot;</span>, 
  <span class="hljs-string">&quot;_id&quot;</span> : <span class="hljs-string">&quot;products/10267&quot;</span>, 
  <span class="hljs-string">&quot;_rev&quot;</span> : <span class="hljs-string">&quot;10272&quot;</span>, 
  <span class="hljs-string">&quot;inhabitants&quot;</span> : { 
    <span class="hljs-string">&quot;china&quot;</span> : <span class="hljs-number">1366980000</span>, 
    <span class="hljs-string">&quot;india&quot;</span> : <span class="hljs-number">1263590000</span>, 
    <span class="hljs-string">&quot;usa&quot;</span> : <span class="hljs-number">319220000</span>, 
    <span class="hljs-string">&quot;indonesia&quot;</span> : <span class="hljs-number">252164800</span>, 
    <span class="hljs-string">&quot;brazil&quot;</span> : <span class="hljs-number">203553000</span> 
  } 
}
shell&gt; curl -X PATCH --data-binary @- --dump - http://localhost:8529/_api/document/products/10267?mergeObjects=false &lt;&lt;EOF
{ 
  <span class="hljs-string">&quot;inhabitants&quot;</span> : { 
    <span class="hljs-string">&quot;pakistan&quot;</span> : <span class="hljs-number">188346000</span> 
  } 
}
EOF

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">202</span> Accepted
content-type: application/json; charset=utf<span class="hljs-number">-8</span>
etag: <span class="hljs-string">&quot;10276&quot;</span>
location: <span class="hljs-regexp">/_db/</span>_system/_api/<span class="hljs-built_in">document</span>/products/<span class="hljs-number">10267</span>

{ 
  <span class="hljs-string">&quot;_id&quot;</span> : <span class="hljs-string">&quot;products/10267&quot;</span>, 
  <span class="hljs-string">&quot;_key&quot;</span> : <span class="hljs-string">&quot;10267&quot;</span>, 
  <span class="hljs-string">&quot;_rev&quot;</span> : <span class="hljs-string">&quot;10276&quot;</span>, 
  <span class="hljs-string">&quot;_oldRev&quot;</span> : <span class="hljs-string">&quot;10272&quot;</span> 
}
shell&gt; curl --dump - http://localhost:8529/_api/document/products/10267

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">200</span> OK
content-type: application/json; charset=utf<span class="hljs-number">-8</span>
etag: <span class="hljs-string">&quot;10276&quot;</span>

{ 
  <span class="hljs-string">&quot;_key&quot;</span> : <span class="hljs-string">&quot;10267&quot;</span>, 
  <span class="hljs-string">&quot;_id&quot;</span> : <span class="hljs-string">&quot;products/10267&quot;</span>, 
  <span class="hljs-string">&quot;_rev&quot;</span> : <span class="hljs-string">&quot;10276&quot;</span>, 
  <span class="hljs-string">&quot;inhabitants&quot;</span> : { 
    <span class="hljs-string">&quot;pakistan&quot;</span> : <span class="hljs-number">188346000</span> 
  } 
}
</pre>
</div>
<div id="RestDocumentHandlerPatchDocumentMerge_short" onclick="$(&apos;#RestDocumentHandlerPatchDocumentMerge_short&apos;).hide(); $(&apos;#RestDocumentHandlerPatchDocumentMerge_long&apos;).show();">
<pre>
shell&gt; curl --dump - http://localhost:8529/_api/document/products/10267

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">200</span> OK
content-type: application/json; charset=utf<span class="hljs-number">-8</span>
etag: <span class="hljs-string">&quot;10267&quot;</span>

</pre><div class="example_show_button">show response body</div>
</div>
</div>

<p><a name="changes_in_3.0_from_2.8:"></a></p>
<h4 id="changes-in-30-from-28">Changes in 3.0 from 2.8:</h4>
<p>There are quite some changes in this in comparison to Version 2.8, but
few break existing usage:</p>
<ul>
<li>the <em>rev</em> query parameter is gone (was duplication of If-Match)</li>
<li>the <em>policy</em> query parameter is gone (was non-sensical)</li>
<li>the <em>ignoreRevs</em> query parameter is new, the default <em>true</em> gives 
the traditional behaviour as in 2.8</li>
<li>the <em>returnNew</em> and <em>returnOld</em> query parameters are new</li>
</ul>
<p>There should be very few changes to behaviour happening in real-world
situations or drivers. Essentially, one has to replace usage of the
<em>rev</em> query parameter by usage of the <em>If-Match</em> header. The non-sensical
combination of <em>If-Match</em> given and <em>policy=last</em> no longer works, but can
easily be achieved by leaving out the <em>If-Match</em> header.</p>
<p>The collection name should now be specified in the URL path. The old
way with the URL path <em>/_api/document</em> and the required query parameter
<em>collection</em> still works.</p>
<!-- arangod/RestHandler/RestDocumentHandler.cpp -->
<h3 id="update-documents">Update documents</h3>
<p> updates multiple documents</p>
<p><code>PATCH /_api/document/{collection}</code>
<strong>Post Body</strong>
 <em>documents</em> (required):
A JSON representation of an array of document updates as objects.</p>
<p><strong>Path Parameters</strong></p>
<ul>
<li><em>collection</em> (required):
This URL parameter is the name of the collection in which the
documents are updated.</li>
</ul>
<p><strong>Query Parameters</strong></p>
<ul>
<li><em>keepNull</em> (optional):
If the intention is to delete existing attributes with the patch
command, the URL query parameter <em>keepNull</em> can be used with a value
of <em>false</em>. This will modify the behavior of the patch command to
remove any attributes from the existing document that are contained
in the patch document with an attribute value of <em>null</em>.</li>
<li><em>mergeObjects</em> (optional):
Controls whether objects (not arrays) will be merged if present in
both the existing and the patch document. If set to <em>false</em>, the
value in the patch document will overwrite the existing document&apos;s
value. If set to <em>true</em>, objects will be merged. The default is
<em>true</em>.</li>
<li><em>waitForSync</em> (optional):
Wait until the new documents have been synced to disk.</li>
<li><em>ignoreRevs</em> (optional):
By default, or if this is set to <em>true</em>, the <em>_rev</em> attributes in 
the given documents are ignored. If this is set to <em>false</em>, then
any <em>_rev</em> attribute given in a body document is taken as a
precondition. The document is only updated if the current revision
is the one specified.</li>
<li><em>returnOld</em> (optional):
Return additionally the complete previous revision of the changed 
documents under the attribute <em>old</em> in the result.</li>
<li><em>returnNew</em> (optional):
Return additionally the complete new documents under the attribute <em>new</em>
in the result.</li>
</ul>
<p>Partially updates documents, the documents to update are specified
by the <em>_key</em> attributes in the body objects. The body of the
request must contain a JSON array of document updates with the
attributes to patch (the patch documents). All attributes from the
patch documents will be added to the existing documents if they do
not yet exist, and overwritten in the existing documents if they do
exist there.
Setting an attribute value to <em>null</em> in the patch documents will cause a
value of <em>null</em> to be saved for the attribute by default.
If <em>ignoreRevs</em> is <em>false</em> and there is a <em>_rev</em> attribute in a
document in the body and its value does not match the revision of
the corresponding document in the database, the precondition is
violated.
If the document exists and can be updated, then an <em>HTTP 201</em> or
an <em>HTTP 202</em> is returned (depending on <em>waitForSync</em>, see below).
Optionally, the query parameter <em>waitForSync</em> can be used to force
synchronization of the document replacement operation to disk even in case
that the <em>waitForSync</em> flag had been disabled for the entire collection.
Thus, the <em>waitForSync</em> query parameter can be used to force synchronization
of just specific operations. To use this, set the <em>waitForSync</em> parameter
to <em>true</em>. If the <em>waitForSync</em> parameter is not specified or set to
<em>false</em>, then the collection&apos;s default <em>waitForSync</em> behavior is
applied. The <em>waitForSync</em> query parameter cannot be used to disable
synchronization for collections that have a default <em>waitForSync</em> value
of <em>true</em>.
The body of the response contains a JSON array of the same length
as the input array with the information about the handle and the
revision of the updated documents. In each entry, the attribute
<em>_id</em> contains the known <em>document-handle</em> of each updated document,
<em>_key</em> contains the key which uniquely identifies a document in a
given collection, and the attribute <em>_rev</em> contains the new document
revision. In case of an error or violated precondition, an error
object with the attribute <em>error</em> set to <em>true</em> and the attribute
<em>errorCode</em> set to the error code is built.
If the query parameter <em>returnOld</em> is <em>true</em>, then, for each
generated document, the complete previous revision of the document
is returned under the <em>old</em> attribute in the result.
If the query parameter <em>returnNew</em> is <em>true</em>, then, for each
generated document, the complete new document is returned under
the <em>new</em> attribute in the result.
Note that if any precondition is violated or an error occurred with
some of the documents, the return code is still 201 or 202, but
the additional HTTP header <em>X-Arango-Error-Codes</em> is set, which
contains a map of the error codes that occurred together with their
multiplicities, as in: <em>1200:17,1205:10</em> which means that in 17
cases the error 1200 &quot;revision conflict&quot; and in 10 cases the error
1205 &quot;illegal document handle&quot; has happened.</p>
<p><strong>Return Codes</strong></p>
<ul>
<li><em>201</em>:
is returned if the documents were updated successfully and
<em>waitForSync</em> was <em>true</em>.</li>
<li><em>202</em>:
is returned if the documents were updated successfully and
<em>waitForSync</em> was <em>false</em>.</li>
<li><em>400</em>:
is returned if the body does not contain a valid JSON representation
of an array of documents. The response body contains
an error document in this case.</li>
<li><em>404</em>:
is returned if the collection was not found.
<a name="changes_in_3.0_from_2.8:"></a><h4 id="changes-in-30-from-28">Changes in 3.0 from 2.8:</h4>
</li>
</ul>
<p>The multi document version is new in 3.0.</p>
<!-- arangod/RestHandler/RestDocumentHandler.cpp -->
<h3 id="removes-a-document">Removes a document</h3>
<p> removes a document</p>
<p><code>DELETE /_api/document/{document-handle}</code></p>
<p><strong>Path Parameters</strong></p>
<ul>
<li><em>document-handle</em> (required):
Removes the document identified by <em>document-handle</em>.</li>
</ul>
<p><strong>Query Parameters</strong></p>
<ul>
<li><em>waitForSync</em> (optional):
Wait until deletion operation has been synced to disk.</li>
<li><em>returnOld</em> (optional):
Return additionally the complete previous revision of the changed 
document under the attribute <em>old</em> in the result.</li>
</ul>
<p><strong>Header Parameters</strong></p>
<ul>
<li><em>If-Match</em> (optional):
You can conditionally remove a document based on a target revision id by
using the <em>if-match</em> HTTP header.</li>
</ul>
<p>The body of the response contains a JSON object with the information
about the handle and the revision. The attribute <em>_id</em> contains the
known <em>document-handle</em> of the removed document, <em>_key</em> contains the
key which uniquely identifies a document in a given collection, and
the attribute <em>_rev</em> contains the document revision.
If the <em>waitForSync</em> parameter is not specified or set to <em>false</em>,
then the collection&apos;s default <em>waitForSync</em> behavior is applied.
The <em>waitForSync</em> query parameter cannot be used to disable
synchronization for collections that have a default <em>waitForSync</em>
value of <em>true</em>.
If the query parameter <em>returnOld</em> is <em>true</em>, then
the complete previous revision of the document
is returned under the <em>old</em> attribute in the result.</p>
<p><strong>Return Codes</strong></p>
<ul>
<li><em>200</em>:
is returned if the document was removed successfully and
<em>waitForSync</em> was <em>true</em>.</li>
<li><em>202</em>:
is returned if the document was removed successfully and
<em>waitForSync</em> was <em>false</em>.</li>
<li><em>404</em>:
is returned if the collection or the document was not found.
The response body contains an error document in this case.</li>
<li><em>412</em>:
is returned if a &quot;If-Match&quot; header or <em>rev</em> is given and the found
document has a different version. The response will also contain the found
document&apos;s current revision in the <em>_rev</em> attribute. Additionally, the
attributes <em>_id</em> and <em>_key</em> will be returned.</li>
</ul>
<p><strong>Examples</strong></p>
<p>Using document handle:</p>
<div id="RestDocumentHandlerDeleteDocument_container">
<div id="RestDocumentHandlerDeleteDocument_long" onclick="" style="Display: none;">
<pre>
shell&gt; curl -X DELETE --dump - http://localhost:8529/_api/document/products/10181

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">200</span> OK
content-type: application/json; charset=utf<span class="hljs-number">-8</span>
etag: <span class="hljs-string">&quot;10181&quot;</span>
location: <span class="hljs-regexp">/_db/</span>_system/_api/<span class="hljs-built_in">document</span>/products/<span class="hljs-number">10181</span>

{ 
  <span class="hljs-string">&quot;_id&quot;</span> : <span class="hljs-string">&quot;products/10181&quot;</span>, 
  <span class="hljs-string">&quot;_key&quot;</span> : <span class="hljs-string">&quot;10181&quot;</span>, 
  <span class="hljs-string">&quot;_rev&quot;</span> : <span class="hljs-string">&quot;10181&quot;</span> 
}
</pre>
</div>
<div id="RestDocumentHandlerDeleteDocument_short" onclick="$(&apos;#RestDocumentHandlerDeleteDocument_short&apos;).hide(); $(&apos;#RestDocumentHandlerDeleteDocument_long&apos;).show();">
<pre>
shell&gt; curl -X DELETE --dump - http://localhost:8529/_api/document/products/10181

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">200</span> OK
content-type: application/json; charset=utf<span class="hljs-number">-8</span>
etag: <span class="hljs-string">&quot;10181&quot;</span>
location: <span class="hljs-regexp">/_db/</span>_system/_api/<span class="hljs-built_in">document</span>/products/<span class="hljs-number">10181</span>

</pre><div class="example_show_button">show response body</div>
</div>
</div>

<p>Unknown document handle:</p>
<div id="RestDocumentHandlerDeleteDocumentUnknownHandle_container">
<div id="RestDocumentHandlerDeleteDocumentUnknownHandle_long" onclick="" style="Display: none;">
<pre>
shell&gt; curl -X DELETE --dump - http://localhost:8529/_api/document/products/10225

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">404</span> Not Found
content-type: application/json; charset=utf<span class="hljs-number">-8</span>

{ 
  <span class="hljs-string">&quot;error&quot;</span> : <span class="hljs-literal">true</span>, 
  <span class="hljs-string">&quot;errorMessage&quot;</span> : <span class="hljs-string">&quot;document not found&quot;</span>, 
  <span class="hljs-string">&quot;code&quot;</span> : <span class="hljs-number">404</span>, 
  <span class="hljs-string">&quot;errorNum&quot;</span> : <span class="hljs-number">1202</span> 
}
</pre>
</div>
<div id="RestDocumentHandlerDeleteDocumentUnknownHandle_short" onclick="$(&apos;#RestDocumentHandlerDeleteDocumentUnknownHandle_short&apos;).hide(); $(&apos;#RestDocumentHandlerDeleteDocumentUnknownHandle_long&apos;).show();">
<pre>
shell&gt; curl -X DELETE --dump - http://localhost:8529/_api/document/products/10225

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">404</span> Not Found
content-type: application/json; charset=utf<span class="hljs-number">-8</span>

</pre><div class="example_show_button">show response body</div>
</div>
</div>

<p>Revision conflict:</p>
<div id="RestDocumentHandlerDeleteDocumentIfMatchOther_container">
<div id="RestDocumentHandlerDeleteDocumentIfMatchOther_long" onclick="" style="Display: none;">
<pre>
shell&gt; curl -X DELETE --header &apos;If-Match: &quot;10195&quot;&apos; --dump - http://localhost:8529/_api/document/products/10191

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">412</span> Precondition Failed
content-type: application/json; charset=utf<span class="hljs-number">-8</span>
etag: <span class="hljs-string">&quot;10191&quot;</span>

{ 
  <span class="hljs-string">&quot;error&quot;</span> : <span class="hljs-literal">true</span>, 
  <span class="hljs-string">&quot;code&quot;</span> : <span class="hljs-number">412</span>, 
  <span class="hljs-string">&quot;errorNum&quot;</span> : <span class="hljs-number">1200</span>, 
  <span class="hljs-string">&quot;errorMessage&quot;</span> : <span class="hljs-string">&quot;precondition failed&quot;</span>, 
  <span class="hljs-string">&quot;_id&quot;</span> : <span class="hljs-string">&quot;products/10191&quot;</span>, 
  <span class="hljs-string">&quot;_key&quot;</span> : <span class="hljs-string">&quot;10191&quot;</span>, 
  <span class="hljs-string">&quot;_rev&quot;</span> : <span class="hljs-string">&quot;10191&quot;</span> 
}
</pre>
</div>
<div id="RestDocumentHandlerDeleteDocumentIfMatchOther_short" onclick="$(&apos;#RestDocumentHandlerDeleteDocumentIfMatchOther_short&apos;).hide(); $(&apos;#RestDocumentHandlerDeleteDocumentIfMatchOther_long&apos;).show();">
<pre>
shell&gt; curl -X DELETE --header &apos;If-Match: &quot;10195&quot;&apos; --dump - http://localhost:8529/_api/document/products/10191

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">412</span> Precondition Failed
content-type: application/json; charset=utf<span class="hljs-number">-8</span>
etag: <span class="hljs-string">&quot;10191&quot;</span>

</pre><div class="example_show_button">show response body</div>
</div>
</div>

<p><a name="changes_in_3.0_from_2.8:"></a></p>
<h4 id="changes-in-30-from-28">Changes in 3.0 from 2.8:</h4>
<p>There are only very few changes in this in comparison to Version 2.8:</p>
<ul>
<li>the <em>rev</em> query parameter is gone (was duplication of If-Match)</li>
<li>the <em>policy</em> query parameter is gone (was non-sensical)</li>
<li>the <em>returnOld</em> query parameter is new</li>
</ul>
<p>There should be very few changes to behaviour happening in real-world
situations or drivers. Essentially, one has to replace usage of the
<em>rev</em> query parameter by usage of the <em>If-Match</em> header. The non-sensical
combination of <em>If-Match</em> given and <em>policy=last</em> no longer works, but can
easily be achieved by leaving out the <em>If-Match</em> header.</p>
<!-- arangod/RestHandler/RestDocumentHandler.cpp -->
<h3 id="removes-multiple-documents">Removes multiple documents</h3>
<p> removes multiple document</p>
<p><code>DELETE /_api/document/{collection}</code>
<strong>Post Body</strong>
 <em>array</em> (required):
A JSON array of strings or documents.</p>
<p><strong>Path Parameters</strong></p>
<ul>
<li><em>collection</em> (required):
Collection from which documents are removed.</li>
</ul>
<p><strong>Path Parameters</strong></p>
<p><strong>Query Parameters</strong></p>
<ul>
<li><em>waitForSync</em> (optional):
Wait until deletion operation has been synced to disk.</li>
<li><em>returnOld</em> (optional):
Return additionally the complete previous revision of the changed 
document under the attribute <em>old</em> in the result.</li>
<li><em>ignoreRevs</em> (optional):
If set to <em>true</em>, ignore any <em>_rev</em> attribute in the selectors. No
revision check is performed.</li>
</ul>
<p>The body of the request is an array consisting of selectors for
documents. A selector can either be a string with a key or a string
with a document handle or an object with a <em>_key</em> attribute. This
API call removes all specified documents from <em>collection</em>. If the
selector is an object and has a <em>_rev</em> attribute, it is a
precondition that the actual revision of the removed document in the
collection is the specified one.
The body of the response is an array of the same length as the input
array. For each input selector, the output contains a JSON object
with the information about the outcome of the operation. If no error
occurred, an object is built in which the attribute <em>_id</em> contains
the known <em>document-handle</em> of the removed document, <em>_key</em> contains
the key which uniquely identifies a document in a given collection,
and the attribute <em>_rev</em> contains the document revision. In case of
an error, an object with the attribute <em>error</em> set to <em>true</em> and
<em>errorCode</em> set to the error code is built.
If the <em>waitForSync</em> parameter is not specified or set to <em>false</em>,
then the collection&apos;s default <em>waitForSync</em> behavior is applied.
The <em>waitForSync</em> query parameter cannot be used to disable
synchronization for collections that have a default <em>waitForSync</em>
value of <em>true</em>.
If the query parameter <em>returnOld</em> is <em>true</em>, then
the complete previous revision of the document
is returned under the <em>old</em> attribute in the result.
Note that if any precondition is violated or an error occurred with
some of the documents, the return code is still 200 or 202, but
the additional HTTP header <em>X-Arango-Error-Codes</em> is set, which
contains a map of the error codes that occurred together with their
multiplicities, as in: <em>1200:17,1205:10</em> which means that in 17
cases the error 1200 &quot;revision conflict&quot; and in 10 cases the error
1205 &quot;illegal document handle&quot; has happened.</p>
<p><strong>Return Codes</strong></p>
<ul>
<li><em>200</em>:
is returned if <em>waitForSync</em> was <em>true</em>.</li>
<li><em>202</em>:
is returned if <em>waitForSync</em> was <em>false</em>.</li>
<li><em>404</em>:
is returned if the collection was not found.
The response body contains an error document in this case.</li>
</ul>
<p><strong>Examples</strong></p>
<p>Using document handle:</p>
<div id="RestDocumentHandlerDeleteDocumentMulti_container">
<div id="RestDocumentHandlerDeleteDocumentMulti_long" onclick="" style="Display: none;">
<pre>
shell&gt; curl -X DELETE --dump - http://localhost:8529/_api/document/products/10215

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">200</span> OK
content-type: application/json; charset=utf<span class="hljs-number">-8</span>
etag: <span class="hljs-string">&quot;10215&quot;</span>
location: <span class="hljs-regexp">/_db/</span>_system/_api/<span class="hljs-built_in">document</span>/products/<span class="hljs-number">10215</span>

{ 
  <span class="hljs-string">&quot;_id&quot;</span> : <span class="hljs-string">&quot;products/10215&quot;</span>, 
  <span class="hljs-string">&quot;_key&quot;</span> : <span class="hljs-string">&quot;10215&quot;</span>, 
  <span class="hljs-string">&quot;_rev&quot;</span> : <span class="hljs-string">&quot;10215&quot;</span> 
}
</pre>
</div>
<div id="RestDocumentHandlerDeleteDocumentMulti_short" onclick="$(&apos;#RestDocumentHandlerDeleteDocumentMulti_short&apos;).hide(); $(&apos;#RestDocumentHandlerDeleteDocumentMulti_long&apos;).show();">
<pre>
shell&gt; curl -X DELETE --dump - http://localhost:8529/_api/document/products/10215

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">200</span> OK
content-type: application/json; charset=utf<span class="hljs-number">-8</span>
etag: <span class="hljs-string">&quot;10215&quot;</span>
location: <span class="hljs-regexp">/_db/</span>_system/_api/<span class="hljs-built_in">document</span>/products/<span class="hljs-number">10215</span>

</pre><div class="example_show_button">show response body</div>
</div>
</div>

<p>Unknown document handle:</p>
<div id="RestDocumentHandlerDeleteDocumentUnknownHandleMulti_container">
<div id="RestDocumentHandlerDeleteDocumentUnknownHandleMulti_long" onclick="" style="Display: none;">
<pre>
shell&gt; curl -X DELETE --dump - http://localhost:8529/_api/document/products/10237

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">404</span> Not Found
content-type: application/json; charset=utf<span class="hljs-number">-8</span>

{ 
  <span class="hljs-string">&quot;error&quot;</span> : <span class="hljs-literal">true</span>, 
  <span class="hljs-string">&quot;errorMessage&quot;</span> : <span class="hljs-string">&quot;document not found&quot;</span>, 
  <span class="hljs-string">&quot;code&quot;</span> : <span class="hljs-number">404</span>, 
  <span class="hljs-string">&quot;errorNum&quot;</span> : <span class="hljs-number">1202</span> 
}
</pre>
</div>
<div id="RestDocumentHandlerDeleteDocumentUnknownHandleMulti_short" onclick="$(&apos;#RestDocumentHandlerDeleteDocumentUnknownHandleMulti_short&apos;).hide(); $(&apos;#RestDocumentHandlerDeleteDocumentUnknownHandleMulti_long&apos;).show();">
<pre>
shell&gt; curl -X DELETE --dump - http://localhost:8529/_api/document/products/10237

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">404</span> Not Found
content-type: application/json; charset=utf<span class="hljs-number">-8</span>

</pre><div class="example_show_button">show response body</div>
</div>
</div>

<p>Revision conflict:</p>
<div id="RestDocumentHandlerDeleteDocumentIfMatchOtherMulti_container">
<div id="RestDocumentHandlerDeleteDocumentIfMatchOtherMulti_long" onclick="" style="Display: none;">
<pre>
shell&gt; curl -X DELETE --header &apos;If-Match: &quot;10207&quot;&apos; --dump - http://localhost:8529/_api/document/products/10203

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">412</span> Precondition Failed
content-type: application/json; charset=utf<span class="hljs-number">-8</span>
etag: <span class="hljs-string">&quot;10203&quot;</span>

{ 
  <span class="hljs-string">&quot;error&quot;</span> : <span class="hljs-literal">true</span>, 
  <span class="hljs-string">&quot;code&quot;</span> : <span class="hljs-number">412</span>, 
  <span class="hljs-string">&quot;errorNum&quot;</span> : <span class="hljs-number">1200</span>, 
  <span class="hljs-string">&quot;errorMessage&quot;</span> : <span class="hljs-string">&quot;precondition failed&quot;</span>, 
  <span class="hljs-string">&quot;_id&quot;</span> : <span class="hljs-string">&quot;products/10203&quot;</span>, 
  <span class="hljs-string">&quot;_key&quot;</span> : <span class="hljs-string">&quot;10203&quot;</span>, 
  <span class="hljs-string">&quot;_rev&quot;</span> : <span class="hljs-string">&quot;10203&quot;</span> 
}
</pre>
</div>
<div id="RestDocumentHandlerDeleteDocumentIfMatchOtherMulti_short" onclick="$(&apos;#RestDocumentHandlerDeleteDocumentIfMatchOtherMulti_short&apos;).hide(); $(&apos;#RestDocumentHandlerDeleteDocumentIfMatchOtherMulti_long&apos;).show();">
<pre>
shell&gt; curl -X DELETE --header &apos;If-Match: &quot;10207&quot;&apos; --dump - http://localhost:8529/_api/document/products/10203

HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">412</span> Precondition Failed
content-type: application/json; charset=utf<span class="hljs-number">-8</span>
etag: <span class="hljs-string">&quot;10203&quot;</span>

</pre><div class="example_show_button">show response body</div>
</div>
</div>

<p><a name="changes_in_3.0_from_2.8:"></a></p>
<h4 id="changes-in-30-from-28">Changes in 3.0 from 2.8:</h4>
<p>This variant is new in 3.0. Note that it requires a body in the DELETE
request.</p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../Document/AddressAndEtag.html" class="navigation navigation-prev " aria-label="Previous page: Basics and Terminology"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../Edge/index.html" class="navigation navigation-next " aria-label="Next page: Edges"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../gitbook/app.js"></script>

    
    <script src="../gitbook/plugins/gitbook-plugin-toggle-chapters/toggle.js"></script>
    

    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/3.1.1/anchor.min.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-anchorjs/anchor-style.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-piwik/plugin.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"addcssjs":{"js":["styles/header.js"],"css":["styles/header.css"]},"add-header":{"BASE_PATH":"https://docs.arangodb.com/devel"},"piwik":{"URL":"www.arangodb.com/piwik/","siteId":12},"toggle-chapters":{},"anchorjs":{},"highlight":{},"fontsettings":{"theme":"white","family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        <!-- body:end -->
<script type="text/javascript">var _paq = _paq || [];_paq.push(['trackPageView']);_paq.push(['enableLinkTracking']);(function() {var u=(("https:" == document.location.protocol) ? "https" : "http") + "://www.arangodb.com/piwik/";_paq.push(['setTrackerUrl', u+'piwik.php']);_paq.push(['setSiteId', 12]);var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0]; g.type='text/javascript';g.defer=true; g.async=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);})();</script><noscript><p><img src="http://www.arangodb.com/piwik/piwik.php?idsite=12" style="border:0;" alt="" /></p></noscript>
    </body>
    <!-- End of book ArangoDB v3.0.x-devel (2016-06-02) HTTP API Documentation -->
</html>
