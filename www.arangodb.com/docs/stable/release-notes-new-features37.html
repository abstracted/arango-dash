<!DOCTYPE html>
<html lang="en">
<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="canonical" href="release-notes-new-features37.html">
<title>What's New in 3.7 | Version 3.7 | Release Notes | Manual | ArangoDB Documentation</title>
<meta itemprop="description" name="description" content="ArangoDB v3.7 Release Notes New Features" />
<meta name="robots" content="index, follow" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta property="og:url" content="https://www.arangodb.com/docs/stable/release-notes-new-features37.html" />
<meta property="og:title" content="What's New in 3.7 | Version 3.7 | Release Notes | Manual | ArangoDB Documentation" />
<meta property="og:type" content="website" />
<meta property="og:description" content="ArangoDB v3.7 Release Notes New Features" />

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-81053435-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-81053435-1');
</script>

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-5LQ7HC');
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('provide', 'adblockTracker', function(tracker, opts) {
    var ad = document.createElement('ins');
    ad.className = 'AdSense';
    ad.style.display = 'block';
    ad.style.position = 'absolute';
    ad.style.top = '-1px';
    ad.style.height = '1px';
    document.body.appendChild(ad);
    tracker.set('dimension' + opts.dimensionIndex, !ad.clientHeight);
    document.body.removeChild(ad);
  });

  ga('create', 'UA-81053435-6', 'auto');
  ga('require', 'adblockTracker', {dimensionIndex: 1});
  ga('send', 'pageview');
</script>

<script>
  !function(e,t,n,s,u,a){e.twq||(s=e.twq=function(){s.exe?s.exe.apply(s,arguments):s.queue.push(arguments);
  },s.version='1.1',s.queue=[],u=t.createElement(n),u.async=!0,u.src='//static.ads-twitter.com/uwt.js',
  a=t.getElementsByTagName(n)[0],a.parentNode.insertBefore(u,a))}(window,document,'script');
  twq('init','nz793');
  twq('track','PageView');
</script>

<script type="text/javascript">
  _linkedin_partner_id = "499017";
  window._linkedin_data_partner_ids = window._linkedin_data_partner_ids || [];
  window._linkedin_data_partner_ids.push(_linkedin_partner_id);
  </script><script type="text/javascript">
  (function(){var s = document.getElementsByTagName("script")[0];
  var b = document.createElement("script");
  b.type = "text/javascript";b.async = true;
  b.src = "https://snap.licdn.com/li.lms-analytics/insight.min.js";
  s.parentNode.insertBefore(b, s);})();
</script>

<link rel="shortcut icon" href="../../wp-content/uploads/2018/07/www.arangodb.com-favicon.png">
<link rel="stylesheet" href="../styles/gitbook/style.css">
<link rel="stylesheet" href="../styles/gitbook/highlight-website.css">
<link rel="stylesheet" href="../styles/gitbook/fontsettings-website.css">
<link rel="stylesheet" href="../styles/website.css">
<link rel="stylesheet" href="../styles/header.css">
<link rel="stylesheet" href="../styles/navbar.css">
<link rel="stylesheet" href="../styles/site.css">
<link rel="stylesheet" href="../styles/pygments-vs.css">
<script src="../js/jquery-3.4.0.min.js"></script>
<script src="../js/site.js"></script>
</head>
<body>
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5LQ7HC" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<noscript><img height="1" width="1" style="display:none;" alt="" src="https://dc.ads.linkedin.com/collect/?pid=499017&fmt=gif" /></noscript>

<div class="arangodb-header">
  <div class="arangodb-logo">
    <a href="https://arangodb.com/">
      <img src="../assets/arangodb_logo_2016.png" alt="ArangoDB Logo">
    </a>
  </div>
  <div class="arangodb-logo-small">
    <a href="https://arangodb.com/">
      <img src="../assets/arangodb_logo_small_2016.png" alt="ArangoDB Logo">
    </a>
  </div>
  <select class="arangodb-version-switcher">
      <option value="devel">3.8</option>
      <option value="stable">3.7</option>
      <option value="3.6" disabled>3.6</option>
      <option value="3.5" disabled>3.5</option>
      <option value="3.4" disabled>3.4</option>
      <option value="3.3" disabled>3.3</option>
  </select>
  <script type="text/javascript">
    var versionAliases = {"stable":"3.7","devel":"3.8"};
    var current = location.href;

    var selectedVersion = current.split('/')[4];
    var switcher = document.querySelector(".arangodb-version-switcher");

    for (var i = 0; i < switcher.options.length; i++) {
      var value = switcher.options.item(i).value;
      if (value == selectedVersion) {
        switcher.value = value;
      } else if (versionAliases[value] == selectedVersion) {
        switcher.value = value;
      }
    }
    
    switcher.addEventListener('change', function(event) {
      var current = location.href;
      var urlElements = current.split('/');
      urlElements[4] = event.target.value;
      var newUrl = urlElements.join("/");
      location.href = newUrl;
    });
  </script>
  <ul class="arangodb-navmenu">
    <li class="active-tab">
      <a href="index.html" data-book="Manual">Manual</a>
    </li>
    <li>
      <a href="aql/index.html" data-book="AQL">AQL</a>
    </li>
    <li>
      <a href="http/index.html" data-book="HTTP">HTTP</a>
    </li>
    <li>
      <a href="drivers/index.html" data-book="Drivers">Drivers</a>
    </li>
    <li>
      <a href="oasis/index.html" data-book="Oasis">Oasis</a>
    </li>
    <li class="socialIcons" title="GitHub">
      <a href="https://github.com/ArangoDB/ArangoDB/issues" target="_blank">
        <i class="fa fa-github"></i>
      </a>
    </li>
    <li class="socialIcons" title="StackOverflow">
      <a href="https://stackoverflow.com/questions/tagged/arangodb" target="_blank">
        <i class="fa fa-stack-overflow"></i>
      </a>
    </li>
    <li class="socialIcons socialIcons-googlegroups" title="Google Groups">
      <a href="https://groups.google.com/forum/#!forum/arangodb" target="_blank">
        <img alt="Google Groups" src="../assets/googlegroupsIcon.png">
      </a>
    </li>
    <li class="socialIcons" title="Slack">
      <a href="https://slack.arangodb.com" target="_blank">
        <i class="fa fa-slack"></i>
      </a>
    </li>
    <li>
      <div class="searchbar">
        <div id="search-searchbar"></div>
      </div>
    </li>
    <li class="placeholder">
      <div style="width: 15px"></div>
    </li>
  </ul>
  <div id="search-hits"></div>
</div>
 
  <div class="book with-summary font-size-2 font-family-1">
    <div class="book-summary">
      <nav role="navigation">
    <ul class="summary">
  <li class="chapter">
  <a href="index.html">Introduction</a>
  </li>
  <li class="chapter">
  <a href="highlights.html">Highlights</a>
  </li>
  <li class="header">GETTING FAMILIAR</li>
  <li class="chapter">
  <a href="getting-started.html">Getting Started</a>
    <ul class="articles">
      <li class="chapter">
      <a href="getting-started-installation.html">Installation</a>
      </li>
      <li class="chapter">
      <a href="getting-started-authentication.html">Authentication</a>
      </li>
      <li class="chapter">
      <a href="getting-started-web-interface.html">Web Interface</a>
      </li>
      <li class="chapter">
      <a href="getting-started-databases-collections-documents.html">Databases, Collections and Documents</a>
      </li>
      <li class="chapter">
      <a href="getting-started-querying-the-database.html">Querying the Database</a>
      </li>
      <li class="chapter">
      <a href="getting-started-coming-from-sql.html">Coming from SQL</a>
      </li>
      <li class="chapter">
      <a href="getting-started-next-steps.html">Next Steps</a>
      </li>
    </ul>
  </li>
  <li class="chapter">
  <a href="tutorials.html">Tutorials</a>
    <ul class="articles">
      <li class="chapter">
      <a href="tutorials-reduce-memory-footprint.html">Reduce Memory Footprint</a>
      </li>
      <li class="chapter">
      <a href="tutorials-starter.html">ArangoDB Starter</a>
      </li>
      <li class="chapter">
      <a href="tutorials-dc2-dc.html">Datacenter to datacenter Replication</a>
      </li>
      <li class="chapter">
      <a href="tutorials-kubernetes.html">Kubernetes</a>
        <ul class="articles">
          <li class="chapter">
          <a href="tutorials-kubernetes-eks.html">Amazon EKS</a>
          </li>
          <li class="chapter">
          <a href="tutorials-kubernetes-gke.html">Google GKE</a>
          </li>
          <li class="chapter">
          <a href="tutorials-kubernetes-aks.html">Azure AKS</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="tutorials-kubernetes-dc2-dc.html">DC2DC on Kubernetes</a>
      </li>
    </ul>
  </li>
  <li class="chapter">
  <a href="programs.html">Programs & Tools</a>
    <ul class="articles">
      <li class="chapter">
      <a href="programs-arangod.html">ArangoDB Server</a>
        <ul class="articles">
          <li class="chapter">
          <a href="programs-arangod-options.html">Options</a>
            <ul class="articles">
              <li class="chapter">
              <a href="programs-arangod-global.html">Global</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-agency.html">Agency</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-arangosearch.html">ArangoSearch</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-audit.html">Audit</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-cache.html">Cache</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-backup.html">Backup</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-cluster.html">Cluster</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-compaction.html">Compaction</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-database.html">Database</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-foxx.html">Foxx</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-frontend.html">Frontend</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-http.html">HTTP</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-javascript.html">JavaScript</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-ldap.html">LDAP</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-log.html">Log</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-network.html">Network</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-nonce.html">Nonce</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-query.html">Query</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-random.html">Random</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-replication.html">Replication</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-rclone.html">Rclone</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-rocksdb.html">RocksDB</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-server.html">Server</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-ssl.html">SSL</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-tcp.html">TCP</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-temp.html">Temp</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-transaction.html">Transaction</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-ttl.html">TTL</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-vst.html">VST</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-wal.html">WAL</a>
              </li>
            </ul>
          </li>
          <li class="chapter">
          <a href="programs-arangod-env-vars.html">Environment variables</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="programs-web-interface.html">Web Interface</a>
        <ul class="articles">
          <li class="chapter">
          <a href="programs-web-interface-dashboard.html">Dashboard</a>
          </li>
          <li class="chapter">
          <a href="programs-web-interface-cluster.html">Cluster</a>
          </li>
          <li class="chapter">
          <a href="programs-web-interface-collections.html">Collections</a>
          </li>
          <li class="chapter">
          <a href="programs-web-interface-document.html">Document</a>
          </li>
          <li class="chapter">
          <a href="programs-web-interface-aql-editor.html">Queries</a>
          </li>
          <li class="chapter">
          <a href="programs-web-interface-graphs.html">Graphs</a>
          </li>
          <li class="chapter">
          <a href="programs-web-interface-services.html">Services</a>
          </li>
          <li class="chapter">
          <a href="programs-web-interface-users.html">Users</a>
          </li>
          <li class="chapter">
          <a href="programs-web-interface-logs.html">Logs</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="programs-arangosh.html">ArangoDB Shell</a>
        <ul class="articles">
          <li class="chapter">
          <a href="programs-arangosh-examples.html">Examples</a>
          </li>
          <li class="chapter">
          <a href="programs-arangosh-details.html">Details</a>
          </li>
          <li class="chapter">
          <a href="programs-arangosh-options.html">Options</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="programs-starter.html">ArangoDB Starter</a>
        <ul class="articles">
          <li class="chapter">
          <a href="programs-starter-options.html">Options</a>
          </li>
          <li class="chapter">
          <a href="programs-starter-security.html">Security</a>
          </li>
          <li class="chapter">
          <a href="programs-starter-architecture.html">Architecture</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="programs-arangodump.html">Arangodump</a>
        <ul class="articles">
          <li class="chapter">
          <a href="programs-arangodump-examples.html">Examples</a>
          </li>
          <li class="chapter">
          <a href="programs-arangodump-options.html">Options</a>
          </li>
          <li class="chapter">
          <a href="programs-arangodump-maskings.html">Maskings</a>
          </li>
          <li class="chapter">
          <a href="programs-arangodump-limitations.html">Limitations</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="programs-arangorestore.html">Arangorestore</a>
        <ul class="articles">
          <li class="chapter">
          <a href="programs-arangorestore-examples.html">Examples</a>
          </li>
          <li class="chapter">
          <a href="programs-arangorestore-fast-cluster-restore.html">Fast Cluster Restore</a>
          </li>
          <li class="chapter">
          <a href="programs-arangorestore-options.html">Options</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="programs-arangobackup.html">Arangobackup</a>
        <ul class="articles">
          <li class="chapter">
          <a href="programs-arangobackup-examples.html">Examples</a>
          </li>
          <li class="chapter">
          <a href="programs-arangobackup-options.html">Options</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="programs-arangoimport.html">Arangoimport</a>
        <ul class="articles">
          <li class="chapter">
          <a href="programs-arangoimport-examples-json.html">Examples JSON</a>
          </li>
          <li class="chapter">
          <a href="programs-arangoimport-examples-csv.html">Examples CSV</a>
          </li>
          <li class="chapter">
          <a href="programs-arangoimport-details.html">Details</a>
          </li>
          <li class="chapter">
          <a href="programs-arangoimport-options.html">Options</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="programs-arangoexport.html">Arangoexport</a>
        <ul class="articles">
          <li class="chapter">
          <a href="programs-arangoexport-examples.html">Examples</a>
          </li>
          <li class="chapter">
          <a href="programs-arangoexport-options.html">Options</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="programs-arangobench.html">Arangobench</a>
        <ul class="articles">
          <li class="chapter">
          <a href="programs-arangobench-examples.html">Examples</a>
          </li>
          <li class="chapter">
          <a href="programs-arangobench-options.html">Options</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="programs-arangoinspect.html">Arangoinspect</a>
        <ul class="articles">
          <li class="chapter">
          <a href="programs-arangoinspect-examples.html">Examples</a>
          </li>
          <li class="chapter">
          <a href="programs-arangoinspect-options.html">Options</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="programs-foxx-cli.html">Foxx CLI</a>
        <ul class="articles">
          <li class="chapter">
          <a href="programs-foxx-cli-details.html">Details</a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li class="header">CORE TOPICS</li>
  <li class="chapter">
  <a href="data-modeling.html">Data models & modeling</a>
    <ul class="articles">
      <li class="chapter">
      <a href="data-modeling-concepts.html">Concepts</a>
      </li>
      <li class="chapter">
      <a href="data-modeling-databases.html">Databases</a>
        <ul class="articles">
          <li class="chapter">
          <a href="data-modeling-databases-working-with.html">Working with Databases</a>
          </li>
          <li class="chapter">
          <a href="data-modeling-databases-notes.html">Notes about Databases</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="data-modeling-collections.html">Collections</a>
        <ul class="articles">
          <li class="chapter">
          <a href="data-modeling-collections-collection-methods.html">Collection Methods</a>
          </li>
          <li class="chapter">
          <a href="data-modeling-collections-database-methods.html">Database Methods</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="data-modeling-documents.html">Documents</a>
        <ul class="articles">
          <li class="chapter">
          <a href="data-modeling-documents-document-address.html">Basics and Terminology</a>
          </li>
          <li class="chapter">
          <a href="data-modeling-documents-document-methods.html">Collection Methods</a>
          </li>
          <li class="chapter">
          <a href="data-modeling-documents-database-methods.html">Database Methods</a>
          </li>
          <li class="chapter">
          <a href="data-modeling-documents-schema-validation.html">Schema Validation</a>
          </li>
          <li class="chapter">
          <a href="data-modeling-monetary-data-without-precision-loss.html">Monetary data without precision loss</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="data-modeling-graphs-vertices-edges.html">Graphs, Vertices & Edges</a>
      </li>
      <li class="chapter">
      <a href="data-modeling-views.html">Views</a>
        <ul class="articles">
          <li class="chapter">
          <a href="data-modeling-views-database-methods.html">Database Methods</a>
          </li>
          <li class="chapter">
          <a href="data-modeling-views-view-methods.html">View Methods</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="data-modeling-naming-conventions.html">Naming Conventions</a>
        <ul class="articles">
          <li class="chapter">
          <a href="data-modeling-naming-conventions-database-names.html">Database Names</a>
          </li>
          <li class="chapter">
          <a href="data-modeling-naming-conventions-collection-and-view-names.html">Collection and View Names</a>
          </li>
          <li class="chapter">
          <a href="data-modeling-naming-conventions-document-keys.html">Document Keys</a>
          </li>
          <li class="chapter">
          <a href="data-modeling-naming-conventions-attribute-names.html">Attribute Names</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="data-modeling-operational-factors.html">Operational Factors</a>
      </li>
    </ul>
  </li>
  <li class="chapter">
  <a href="indexing.html">Indexing</a>
    <ul class="articles">
      <li class="chapter">
      <a href="indexing-index-basics.html">Index Basics</a>
      </li>
      <li class="chapter">
      <a href="indexing-which-index.html">Which index to use when</a>
      </li>
      <li class="chapter">
      <a href="indexing-index-utilization.html">Index Utilization</a>
      </li>
      <li class="chapter">
      <a href="indexing-working-with-indexes.html">Working with Indexes</a>
        <ul class="articles">
          <li class="chapter">
          <a href="indexing-persistent.html">Persistent</a>
          </li>
          <li class="chapter">
          <a href="indexing-ttl.html">TTL Indexes</a>
          </li>
          <li class="chapter">
          <a href="indexing-fulltext.html">Fulltext Indexes</a>
          </li>
          <li class="chapter">
          <a href="indexing-geo.html">Geo-spatial Indexes</a>
          </li>
          <li class="chapter">
          <a href="indexing-vertex-centric.html">Vertex Centric Indexes</a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li class="chapter">
  <a href="transactions.html">Transactions</a>
    <ul class="articles">
      <li class="chapter">
      <a href="transactions-transaction-invocation.html">Transaction invocation</a>
      </li>
      <li class="chapter">
      <a href="transactions-passing.html">Passing parameters</a>
      </li>
      <li class="chapter">
      <a href="transactions-locking-and-isolation.html">Locking and isolation</a>
      </li>
      <li class="chapter">
      <a href="transactions-durability.html">Durability</a>
      </li>
      <li class="chapter">
      <a href="transactions-limitations.html">Limitations</a>
      </li>
    </ul>
  </li>
  <li class="chapter">
  <a href="graphs.html">Graphs</a>
    <ul class="articles">
      <li class="chapter">
      <a href="graphs-general-graphs.html">General Graphs</a>
        <ul class="articles">
          <li class="chapter">
          <a href="graphs-general-graphs-management.html">Graph Management</a>
          </li>
          <li class="chapter">
          <a href="graphs-general-graphs-functions.html">Graph Functions</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="graphs-satellite-graphs.html">SatelliteGraphs</a>
        <ul class="articles">
          <li class="chapter">
          <a href="graphs-satellite-graphs-management.html">Management</a>
          </li>
          <li class="chapter">
          <a href="graphs-satellite-graphs-details.html">Details</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="graphs-smart-graphs.html">SmartGraphs</a>
        <ul class="articles">
          <li class="chapter">
          <a href="graphs-smart-graphs-management.html">SmartGraph Management</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="graphs-traversals.html">Traversals</a>
        <ul class="articles">
          <li class="chapter">
          <a href="graphs-traversals-using-traversal-objects.html">Using Traversal Objects</a>
          </li>
          <li class="chapter">
          <a href="graphs-traversals-example-data.html">Example Data</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="graphs-edges.html">Working with Edges</a>
      </li>
      <li class="chapter">
      <a href="graphs-pregel.html">Pregel</a>
      </li>
    </ul>
  </li>
  <li class="chapter">
  <a href="arangosearch.html">ArangoSearch</a>
    <ul class="articles">
      <li class="chapter">
      <a href="arangosearch-views.html">Views</a>
      </li>
      <li class="chapter">
      <a href="arangosearch-analyzers.html">Analyzers</a>
      </li>
      <li class="chapter">
      <a href="arangosearch-examples.html">Examples</a>
      </li>
    </ul>
  </li>
  <li class="header">ADVANCED TOPICS</li>
  <li class="chapter">
  <a href="architecture.html">Architecture</a>
    <ul class="articles">
      <li class="chapter">
      <a href="architecture-deployment-modes.html">ArangoDB Deployment Modes</a>
        <ul class="articles">
          <li class="chapter">
          <a href="architecture-deployment-modes-single-instance.html">Single Instance</a>
          </li>
          <li class="chapter">
          <a href="architecture-deployment-modes-master-slave.html">Master/Slave</a>
            <ul class="articles">
              <li class="chapter">
              <a href="architecture-deployment-modes-master-slave-architecture.html">Architecture</a>
              </li>
              <li class="chapter">
              <a href="architecture-deployment-modes-master-slave-limitations.html">Limitations</a>
              </li>
            </ul>
          </li>
          <li class="chapter">
          <a href="architecture-deployment-modes-active-failover.html">Active Failover</a>
            <ul class="articles">
              <li class="chapter">
              <a href="architecture-deployment-modes-active-failover-architecture.html">Architecture</a>
              </li>
              <li class="chapter">
              <a href="architecture-deployment-modes-active-failover-limitations.html">Limitations</a>
              </li>
            </ul>
          </li>
          <li class="chapter">
          <a href="architecture-deployment-modes-cluster.html">Cluster</a>
            <ul class="articles">
              <li class="chapter">
              <a href="architecture-deployment-modes-cluster-architecture.html">Architecture</a>
              </li>
              <li class="chapter">
              <a href="architecture-deployment-modes-cluster-data-models.html">Data Models</a>
              </li>
              <li class="chapter">
              <a href="architecture-deployment-modes-cluster-sharding.html">Data Sharding</a>
              </li>
              <li class="chapter">
              <a href="architecture-deployment-modes-cluster-limitations.html">Limitations</a>
              </li>
            </ul>
          </li>
          <li class="chapter">
          <a href="architecture-deployment-modes-dc2-dc.html">Datacenter to datacenter replication</a>
            <ul class="articles">
              <li class="chapter">
              <a href="architecture-deployment-modes-dc2-dc-introduction.html">Introduction</a>
              </li>
              <li class="chapter">
              <a href="architecture-deployment-modes-dc2-dc-applicability.html">Applicability</a>
              </li>
              <li class="chapter">
              <a href="architecture-deployment-modes-dc2-dc-requirements.html">Requirements</a>
              </li>
              <li class="chapter">
              <a href="architecture-deployment-modes-dc2-dc-limitations.html">Limitations</a>
              </li>
            </ul>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="architecture-single-instance-vs-cluster.html">Single Instance vs. Cluster</a>
      </li>
      <li class="chapter">
      <a href="architecture-storage-engines.html">Storage Engines</a>
      </li>
      <li class="chapter">
      <a href="architecture-replication.html">Replication</a>
      </li>
      <li class="chapter">
      <a href="architecture-write-ahead-log.html">Write-ahead log</a>
      </li>
    </ul>
  </li>
  <li class="chapter">
  <a href="foxx.html">Foxx Microservices</a>
    <ul class="articles">
      <li class="chapter">
      <a href="foxx-getting-started.html">Getting started</a>
      </li>
      <li class="chapter">
      <a href="foxx-guides.html">Guides</a>
        <ul class="articles">
          <li class="chapter">
          <a href="foxx-guides-routing.html">Working with routers</a>
          </li>
          <li class="chapter">
          <a href="foxx-guides-collections.html">Working with collections</a>
          </li>
          <li class="chapter">
          <a href="foxx-guides-queries.html">Writing queries</a>
          </li>
          <li class="chapter">
          <a href="foxx-guides-development-mode.html">Development mode</a>
          </li>
          <li class="chapter">
          <a href="foxx-guides-testing.html">Testing Foxx services</a>
          </li>
          <li class="chapter">
          <a href="foxx-guides-cluster.html">Foxx in a cluster</a>
          </li>
          <li class="chapter">
          <a href="foxx-guides-scripts.html">Scripts and scheduling</a>
          </li>
          <li class="chapter">
          <a href="foxx-guides-bundled-node-modules.html">Using Node modules</a>
          </li>
          <li class="chapter">
          <a href="foxx-guides-webpack.html">Using Webpack with Foxx</a>
          </li>
          <li class="chapter">
          <a href="foxx-guides-auth.html">Authentication and sessions</a>
          </li>
          <li class="chapter">
          <a href="foxx-guides-dependencies.html">Linking services together</a>
          </li>
          <li class="chapter">
          <a href="foxx-guides-files.html">Working with files</a>
          </li>
          <li class="chapter">
          <a href="foxx-guides-making-requests.html">Making requests</a>
          </li>
          <li class="chapter">
          <a href="foxx-guides-browser.html">Access from the browser</a>
          </li>
          <li class="chapter">
          <a href="foxx-guides-legacy-mode.html">Working with 2.x services</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="foxx-reference.html">Reference</a>
        <ul class="articles">
          <li class="chapter">
          <a href="foxx-reference-manifest.html">Service manifest</a>
          </li>
          <li class="chapter">
          <a href="foxx-reference-context.html">Service context</a>
          </li>
          <li class="chapter">
          <a href="foxx-reference-configuration.html">Configuration</a>
          </li>
          <li class="chapter">
          <a href="foxx-reference-routers.html">Routers</a>
            <ul class="articles">
              <li class="chapter">
              <a href="foxx-reference-routers-endpoints.html">Endpoints</a>
              </li>
              <li class="chapter">
              <a href="foxx-reference-routers-middleware.html">Middleware</a>
              </li>
              <li class="chapter">
              <a href="foxx-reference-routers-request.html">Request</a>
              </li>
              <li class="chapter">
              <a href="foxx-reference-routers-response.html">Response</a>
              </li>
            </ul>
          </li>
          <li class="chapter">
          <a href="foxx-reference-sessions.html">Sessions middleware</a>
            <ul class="articles">
              <li class="chapter">
              <a href="foxx-reference-sessions-storages.html">Session storages</a>
                <ul class="articles">
                  <li class="chapter">
                  <a href="foxx-reference-sessions-storages-collection.html">Collection storage</a>
                  </li>
                  <li class="chapter">
                  <a href="foxx-reference-sessions-storages-jwt.html">JWT storage</a>
                  </li>
                </ul>
              </li>
              <li class="chapter">
              <a href="foxx-reference-sessions-transports.html">Session transports</a>
                <ul class="articles">
                  <li class="chapter">
                  <a href="foxx-reference-sessions-transports-cookie.html">Cookie transport</a>
                  </li>
                  <li class="chapter">
                  <a href="foxx-reference-sessions-transports-header.html">Header transport</a>
                  </li>
                </ul>
              </li>
            </ul>
          </li>
          <li class="chapter">
          <a href="foxx-reference-modules.html">Related modules</a>
            <ul class="articles">
              <li class="chapter">
              <a href="foxx-reference-modules-auth.html">Authentication</a>
              </li>
              <li class="chapter">
              <a href="foxx-reference-modules-oauth1.html">OAuth 1.0a</a>
              </li>
              <li class="chapter">
              <a href="foxx-reference-modules-oauth2.html">OAuth 2.0</a>
              </li>
              <li class="chapter">
              <a href="foxx-reference-modules-graph-ql.html">GraphQL</a>
              </li>
              <li class="chapter">
              <a href="foxx-reference-modules-queues.html">Queues</a>
              </li>
            </ul>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="foxx-deployment.html">Deployment</a>
      </li>
      <li class="chapter">
      <a href="foxx-migrating2x.html">Migrating 2.x services</a>
        <ul class="articles">
          <li class="chapter">
          <a href="foxx-migrating2x-wayback.html">Migrating from pre-2.8</a>
          </li>
          <li class="chapter">
          <a href="foxx-migrating2x-manifest.html">manifest.json</a>
          </li>
          <li class="chapter">
          <a href="foxx-migrating2x-context.html">applicationContext</a>
          </li>
          <li class="chapter">
          <a href="foxx-migrating2x-repositories.html">Repositories and Models</a>
          </li>
          <li class="chapter">
          <a href="foxx-migrating2x-controllers.html">Controllers</a>
            <ul class="articles">
              <li class="chapter">
              <a href="foxx-migrating2x-controllers-endpoints.html">Request context</a>
              </li>
              <li class="chapter">
              <a href="foxx-migrating2x-controllers-errors.html">Error handling</a>
              </li>
              <li class="chapter">
              <a href="foxx-migrating2x-controllers-middleware.html">Before/After/Around</a>
              </li>
              <li class="chapter">
              <a href="foxx-migrating2x-controllers-request.html">Request object</a>
              </li>
              <li class="chapter">
              <a href="foxx-migrating2x-controllers-response.html">Response object</a>
              </li>
              <li class="chapter">
              <a href="foxx-migrating2x-controllers-io-c.html">Dependency Injection</a>
              </li>
            </ul>
          </li>
          <li class="chapter">
          <a href="foxx-migrating2x-sessions.html">Sessions</a>
          </li>
          <li class="chapter">
          <a href="foxx-migrating2x-auth.html">Auth and OAuth2</a>
          </li>
          <li class="chapter">
          <a href="foxx-migrating2x-queries.html">Foxx Queries</a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li class="chapter">
  <a href="satellites.html">SatelliteCollections</a>
  </li>
  <li class="chapter">
  <a href="smartjoins.html">SmartJoins</a>
  </li>
  <li class="header">OPERATIONS</li>
  <li class="chapter">
  <a href="installation.html">Installation</a>
    <ul class="articles">
      <li class="chapter">
      <a href="installation-linux.html">Linux</a>
        <ul class="articles">
          <li class="chapter">
          <a href="installation-linux-osconfiguration.html">Operating System Configuration</a>
          </li>
          <li class="chapter">
          <a href="installation-linux-ostuning-scripts.html">Linux OS Tuning Script Examples</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="installation-mac-osx.html">macOS</a>
      </li>
      <li class="chapter">
      <a href="installation-windows.html">Windows</a>
      </li>
      <li class="chapter">
      <a href="installation-compiling.html">Compiling</a>
        <ul class="articles">
          <li class="chapter">
          <a href="installation-compiling-debian.html">Compile on Debian</a>
          </li>
          <li class="chapter">
          <a href="installation-compiling-windows.html">Compile on Windows</a>
          </li>
          <li class="chapter">
          <a href="installation-compiling-running-custom-build.html">Running Custom Build</a>
          </li>
          <li class="chapter">
          <a href="installation-compiling-jemalloc.html">Recompiling jemalloc</a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li class="chapter">
  <a href="uninstallation.html">Uninstallation</a>
  </li>
  <li class="chapter">
  <a href="deployment.html">Deployment</a>
    <ul class="articles">
      <li class="chapter">
      <a href="deployment-modes.html">By ArangoDB Deployment Modes</a>
        <ul class="articles">
          <li class="chapter">
          <a href="deployment-single-instance.html">Single Instance</a>
            <ul class="articles">
              <li class="chapter">
              <a href="deployment-single-instance-using-the-starter.html">Using the ArangoDB Starter</a>
              </li>
              <li class="chapter">
              <a href="deployment-single-instance-manual-start.html">Manual Start</a>
              </li>
            </ul>
          </li>
          <li class="chapter">
          <a href="deployment-master-slave.html">Master/Slave</a>
            <ul class="articles">
              <li class="chapter">
              <a href="deployment-master-slave-manual-start.html">Manual Start</a>
              </li>
            </ul>
          </li>
          <li class="chapter">
          <a href="deployment-active-failover.html">Active Failover</a>
            <ul class="articles">
              <li class="chapter">
              <a href="deployment-active-failover-using-the-starter.html">Using the ArangoDB Starter</a>
              </li>
              <li class="chapter">
              <a href="deployment-active-failover-manual-start.html">Manual Start</a>
              </li>
            </ul>
          </li>
          <li class="chapter">
          <a href="deployment-cluster.html">Cluster</a>
            <ul class="articles">
              <li class="chapter">
              <a href="deployment-cluster-preliminary-information.html">Preliminary Information</a>
              </li>
              <li class="chapter">
              <a href="deployment-cluster-using-the-starter.html">Using the ArangoDB Starter</a>
              </li>
              <li class="chapter">
              <a href="deployment-cluster-manual-start.html">Manual Start</a>
              </li>
              <li class="chapter">
              <a href="deployment-cluster-kubernetes.html">Kubernetes</a>
              </li>
            </ul>
          </li>
          <li class="chapter">
          <a href="deployment-dc2-dc.html">Multiple Datacenters</a>
            <ul class="articles">
              <li class="chapter">
              <a href="deployment-dc2-dc-cluster.html">Cluster</a>
              </li>
              <li class="chapter">
              <a href="deployment-dc2-dc-arango-sync-master.html">ArangoSync Master</a>
              </li>
              <li class="chapter">
              <a href="deployment-dc2-dc-arango-sync-workers.html">ArangoSync Workers</a>
              </li>
              <li class="chapter">
              <a href="deployment-dc2-dc-prometheus-grafana.html">Prometheus & Grafana</a>
              </li>
            </ul>
          </li>
          <li class="chapter">
          <a href="deployment-standalone-agency.html">Standalone Agency</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="deployment-technology.html">By Technology</a>
        <ul class="articles">
          <li class="chapter">
          <a href="deployment-manually.html">Manually</a>
          </li>
          <li class="chapter">
          <a href="deployment-arango-dbstarter.html">ArangoDB Starter</a>
          </li>
          <li class="chapter">
          <a href="deployment-docker.html">Docker</a>
          </li>
          <li class="chapter">
          <a href="deployment-kubernetes.html">Kubernetes</a>
            <ul class="articles">
              <li class="chapter">
              <a href="deployment-kubernetes-usage.html">Using the Operator</a>
              </li>
              <li class="chapter">
              <a href="deployment-kubernetes-dashboards.html">Dashboards</a>
              </li>
              <li class="chapter">
              <a href="deployment-kubernetes-deployment-resource.html">Deployment Resource Reference</a>
              </li>
              <li class="chapter">
              <a href="deployment-kubernetes-backup-resource.html">Backup Resource</a>
              </li>
              <li class="chapter">
              <a href="deployment-kubernetes-backup-policy-resource.html">BackupPolicy Resource</a>
              </li>
              <li class="chapter">
              <a href="deployment-kubernetes-driver-configuration.html">Driver Configuration</a>
              </li>
              <li class="chapter">
              <a href="deployment-kubernetes-helm.html">Helm</a>
              </li>
              <li class="chapter">
              <a href="deployment-kubernetes-authentication.html">Authentication</a>
              </li>
              <li class="chapter">
              <a href="deployment-kubernetes-scaling.html">Scaling</a>
              </li>
              <li class="chapter">
              <a href="deployment-kubernetes-drain.html">Draining Nodes</a>
              </li>
              <li class="chapter">
              <a href="deployment-kubernetes-upgrading.html">Upgrading</a>
              </li>
              <li class="chapter">
              <a href="deployment-kubernetes-config-and-secrets.html">ArangoDB Configuration & Secrets</a>
              </li>
              <li class="chapter">
              <a href="deployment-kubernetes-metrics.html">Metrics</a>
              </li>
              <li class="chapter">
              <a href="deployment-kubernetes-services-and-load-balancer.html">Services & Load balancer</a>
              </li>
              <li class="chapter">
              <a href="deployment-kubernetes-deployment-replication-resource.html">Deployment Replication Resource Reference</a>
              </li>
              <li class="chapter">
              <a href="deployment-kubernetes-storage.html">Storage</a>
              </li>
              <li class="chapter">
              <a href="deployment-kubernetes-storage-resource.html">Storage Resource</a>
              </li>
              <li class="chapter">
              <a href="deployment-kubernetes-tls.html">TLS</a>
              </li>
              <li class="chapter">
              <a href="deployment-kubernetes-troubleshooting.html">Troubleshooting</a>
              </li>
            </ul>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="deployment-cloud.html">In the Cloud</a>
        <ul class="articles">
          <li class="chapter">
          <a href="deployment-cloud-aws.html">AWS</a>
          </li>
          <li class="chapter">
          <a href="deployment-cloud-azure.html">Azure</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="deployment-production-checklist.html">Production Checklist</a>
      </li>
      <li class="chapter">
      <a href="deployment-migrating-single-instance-cluster.html">Migrating Single Instance to Cluster</a>
      </li>
    </ul>
  </li>
  <li class="chapter">
  <a href="backup-restore.html">Backup & Restore</a>
  </li>
  <li class="chapter">
  <a href="upgrading.html">Upgrading</a>
    <ul class="articles">
      <li class="chapter">
      <a href="upgrading-general-info.html">General Upgrade Information</a>
      </li>
      <li class="chapter">
      <a href="upgrading-community-to-enterprise.html">Community to Enterprise Upgrade</a>
      </li>
      <li class="chapter">
      <a href="upgrading-osspecific-info.html">OS-specific Information</a>
        <ul class="articles">
          <li class="chapter">
          <a href="upgrading-osspecific-info-linux.html">Upgrading on Linux</a>
          </li>
          <li class="chapter">
          <a href="upgrading-osspecific-info-mac-os.html">Upgrading on macOS</a>
          </li>
          <li class="chapter">
          <a href="upgrading-osspecific-info-windows.html">Upgrading on Windows</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="upgrading-starter.html">Upgrading Starter Deployments</a>
      </li>
      <li class="chapter">
      <a href="upgrading-manually.html">Upgrading Manual Deployments</a>
        <ul class="articles">
          <li class="chapter">
          <a href="upgrading-manually-active-failover.html">Upgrading an Active Failover deployment</a>
          </li>
          <li class="chapter">
          <a href="upgrading-manually-cluster.html">Upgrading a Cluster</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="upgrading-kubernetes.html">Upgrading Kubernetes Deployments</a>
      </li>
      <li class="chapter">
      <a href="upgrading-version-specific.html">Version Specific Upgrade Information</a>
        <ul class="articles">
          <li class="chapter">
          <a href="upgrading-version-specific-upgrading34.html">Upgrading to 3.4</a>
          </li>
          <li class="chapter">
          <a href="upgrading-version-specific-upgrading33.html">Upgrading to 3.3</a>
          </li>
          <li class="chapter">
          <a href="upgrading-version-specific-upgrading32.html">Upgrading to 3.2</a>
          </li>
          <li class="chapter">
          <a href="upgrading-version-specific-upgrading31.html">Upgrading to 3.1</a>
          </li>
          <li class="chapter">
          <a href="upgrading-version-specific-upgrading30.html">Upgrading to 3.0</a>
          </li>
          <li class="chapter">
          <a href="upgrading-version-specific-upgrading28.html">Upgrading to 2.8</a>
          </li>
          <li class="chapter">
          <a href="upgrading-version-specific-upgrading26.html">Upgrading to 2.6</a>
          </li>
          <li class="chapter">
          <a href="upgrading-version-specific-upgrading25.html">Upgrading to 2.5</a>
          </li>
          <li class="chapter">
          <a href="upgrading-version-specific-upgrading24.html">Upgrading to 2.4</a>
          </li>
          <li class="chapter">
          <a href="upgrading-version-specific-upgrading23.html">Upgrading to 2.3</a>
          </li>
          <li class="chapter">
          <a href="upgrading-version-specific-upgrading22.html">Upgrading to 2.2</a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li class="chapter">
  <a href="downgrading.html">Downgrading</a>
  </li>
  <li class="chapter">
  <a href="scaling.html">Scaling</a>
  </li>
  <li class="chapter">
  <a href="administration.html">Administration</a>
    <ul class="articles">
      <li class="chapter">
      <a href="administration-configuration.html">Configuration</a>
      </li>
      <li class="chapter">
      <a href="administration-import-export.html">Import & Export</a>
      </li>
      <li class="chapter">
      <a href="administration-managing-users.html">User Management</a>
        <ul class="articles">
          <li class="chapter">
          <a href="administration-managing-users-in-arangosh.html">In Arangosh</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="administration-engine-switch-engine.html">Switch Storage Engine</a>
      </li>
      <li class="chapter">
      <a href="administration-master-slave.html">Master/Slave</a>
        <ul class="articles">
          <li class="chapter">
          <a href="administration-master-slave-setting-up.html">Setting up</a>
            <ul class="articles">
              <li class="chapter">
              <a href="administration-master-slave-replication-applier.html">Replication Applier</a>
              </li>
              <li class="chapter">
              <a href="administration-master-slave-database-setup.html">Per-Database Setup</a>
              </li>
              <li class="chapter">
              <a href="administration-master-slave-server-level-setup.html">Server-Level Setup</a>
              </li>
              <li class="chapter">
              <a href="administration-master-slave-initialize-from-backup.html">Speeding Up Slave Initialization</a>
              </li>
            </ul>
          </li>
          <li class="chapter">
          <a href="administration-master-slave-syncing-collections.html">Syncing Collections</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="administration-active-failover.html">Active Failover</a>
      </li>
      <li class="chapter">
      <a href="administration-cluster.html">Cluster</a>
      </li>
      <li class="chapter">
      <a href="administration-dc2-dc.html">Datacenter to datacenter replication</a>
      </li>
      <li class="chapter">
      <a href="administration-starter.html">ArangoDB Starter Administration</a>
        <ul class="articles">
          <li class="chapter">
          <a href="administration-starter-removal.html">Removal Procedure</a>
          </li>
          <li class="chapter">
          <a href="administration-starter-recovery.html">Recovery Procedure</a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li class="chapter">
  <a href="security.html">Security</a>
    <ul class="articles">
      <li class="chapter">
      <a href="security-security-options.html">Security Options</a>
      </li>
      <li class="chapter">
      <a href="security-change-root-password.html">Change Root Password</a>
      </li>
      <li class="chapter">
      <a href="security-encryption.html">Encryption at Rest</a>
      </li>
      <li class="chapter">
      <a href="security-auditing.html">Auditing</a>
        <ul class="articles">
          <li class="chapter">
          <a href="security-auditing-audit-configuration.html">Configuration</a>
          </li>
          <li class="chapter">
          <a href="security-auditing-audit-events.html">Events</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="security-starter.html">Securing Starter Deployments</a>
      </li>
      <li class="chapter">
      <a href="security-dc2-dc.html">Datacenter to datacenter replication</a>
      </li>
    </ul>
  </li>
  <li class="chapter">
  <a href="monitoring.html">Monitoring</a>
    <ul class="articles">
      <li class="chapter">
      <a href="monitoring-log-levels.html">Log Levels</a>
      </li>
      <li class="chapter">
      <a href="monitoring-dc2-dc.html">Datacenter to datacenter replication</a>
      </li>
      <li class="chapter">
      <a href="monitoring-collectd.html">Collectd</a>
        <ul class="articles">
          <li class="chapter">
          <a href="monitoring-collectd-slave-status.html">Replication Slaves</a>
          </li>
          <li class="chapter">
          <a href="monitoring-collectd-traffic-with-ipaccounting.html">Network usage</a>
          </li>
          <li class="chapter">
          <a href="monitoring-collectd-other-relevant-metrics.html">More metrics</a>
          </li>
          <li class="chapter">
          <a href="monitoring-collectd-foxx-apps.html">Monitoring Foxx</a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li class="chapter">
  <a href="troubleshooting.html">Troubleshooting</a>
    <ul class="articles">
      <li class="chapter">
      <a href="troubleshooting-arangod.html">arangod</a>
      </li>
      <li class="chapter">
      <a href="troubleshooting-emergency-console.html">Emergency Console</a>
      </li>
      <li class="chapter">
      <a href="troubleshooting-cluster.html">Cluster</a>
        <ul class="articles">
          <li class="chapter">
          <a href="troubleshooting-cluster-agency-dump.html">Agency Dump</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="troubleshooting-dc2-dc.html">Datacenter to datacenter replication</a>
      </li>
    </ul>
  </li>
  <li><hr/></li>
  <li class="chapter selected">
  <a href="release-notes.html">Release Notes</a>
    <ul class="articles">
      <li class="chapter selected">
      <a href="release-notes-37.html">Version 3.7</a>
        <ul class="articles">
          <li class="chapter selected active">
          <a href="release-notes-new-features37.html">What's New in 3.7</a>
          </li>
          <li class="chapter">
          <a href="release-notes-known-issues37.html">Known Issues in 3.7</a>
          </li>
          <li class="chapter">
          <a href="release-notes-upgrading-changes37.html">Incompatible changes in 3.7</a>
          </li>
          <li class="chapter">
          <a href="release-notes-api-changes37.html">API changes in 3.7</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="release-notes-36.html">Version 3.6</a>
        <ul class="articles">
          <li class="chapter">
          <a href="release-notes-new-features36.html">What's New in 3.6</a>
          </li>
          <li class="chapter">
          <a href="release-notes-known-issues36.html">Known Issues in 3.6</a>
          </li>
          <li class="chapter">
          <a href="release-notes-upgrading-changes36.html">Incompatible changes in 3.6</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="release-notes-35.html">Version 3.5</a>
        <ul class="articles">
          <li class="chapter">
          <a href="release-notes-new-features35.html">What's New in 3.5</a>
          </li>
          <li class="chapter">
          <a href="release-notes-known-issues35.html">Known Issues in 3.5</a>
          </li>
          <li class="chapter">
          <a href="release-notes-upgrading-changes35.html">Incompatible changes in 3.5</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="release-notes-34.html">Version 3.4</a>
        <ul class="articles">
          <li class="chapter">
          <a href="release-notes-new-features34.html">What's New in 3.4</a>
          </li>
          <li class="chapter">
          <a href="release-notes-known-issues34.html">Known Issues in 3.4</a>
          </li>
          <li class="chapter">
          <a href="release-notes-upgrading-changes34.html">Incompatible changes in 3.4</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="release-notes-33.html">Version 3.3</a>
        <ul class="articles">
          <li class="chapter">
          <a href="release-notes-new-features33.html">What's New in 3.3</a>
          </li>
          <li class="chapter">
          <a href="release-notes-known-issues33.html">Known Issues in 3.3</a>
          </li>
          <li class="chapter">
          <a href="release-notes-upgrading-changes33.html">Incompatible changes in 3.3</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="release-notes-32.html">Version 3.2</a>
        <ul class="articles">
          <li class="chapter">
          <a href="release-notes-new-features32.html">What's New in 3.2</a>
          </li>
          <li class="chapter">
          <a href="release-notes-known-issues32.html">Known Issues in 3.2</a>
          </li>
          <li class="chapter">
          <a href="release-notes-upgrading-changes32.html">Incompatible changes in 3.2</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="release-notes-31.html">Version 3.1</a>
        <ul class="articles">
          <li class="chapter">
          <a href="release-notes-new-features31.html">What's New in 3.1</a>
          </li>
          <li class="chapter">
          <a href="release-notes-upgrading-changes31.html">Incompatible changes in 3.1</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="release-notes-30.html">Version 3.0</a>
        <ul class="articles">
          <li class="chapter">
          <a href="release-notes-new-features30.html">What's New in 3.0</a>
          </li>
          <li class="chapter">
          <a href="release-notes-upgrading-changes30.html">Incompatible changes in 3.0</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="release-notes-28.html">Version 2.8</a>
        <ul class="articles">
          <li class="chapter">
          <a href="release-notes-new-features28.html">What's New in 2.8</a>
          </li>
          <li class="chapter">
          <a href="release-notes-upgrading-changes28.html">Incompatible changes in 2.8</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="release-notes-27.html">Version 2.7</a>
        <ul class="articles">
          <li class="chapter">
          <a href="release-notes-new-features27.html">What's New in 2.7</a>
          </li>
          <li class="chapter">
          <a href="release-notes-upgrading-changes27.html">Incompatible changes in 2.7</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="release-notes-26.html">Version 2.6</a>
        <ul class="articles">
          <li class="chapter">
          <a href="release-notes-new-features26.html">What's New in 2.6</a>
          </li>
          <li class="chapter">
          <a href="release-notes-upgrading-changes26.html">Incompatible changes in 2.6</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="release-notes-25.html">Version 2.5</a>
        <ul class="articles">
          <li class="chapter">
          <a href="release-notes-new-features25.html">What's New in 2.5</a>
          </li>
          <li class="chapter">
          <a href="release-notes-upgrading-changes25.html">Incompatible changes in 2.5</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="release-notes-24.html">Version 2.4</a>
        <ul class="articles">
          <li class="chapter">
          <a href="release-notes-new-features24.html">What's New in 2.4</a>
          </li>
          <li class="chapter">
          <a href="release-notes-upgrading-changes24.html">Incompatible changes in 2.4</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="release-notes-23.html">Version 2.3</a>
        <ul class="articles">
          <li class="chapter">
          <a href="release-notes-new-features23.html">What's New in 2.3</a>
          </li>
          <li class="chapter">
          <a href="release-notes-upgrading-changes23.html">Incompatible changes in 2.3</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="release-notes-22.html">Version 2.2</a>
        <ul class="articles">
          <li class="chapter">
          <a href="release-notes-new-features22.html">What's New in 2.2</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="release-notes-21.html">Version 2.1</a>
        <ul class="articles">
          <li class="chapter">
          <a href="release-notes-new-features21.html">What's New in 2.1</a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li class="chapter">
  <a href="appendix.html">Appendix</a>
    <ul class="articles">
      <li class="chapter">
      <a href="appendix-references.html">References</a>
        <ul class="articles">
          <li class="chapter">
          <a href="appendix-references-dbobject.html">db</a>
          </li>
          <li class="chapter">
          <a href="appendix-references-collection-object.html">collection</a>
          </li>
          <li class="chapter">
          <a href="appendix-references-cursor-object.html">cursor</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="appendix-java-script-modules.html">JavaScript Modules</a>
        <ul class="articles">
          <li class="chapter">
          <a href="appendix-java-script-modules-arango-db.html">@arangodb</a>
          </li>
          <li class="chapter">
          <a href="appendix-java-script-modules-analyzers.html">analyzers</a>
          </li>
          <li class="chapter">
          <a href="appendix-java-script-modules-console.html">console</a>
          </li>
          <li class="chapter">
          <a href="appendix-java-script-modules-crypto.html">crypto</a>
          </li>
          <li class="chapter">
          <a href="appendix-java-script-modules-file-system.html">fs</a>
          </li>
          <li class="chapter">
          <a href="appendix-java-script-modules-request.html">request</a>
          </li>
          <li class="chapter">
          <a href="appendix-java-script-modules-actions.html">actions</a>
          </li>
          <li class="chapter">
          <a href="appendix-java-script-modules-queries.html">queries</a>
          </li>
          <li class="chapter">
          <a href="appendix-java-script-modules-wal.html">Write-ahead log</a>
          </li>
          <li class="chapter">
          <a href="appendix-java-script-modules-tasks.html">Task Management</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="appendix-deprecated.html">Deprecated</a>
        <ul class="articles">
          <li class="chapter">
          <a href="appendix-deprecated-simple-queries.html">Simple Queries</a>
            <ul class="articles">
              <li class="chapter">
              <a href="appendix-deprecated-simple-queries-pagination.html">Pagination</a>
              </li>
              <li class="chapter">
              <a href="appendix-deprecated-simple-queries-modification-queries.html">Modification Queries</a>
              </li>
              <li class="chapter">
              <a href="appendix-deprecated-simple-queries-geo-queries.html">Geo Queries</a>
              </li>
              <li class="chapter">
              <a href="appendix-deprecated-simple-queries-fulltext-queries.html">Fulltext Queries</a>
              </li>
            </ul>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="appendix-error-codes.html">Error codes and meanings</a>
      </li>
      <li class="chapter">
      <a href="appendix-glossary.html">Glossary</a>
      </li>
    </ul>
  </li>
</ul>

</nav>
    </div>
    <div class="book-body">
      <script type="text/javascript">
          var availableVersions = ["devel","stable",];
          versionSwitcherSetAvailable(availableVersions);
      </script>
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <a class="btn pull-left js-toolbar-action hamburger" aria-label=""><i class="fa fa-align-justify"></i></a>
          <a class="btn pull-left js-toolbar-action" aria-label="" href="https://github.com/arangodb/docs/edit/master/3.7/release-notes-new-features37.md" target="_blank"><i class="fa fa-github"></i> Contribute</a>
        </div>
        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">
            <section class="normal markdown-section">
              <h1 id="features-and-improvements-in-arangodb-37">Features and Improvements in ArangoDB 3.7</h1>

<p>The following list shows in detail which features have been added or improved in
ArangoDB 3.7. ArangoDB 3.7 also contains several bug fixes that are not listed
here.</p>

<h2 id="arangosearch">ArangoSearch</h2>

<h3 id="wildcard-search">Wildcard search</h3>

<p>ArangoSearch was extended to support the <code class="language-plaintext highlighter-rouge">LIKE()</code> function and <code class="language-plaintext highlighter-rouge">LIKE</code> operator
in AQL. This allows to check whether the given search pattern is contained in
specified attribute using wildcard matching (<code class="language-plaintext highlighter-rouge">_</code> for any single character and
<code class="language-plaintext highlighter-rouge">%</code> for any sequence of characters including none):</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">FOR</span> <span class="nx">doc</span> <span class="nx">IN</span> <span class="nx">viewName</span>
  <span class="nx">SEARCH</span> <span class="nx">ANALYZER</span><span class="p">(</span><span class="nx">LIKE</span><span class="p">(</span><span class="nx">doc</span><span class="p">.</span><span class="nx">text</span><span class="p">,</span> <span class="dl">"</span><span class="s2">foo%b_r</span><span class="dl">"</span><span class="p">),</span> <span class="dl">"</span><span class="s2">text_en</span><span class="dl">"</span><span class="p">)</span>
  <span class="c1">// or</span>
  <span class="nx">SEARCH</span> <span class="nx">ANALYZER</span><span class="p">(</span><span class="nx">doc</span><span class="p">.</span><span class="nx">text</span> <span class="nx">LIKE</span> <span class="dl">"</span><span class="s2">foo%b_r</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">text_en</span><span class="dl">"</span><span class="p">)</span>
  <span class="c1">// will match "foobar", "fooANYTHINGbor" etc.</span>
  <span class="nx">RETURN</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">text</span>
</code></pre></div></div>

<p>See <a href="https://www.arangodb.com/docs/stable/aql/functions-arangosearch.html#like">ArangoSearch functions</a></p>

<h3 id="covering-indexes">Covering Indexes</h3>

<p>It is possible to directly store the values of document attributes in View
indexes now via a new View property <code class="language-plaintext highlighter-rouge">storedValues</code> (not to be confused with
the existing <code class="language-plaintext highlighter-rouge">storeValues</code>).</p>

<p>View indexes may fully cover <code class="language-plaintext highlighter-rouge">SEARCH</code> queries for improved performance.
While late document materialization reduces the amount of fetched documents,
this new optimization can avoid to access the storage engine entirely.</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"articles"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"categories"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"primarySort"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w"> </span><span class="nl">"field"</span><span class="p">:</span><span class="w"> </span><span class="s2">"publishedAt"</span><span class="p">,</span><span class="w"> </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"desc"</span><span class="w"> </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"storedValues"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w"> </span><span class="nl">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"title"</span><span class="p">,</span><span class="w"> </span><span class="s2">"categories"</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="err">...</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>In above View definition, the document attribute <em>categories</em> is indexed for
searching, <em>publishedAt</em> is used as primary sort order and <em>title</em> as well as
<em>categories</em> are stored in the View using the new <code class="language-plaintext highlighter-rouge">storedValues</code> property.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">FOR</span> <span class="nx">doc</span> <span class="nx">IN</span> <span class="nx">articlesView</span>
  <span class="nx">SEARCH</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">categories</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">recipes</span><span class="dl">"</span>
  <span class="nx">SORT</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">publishedAt</span> <span class="nx">DESC</span>
  <span class="nx">RETURN</span> <span class="p">{</span>
    <span class="nl">title</span><span class="p">:</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">title</span><span class="p">,</span>
    <span class="nx">date</span><span class="p">:</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">publishedAt</span><span class="p">,</span>
    <span class="nx">tags</span><span class="p">:</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">categories</span>
  <span class="p">}</span>
</code></pre></div></div>

<p>The query searches for articles which contain a certain tag in the <em>categories</em>
array and returns title, date and tags. All three values are stored in the View
(<code class="language-plaintext highlighter-rouge">publishedAt</code> via <code class="language-plaintext highlighter-rouge">primarySort</code> and the two other via <code class="language-plaintext highlighter-rouge">storedValues</code>), thus
no documents need to be fetched from the storage engine to answer the query.
This is shown in the execution plan as a comment to the <em>EnumerateViewNode</em>:
<code class="language-plaintext highlighter-rouge">/* view query without materialization */</code></p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">Execution</span> <span class="nx">plan</span><span class="p">:</span>
 <span class="nx">Id</span>   <span class="nx">NodeType</span>            <span class="nx">Est</span><span class="p">.</span>   <span class="nx">Comment</span>
  <span class="mi">1</span>   <span class="nx">SingletonNode</span>          <span class="mi">1</span>   <span class="o">*</span> <span class="nx">ROOT</span>
  <span class="mi">2</span>   <span class="nx">EnumerateViewNode</span>      <span class="mi">1</span>     <span class="o">-</span> <span class="nx">FOR</span> <span class="nx">doc</span> <span class="nx">IN</span> <span class="nx">articlesView</span> <span class="nx">SEARCH</span> <span class="p">(</span><span class="nx">doc</span><span class="p">.</span><span class="s2">`categories`</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">recipes</span><span class="dl">"</span><span class="p">)</span> <span class="nx">SORT</span> <span class="nx">doc</span><span class="p">.</span><span class="s2">`publishedAt`</span> <span class="nx">DESC</span> <span class="nx">LET</span> <span class="err">#</span><span class="mi">1</span> <span class="o">=</span> <span class="nx">doc</span><span class="p">.</span><span class="s2">`publishedAt`</span> <span class="nx">LET</span> <span class="err">#</span><span class="mi">7</span> <span class="o">=</span> <span class="nx">doc</span><span class="p">.</span><span class="s2">`categories`</span> <span class="nx">LET</span> <span class="err">#</span><span class="mi">5</span> <span class="o">=</span> <span class="nx">doc</span><span class="p">.</span><span class="s2">`title`</span>   <span class="cm">/* view query without materialization */</span>
  <span class="mi">5</span>   <span class="nx">CalculationNode</span>        <span class="mi">1</span>       <span class="o">-</span> <span class="nx">LET</span> <span class="err">#</span><span class="mi">3</span> <span class="o">=</span> <span class="p">{</span> <span class="dl">"</span><span class="s2">title</span><span class="dl">"</span> <span class="p">:</span> <span class="err">#</span><span class="mi">5</span><span class="p">,</span> <span class="dl">"</span><span class="s2">date</span><span class="dl">"</span> <span class="p">:</span> <span class="err">#</span><span class="mi">1</span><span class="p">,</span> <span class="dl">"</span><span class="s2">tags</span><span class="dl">"</span> <span class="p">:</span> <span class="err">#</span><span class="mi">7</span> <span class="p">}</span>   <span class="cm">/* simple expression */</span>
  <span class="mi">6</span>   <span class="nx">ReturnNode</span>             <span class="mi">1</span>       <span class="o">-</span> <span class="nx">RETURN</span> <span class="err">#</span><span class="mi">3</span>

<span class="nx">Indexes</span> <span class="nx">used</span><span class="p">:</span>
 <span class="nx">none</span>

<span class="nx">Optimization</span> <span class="nx">rules</span> <span class="nx">applied</span><span class="p">:</span>
 <span class="nx">Id</span>   <span class="nx">RuleName</span>
  <span class="mi">1</span>   <span class="nx">move</span><span class="o">-</span><span class="nx">calculations</span><span class="o">-</span><span class="nx">up</span>
  <span class="mi">2</span>   <span class="nx">move</span><span class="o">-</span><span class="nx">calculations</span><span class="o">-</span><span class="nx">up</span><span class="o">-</span><span class="mi">2</span>
  <span class="mi">3</span>   <span class="nx">handle</span><span class="o">-</span><span class="nx">arangosearch</span><span class="o">-</span><span class="nx">views</span>
</code></pre></div></div>

<p>See <a href="arangosearch-views.html#view-properties">ArangoSearch Views</a>.</p>

<h3 id="stemming-support-for-more-languages">Stemming support for more languages</h3>

<p>The Snowball library was updated to the latest version 2, adding stemming
support for the following languages:</p>

<ul>
  <li>Arabic (<code class="language-plaintext highlighter-rouge">ar</code>)</li>
  <li>Basque (<code class="language-plaintext highlighter-rouge">eu</code>)</li>
  <li>Catalan (<code class="language-plaintext highlighter-rouge">ca</code>)</li>
  <li>Danish (<code class="language-plaintext highlighter-rouge">da</code>)</li>
  <li>Greek (<code class="language-plaintext highlighter-rouge">el</code>)</li>
  <li>Hindi (<code class="language-plaintext highlighter-rouge">hi</code>)</li>
  <li>Hungarian (<code class="language-plaintext highlighter-rouge">hu</code>)</li>
  <li>Indonesian (<code class="language-plaintext highlighter-rouge">id</code>)</li>
  <li>Irish (<code class="language-plaintext highlighter-rouge">ga</code>)</li>
  <li>Lithuanian (<code class="language-plaintext highlighter-rouge">lt</code>)</li>
  <li>Nepali (<code class="language-plaintext highlighter-rouge">ne</code>)</li>
  <li>Romanian (<code class="language-plaintext highlighter-rouge">ro</code>)</li>
  <li>Serbian (<code class="language-plaintext highlighter-rouge">sr</code>)</li>
  <li>Tamil (<code class="language-plaintext highlighter-rouge">ta</code>)</li>
  <li>Turkish (<code class="language-plaintext highlighter-rouge">tr</code>)</li>
</ul>

<p>Create a custom Analyzer and set the <code class="language-plaintext highlighter-rouge">locale</code> accordingly in the properties,
e.g. <code class="language-plaintext highlighter-rouge">"el.utf-8"</code> for Greek. Arangosh example:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">analyzers</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">@arangodb/analyzers</span><span class="dl">"</span><span class="p">);</span>

<span class="nx">analyzers</span><span class="p">.</span><span class="nx">save</span><span class="p">(</span><span class="dl">"</span><span class="s2">text_el</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">text</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">locale</span><span class="p">:</span> <span class="dl">"</span><span class="s2">el.utf-8</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">stemming</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="na">case</span><span class="p">:</span> <span class="dl">"</span><span class="s2">lower</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">accent</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="na">stopwords</span><span class="p">:</span> <span class="p">[]</span>
<span class="p">},</span> <span class="p">[</span><span class="dl">"</span><span class="s2">frequency</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">norm</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">position</span><span class="dl">"</span><span class="p">]);</span>

<span class="nx">db</span><span class="p">.</span><span class="nx">_query</span><span class="p">(</span><span class="s2">`RETURN TOKENS("αυτοκινητουσ πρωταγωνιστούσαν", "text_el")`</span><span class="p">)</span>
<span class="c1">// [ [ "αυτοκινητ", "πρωταγωνιστ" ] ]</span>
</code></pre></div></div>

<p>Also see <a href="arangosearch-analyzers.html#supported-languages">Analyzers: Supported Languages</a></p>

<h3 id="condition-optimization-option">Condition Optimization Option</h3>

<p>The <code class="language-plaintext highlighter-rouge">SEARCH</code> operation in AQL accepts a new option <code class="language-plaintext highlighter-rouge">conditionOptimization</code> to
give users control over the search criteria optimization:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">FOR</span> <span class="nx">doc</span> <span class="nx">IN</span> <span class="nx">myView</span>
  <span class="nx">SEARCH</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">val</span> <span class="o">&gt;</span> <span class="mi">10</span> <span class="nx">AND</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">val</span> <span class="o">&gt;</span> <span class="mi">5</span> <span class="cm">/* more conditions */</span>
  <span class="nx">OPTIONS</span> <span class="p">{</span> <span class="nl">conditionOptimization</span><span class="p">:</span> <span class="dl">"</span><span class="s2">none</span><span class="dl">"</span> <span class="p">}</span>
  <span class="nx">RETURN</span> <span class="nx">doc</span>
</code></pre></div></div>

<p>By default, all conditions get converted into disjunctive normal form (DNF).
Numerous optimizations can be applied, like removing redundant or overlapping
conditions (such as <code class="language-plaintext highlighter-rouge">doc.val &gt; 10</code> which is included by <code class="language-plaintext highlighter-rouge">doc.val &gt; 5</code>).
However, converting to DNF and optimizing the conditions can take quite some
time even for a low number of nested conditions which produce dozens of
conjunctions / disjunctions. It can be faster to just search the index without
optimizations.</p>

<p>See <a href="https://www.arangodb.com/docs/stable/aql/operations-search.html#search-options">SEARCH operation</a>.</p>

<h3 id="primary-sort-compression-option">Primary Sort Compression Option</h3>

<p>There is a new option <code class="language-plaintext highlighter-rouge">primarySortCompression</code> which can be set on View
creation to enable or disable the compression of the primary sort data:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"primarySort"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w"> </span><span class="nl">"field"</span><span class="p">:</span><span class="w"> </span><span class="s2">"date"</span><span class="p">,</span><span class="w"> </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"desc"</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w"> </span><span class="nl">"field"</span><span class="p">:</span><span class="w"> </span><span class="s2">"title"</span><span class="p">,</span><span class="w"> </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"asc"</span><span class="w"> </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"primarySortCompression"</span><span class="p">:</span><span class="w"> </span><span class="s2">"none"</span><span class="p">,</span><span class="w">
  </span><span class="err">...</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>It defaults to LZ4 compression (<code class="language-plaintext highlighter-rouge">"lz4"</code>), which was already used in ArangoDB
v3.5 and v3.6. Set it to <code class="language-plaintext highlighter-rouge">"none"</code> on View creation to trade space for speed.</p>

<p>See <a href="arangosearch-views.html#view-properties">ArangoSearch Views</a>.</p>

<h2 id="satellitegraphs">SatelliteGraphs</h2>

<p>When doing joins involving graph traversals, shortest path or k-shortest paths
computation in an ArangoDB cluster, data has to be exchanged between different
servers. In particular graph traversals are usually executed on a Coordinator,
because they need global information. This results in a lot of network traffic
and potentially slow query execution.</p>

<p>SatelliteGraphs are the natural extension of the concept of
SatelliteCollections to graphs. All of the usual benefits and caveats apply.
SatelliteGraphs are synchronously replicated to all DB-Servers that are part
of a cluster, which enables DB-Servers to execute graph traversals locally.
This includes (k-)shortest path(s) computation and possibly joins with
traversals and greatly improves performance for such queries.</p>

<p><a href="graphs-satellite-graphs.html">SatelliteGraphs</a>
are only available in the Enterprise Edition and the
<a href="https://cloud.arangodb.com/home?utm_source=docs&amp;utm_medium=cluster_pages&amp;utm_campaign=docs_traffic">ArangoDB Cloud</a>.</p>

<h2 id="disjoint-smartgraphs">Disjoint SmartGraphs</h2>

<p>SmartGraphs have been extended with a new option <code class="language-plaintext highlighter-rouge">isDisjoint</code>.
A Disjoint SmartGraph prohibits edges connecting different SmartGraph
components. If your graph doesn’t need edges between vertices with different
SmartGraph attribute values, then you should enable this option. This topology
restriction allows the query optimizer to improve traversal execution times,
because in many cases the execution can be pushed down to a single DB-Server.</p>

<p><a href="graphs-smart-graphs.html#benefits-of-disjoint-smartgraphs">Disjoint SmartGraphs</a>
are only available in the Enterprise Edition and the
<a href="https://cloud.arangodb.com/home?utm_source=docs&amp;utm_medium=cluster_pages&amp;utm_campaign=docs_traffic">ArangoDB Cloud</a>.</p>

<h2 id="aql">AQL</h2>

<h3 id="subquery-optimizations">Subquery optimizations</h3>

<p>The execution process of AQL has been refactored internally. This especially
pays off in subqueries. It will allow for more optimizations and better
batching of requests.</p>

<p>The first stage of this refactoring has been part of 3.6 already where some
subqueries have gained a significant performance boost. 3.7 takes the next step
in this direction. AQL can now combine skipping and producing of outputs in a
single call, so all queries with a LIMIT offset or the fullCount option enabled 
will benefit from this change straight away. This also holds true for subqueries,
hence the existing AQL optimizer rule <code class="language-plaintext highlighter-rouge">splice-subqueries</code> is now able to
optimize all subqueries and is enabled by default.</p>

<p>The query planner can now also reuse internal registers that were allocated for 
storing temporary results inside subqueries, but not outside of subqueries.</p>

<h3 id="count-optimizations">Count optimizations</h3>

<p>Subqueries can now use an optimized code path for counting documents if they
are supposed to only return the number of matching documents.
The optimization will be triggered for read-only subqueries that use a full 
collection scan or an index scan, without any additional filtering on document
attributes (early pruning or document post-filtering) and without using LIMIT.</p>

<p>The optimization will help in the following situation (in case <code class="language-plaintext highlighter-rouge">subCollection</code>
is an edge collection):</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">FOR</span> <span class="nx">doc</span> <span class="nx">IN</span> <span class="nx">collection</span>
  <span class="nx">LET</span> <span class="nx">count</span> <span class="o">=</span> <span class="nx">COUNT</span><span class="p">(</span>
    <span class="nx">FOR</span> <span class="nx">sub</span> <span class="nx">IN</span> <span class="nx">subCollection</span>
      <span class="nx">FILTER</span> <span class="nx">sub</span><span class="p">.</span><span class="nx">_from</span> <span class="o">==</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">_id</span>
      <span class="nx">RETURN</span> <span class="nx">sub</span>
  <span class="p">)</span>
  <span class="p">...</span>
</code></pre></div></div>

<p>The restrictions are that the subquery result must only be used with the
<code class="language-plaintext highlighter-rouge">COUNT</code>/<code class="language-plaintext highlighter-rouge">LENGTH</code> AQL function and not for anything else. The subquery itself 
must be read-only (no data-modification subquery), not use nested FOR loops,
no LIMIT clause and no FILTER condition or calculation that requires
accessing document data. Accessing index data is supported for filtering (as
in the above example that would use the edge index), but not for further 
calculations.</p>

<p>In case a subquery does not match these criteria, it will not use the 
optimized code path for counting, but will execute normally.</p>

<p>If the optimization is triggered, it will show up in the query execution
plan under the rule name <code class="language-plaintext highlighter-rouge">optimize-count</code>, and the subquery’s FOR loop will
be marked with a <code class="language-plaintext highlighter-rouge">with count optimization</code> tag.</p>

<h3 id="traversal-optimizations">Traversal optimizations</h3>

<p>Graph traversal performance is improved via some internal code refactoring:</p>

<ul>
  <li>Traversal cursors are reused instead of recreated from scratch, if possible.
This can save lots of calls to the memory management subsystem.</li>
  <li>Unnecessary checks have been removed from the cursors, by ensuring some
invariants beforehand.</li>
  <li>Each vertex lookup needs to perform slightly less work.</li>
</ul>

<p>The traversal speedups observed by these changes alone were around 8 to 10% for
single-server traversals and traversals in OneShard setups. Cluster traversals
will also benefit from these changes, but to a lesser extent. This is because
the network roundtrips have a higher share of the total query execution times there.</p>

<p>Traversal performance can be further improved by not fetching the visited vertices
from the storage engine in case the traversal query does not refer to them.
For example, in the query:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">FOR</span> <span class="nx">v</span><span class="p">,</span> <span class="nx">e</span><span class="p">,</span> <span class="nx">p</span> <span class="nx">IN</span> <span class="mi">1</span><span class="p">..</span><span class="mi">3</span> <span class="nx">OUTBOUND</span> <span class="dl">'</span><span class="s1">collection/startVertex</span><span class="dl">'</span> <span class="nx">edges</span>
  <span class="nx">RETURN</span> <span class="nx">e</span>
</code></pre></div></div>

<p>…the vertex variable (<code class="language-plaintext highlighter-rouge">v</code>) is never accessed, making it unnecessary to fetch the
vertices from storage. If this optimization is applied, the traversal node will be
marked with <code class="language-plaintext highlighter-rouge">/* vertex optimized away */</code> in the query’s execution plan output.
Unused edge and path variables (<code class="language-plaintext highlighter-rouge">e</code> and <code class="language-plaintext highlighter-rouge">p</code>) were already optimized away in
previous versions by the <code class="language-plaintext highlighter-rouge">optimize-traversals</code> optimizer rule.</p>

<h3 id="traversal-collection-restrictions">Traversal collection restrictions</h3>

<p>AQL traversals now accept the options <code class="language-plaintext highlighter-rouge">vertexCollections</code> and <code class="language-plaintext highlighter-rouge">edgeCollections</code>
to restrict the traversal to certain vertex or edge collections.</p>

<p>The use case for <code class="language-plaintext highlighter-rouge">vertexCollections</code> is to not follow any edges that will point
to other than the specified vertex collections, e.g.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">FOR</span> <span class="nx">v</span><span class="p">,</span> <span class="nx">e</span><span class="p">,</span> <span class="nx">p</span> <span class="nx">IN</span> <span class="mi">1</span><span class="p">..</span><span class="mi">3</span> <span class="nx">OUTBOUND</span> <span class="dl">'</span><span class="s1">products/123</span><span class="dl">'</span> <span class="nx">components</span>
  <span class="nx">OPTIONS</span> <span class="p">{</span> <span class="nl">vertexCollections</span><span class="p">:</span> <span class="p">[</span> <span class="dl">"</span><span class="s2">bolts</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">screws</span><span class="dl">"</span> <span class="p">]</span> <span class="p">}</span>
  <span class="nx">RETURN</span> <span class="nx">v</span> 
</code></pre></div></div>

<p>The traversal’s start vertex is always considered valid, even if it not stored
in any of the collections listed in the <code class="language-plaintext highlighter-rouge">vertexCollections</code> option.</p>

<p>The use case for <code class="language-plaintext highlighter-rouge">edgeCollections</code> is to not take into consideration any edges
from edge collections other than the specified ones, e.g.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">FOR</span> <span class="nx">v</span><span class="p">,</span> <span class="nx">e</span><span class="p">,</span> <span class="nx">p</span> <span class="nx">IN</span> <span class="mi">1</span><span class="p">..</span><span class="mi">3</span> <span class="nx">OUTBOUND</span> <span class="dl">'</span><span class="s1">products/123</span><span class="dl">'</span> <span class="nx">GRAPH</span> <span class="dl">'</span><span class="s1">components</span><span class="dl">'</span>
  <span class="nx">OPTIONS</span> <span class="p">{</span> <span class="nl">edgeCollections</span><span class="p">:</span> <span class="p">[</span> <span class="dl">"</span><span class="s2">productsToBolts</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">productsToScrews</span><span class="dl">"</span> <span class="p">]</span> <span class="p">}</span>
  <span class="nx">RETURN</span> <span class="nx">v</span>
</code></pre></div></div>

<p>This is mostly useful in the context of named graphs, when the named graph
contains many edge collections. Not restricting the edge collections for the
traversal will make the traversal search for edges in all edge collections
of the graph, which can be expensive. In case it is known that only certain
edges from the named graph are needed, the <code class="language-plaintext highlighter-rouge">edgeCollections</code> option can be a
handy performance optimization. It can replace less efficient post-filtering:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">FOR</span> <span class="nx">v</span><span class="p">,</span> <span class="nx">e</span><span class="p">,</span> <span class="nx">p</span> <span class="nx">IN</span> <span class="mi">1</span><span class="p">..</span><span class="mi">3</span> <span class="nx">OUTBOUND</span> <span class="dl">'</span><span class="s1">products/123</span><span class="dl">'</span> <span class="nx">GRAPH</span> <span class="dl">'</span><span class="s1">components</span><span class="dl">'</span>
  <span class="nx">FILTER</span> <span class="nx">p</span><span class="p">.</span><span class="nx">edges</span><span class="p">[</span><span class="o">*</span> <span class="nx">RETURN</span> <span class="nx">IS_SAME_COLLECTION</span><span class="p">(</span><span class="dl">"</span><span class="s2">productsToBolts</span><span class="dl">"</span><span class="p">,</span> <span class="nx">CURRENT</span><span class="p">)</span>
                       <span class="nx">OR</span> <span class="nx">IS_SAME_COLLECTION</span><span class="p">(</span><span class="dl">"</span><span class="s2">productsToScrews</span><span class="dl">"</span><span class="p">,</span> <span class="nx">CURRENT</span><span class="p">)]</span> <span class="nx">ALL</span> <span class="o">==</span> <span class="kc">true</span>
  <span class="nx">RETURN</span> <span class="nx">v</span>
</code></pre></div></div>

<p>Also see <a href="https://www.arangodb.com/docs/stable/aql/graphs-traversals.html#working-with-named-graphs">AQL Traversal Options</a></p>

<h3 id="traversal-parallelization-enterprise-edition">Traversal parallelization (Enterprise Edition)</h3>

<p>Nested traversals that run on a single server or a cluster DB-Server can now
be executed in parallel.</p>

<p>Traversals have a new option <code class="language-plaintext highlighter-rouge">parallelism</code> which can be used to specify the
level of parallelism:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">FOR</span> <span class="nx">doc</span> <span class="nx">IN</span> <span class="nx">outerCollection</span>
  <span class="nx">FOR</span> <span class="nx">v</span><span class="p">,</span> <span class="nx">e</span><span class="p">,</span> <span class="nx">p</span> <span class="nx">IN</span> <span class="mi">1</span><span class="p">..</span><span class="mi">3</span> <span class="nx">OUTBOUND</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">_id</span> <span class="nx">GRAPH</span> <span class="dl">'</span><span class="s1">components</span><span class="dl">'</span>
  <span class="nx">OPTIONS</span> <span class="p">{</span> <span class="nl">parallelism</span><span class="p">:</span> <span class="mi">4</span> <span class="p">}</span>
  <span class="p">...</span>
</code></pre></div></div>

<p>Traversal parallelism is opt-in. If not specified, the <code class="language-plaintext highlighter-rouge">parallelism</code> value
implicitly defaults to 1, which means no parallelism will be used. The maximum
value for <code class="language-plaintext highlighter-rouge">parallelism</code> is capped to the number of available cores on the
target machine.</p>

<p>Due to the required synchronization for splitting up traversal inputs and
merging results, using traversal parallelization may incur some overhead. So it
is not a silver bullet for all use cases. However, parallelizing a traversal is
normally useful when there are many inputs (start vertices) that the nested
traversal can work on concurrently. This is often the case when a nested
traversal is fed with several tens of thousands of start vertices, which can
then be distributed randomly to worker threads for parallel execution.</p>

<p>Right now, traversal parallelization is limited to traversals in single server
deployments and to cluster traversals that are running in a OneShard setup.
Cluster traversals that run on a coordinator node and SmartGraph traversals are
currently not parallelized.</p>

<p>See <a href="https://www.arangodb.com/docs/stable/aql/graphs-traversals.html#working-with-named-graphs">Graph traversal options</a></p>

<h3 id="aql-functions-added">AQL functions added</h3>

<p>The following AQL functions have been added in ArangoDB 3.7:</p>

<ul>
  <li><a href="https://www.arangodb.com/docs/stable/aql/functions-miscellaneous.html#in_range">IN_RANGE()</a>
(now available outside of <code class="language-plaintext highlighter-rouge">SEARCH</code> operations)</li>
  <li><a href="https://www.arangodb.com/docs/stable/aql/functions-array.html#interleave">INTERLEAVE()</a></li>
  <li><a href="https://www.arangodb.com/docs/stable/aql/functions-string.html#ipv4_from_number">IPV4_FROM_NUMBER()</a></li>
  <li><a href="https://www.arangodb.com/docs/stable/aql/functions-string.html#ipv4_to_number">IPV4_TO_NUMBER()</a></li>
  <li><a href="https://www.arangodb.com/docs/stable/aql/functions-string.html#is_ipv4">IS_IPV4()</a></li>
  <li><a href="https://www.arangodb.com/docs/stable/aql/functions-array.html#jaccard">JACCARD()</a></li>
  <li><a href="https://www.arangodb.com/docs/stable/aql/functions-arangosearch.html#levenshtein_match">LEVENSHTEIN_MATCH()</a></li>
  <li><a href="https://www.arangodb.com/docs/stable/aql/functions-arangosearch.html#ngram_match">NGRAM_MATCH()</a></li>
  <li><a href="https://www.arangodb.com/docs/stable/aql/functions-string.html#ngram_positional_similarity">NGRAM_POSITIONAL_SIMILARITY()</a></li>
  <li><a href="https://www.arangodb.com/docs/stable/aql/functions-string.html#ngram_similarity">NGRAM_SIMILARITY()</a></li>
  <li><a href="https://www.arangodb.com/docs/stable/aql/functions-numeric.html#product">PRODUCT()</a></li>
  <li><a href="https://www.arangodb.com/docs/stable/aql/functions-array.html#replace_nth">REPLACE_NTH()</a></li>
</ul>

<h3 id="syntax-enhancements">Syntax enhancements</h3>

<p>AQL now supports trailing commas in array and object definitions.</p>

<p>This is especially convenient for editing multi-line array/object definitions,
since there doesn’t need to be a distinction between the last element and all
others just for the comma. That means definitions such as the following are
now supported:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span>
  <span class="mi">1</span><span class="p">,</span>
  <span class="mi">2</span><span class="p">,</span>
  <span class="mi">3</span><span class="p">,</span> <span class="c1">// trailing comma</span>
<span class="p">]</span>
</code></pre></div></div>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
  <span class="dl">"</span><span class="s2">a</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">b</span><span class="dl">"</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">c</span><span class="dl">"</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="c1">// trailing comma</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Previous versions of ArangoDB did not support trailing commas in AQL queries
and threw query parse errors when they were used.</p>

<h3 id="aql-datetime-parsing">AQL datetime parsing</h3>

<p>The performance of parsing ISO 8601 date/time string values in AQL has improved
significantly thanks to a specialized parser, replacing a regular expression.</p>

<h3 id="ternary-operator">Ternary operator</h3>

<p>Improved the lazy evaluation capabilities of the <a href="https://www.arangodb.com/docs/stable/aql/operators.html#ternary-operator">ternary operator</a>.
If the second operand is left out, the expression of the condition is only
evaluated once now, instead of once more for the true branch.</p>

<h3 id="other-aql-improvements">Other AQL improvements</h3>

<h4 id="remove-unnecessary-calculations-optimizer-rule">“remove-unnecessary-calculations” optimizer rule</h4>

<p>The AQL query optimizer now tries to not move potentially expensive AQL function
calls into loops in the <code class="language-plaintext highlighter-rouge">remove-unnecessary-calculations</code> rule.</p>

<p>For example, in the query:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">LET</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">NOOPT</span><span class="p">(</span><span class="mi">1</span><span class="p">..</span><span class="mi">100</span><span class="p">)</span>
<span class="nx">LET</span> <span class="nx">values</span> <span class="o">=</span> <span class="nx">SORTED</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span>
<span class="nx">FOR</span> <span class="nx">j</span> <span class="nx">IN</span> <span class="mi">1</span><span class="p">..</span><span class="mi">100</span> 
  <span class="nx">FILTER</span> <span class="nx">j</span> <span class="nx">IN</span> <span class="nx">values</span>
  <span class="nx">RETURN</span> <span class="nx">j</span>
</code></pre></div></div>

<p>… there is only one use of the <code class="language-plaintext highlighter-rouge">values</code> variable. So the optimizer can remove
that variable and replace the filter condition with <code class="language-plaintext highlighter-rouge">FILTER j IN SORTED(x)</code>.
However, that would move the potentially expensive function call into the
inner loop, which could be a pessimization.</p>

<p>The optimizer will not move the calculation of values into the loop anymore when
it merges calculations in the <code class="language-plaintext highlighter-rouge">remove-unnecessary-calculations</code> optimizer rule.</p>

<h4 id="move-calculations-down-optimizer-rule">“move-calculations-down” optimizer rule</h4>

<p>The existing AQL optimizer rule <code class="language-plaintext highlighter-rouge">move-calculations-down</code> is now able to also move
unrelated subqueries beyond SORT and LIMIT instructions, which can help avoid the
execution of subqueries for which the results are later discarded.</p>

<p>For example, in the query:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">FOR</span> <span class="nx">doc</span> <span class="nx">IN</span> <span class="nx">collection1</span>
  <span class="nx">LET</span> <span class="nx">sub1</span> <span class="o">=</span> <span class="nx">FIRST</span><span class="p">(</span><span class="nx">FOR</span> <span class="nx">sub</span> <span class="nx">IN</span> <span class="nx">collection2</span> <span class="nx">FILTER</span> <span class="nx">sub</span><span class="p">.</span><span class="nx">ref</span> <span class="o">==</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">_key</span> <span class="nx">RETURN</span> <span class="nx">sub</span><span class="p">)</span>
  <span class="nx">LET</span> <span class="nx">sub2</span> <span class="o">=</span> <span class="nx">FIRST</span><span class="p">(</span><span class="nx">FOR</span> <span class="nx">sub</span> <span class="nx">IN</span> <span class="nx">collection3</span> <span class="nx">FILTER</span> <span class="nx">sub</span><span class="p">.</span><span class="nx">ref</span> <span class="o">==</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">_key</span> <span class="nx">RETURN</span> <span class="nx">sub</span><span class="p">)</span>

  <span class="nx">SORT</span> <span class="nx">sub1</span>
  <span class="nx">LIMIT</span> <span class="mi">10</span>
  <span class="nx">RETURN</span> <span class="p">{</span> <span class="nx">doc</span><span class="p">,</span> <span class="nx">sub1</span><span class="p">,</span> <span class="nx">sub2</span> <span class="p">}</span>
</code></pre></div></div>

<p>… the execution of the <code class="language-plaintext highlighter-rouge">sub2</code> subquery can be delayed to after the SORT and LIMIT.
The query optimizer will automatically transform this query into the following:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">FOR</span> <span class="nx">doc</span> <span class="nx">IN</span> <span class="nx">collection1</span>
  <span class="nx">LET</span> <span class="nx">sub1</span> <span class="o">=</span> <span class="nx">FIRST</span><span class="p">(</span><span class="nx">FOR</span> <span class="nx">sub</span> <span class="nx">IN</span> <span class="nx">collection2</span> <span class="nx">FILTER</span> <span class="nx">sub</span><span class="p">.</span><span class="nx">ref</span> <span class="o">==</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">_key</span> <span class="nx">RETURN</span> <span class="nx">sub</span><span class="p">)</span>
  <span class="nx">SORT</span> <span class="nx">sub1</span>
  <span class="nx">LIMIT</span> <span class="mi">10</span>

  <span class="nx">LET</span> <span class="nx">sub2</span> <span class="o">=</span> <span class="nx">FIRST</span><span class="p">(</span><span class="nx">FOR</span> <span class="nx">sub</span> <span class="nx">IN</span> <span class="nx">collection3</span> <span class="nx">FILTER</span> <span class="nx">sub</span><span class="p">.</span><span class="nx">ref</span> <span class="o">==</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">_key</span> <span class="nx">RETURN</span> <span class="nx">sub</span><span class="p">)</span>
  <span class="nx">RETURN</span> <span class="p">{</span> <span class="nx">doc</span><span class="p">,</span> <span class="nx">sub1</span><span class="p">,</span> <span class="nx">sub2</span> <span class="p">}</span>
</code></pre></div></div>

<h2 id="cluster">Cluster</h2>

<h3 id="incremental-plan-updates">Incremental Plan Updates</h3>

<p>In ArangoDB clusters, the Agency is the single source of truth for data definition 
(databases, collections, shards, indexes, views), the cluster configuration and the 
current cluster setup (e.g. shard distribution, shard leadership).</p>

<p>Coordinators and DB-Servers in the cluster maintain a local cache of the Agency’s
information, in order to access it in a performant way whenever they need any 
information about the setup.
However, any change that was applied to the <code class="language-plaintext highlighter-rouge">Plan</code> and <code class="language-plaintext highlighter-rouge">Current</code> sections in the 
Agency led to the server-local caches being invalidated, which triggered a full
reload of either <code class="language-plaintext highlighter-rouge">Plan</code> or <code class="language-plaintext highlighter-rouge">Current</code> by all Coordinators and DB-Servers.
The size of <code class="language-plaintext highlighter-rouge">Plan</code> and <code class="language-plaintext highlighter-rouge">Current</code> is proportional to the number of database objects,
so fully reloading the data from the Agency is an expensive operation for deployments
which have a high number of databases, collections, or shards.</p>

<p>In ArangoDB 3.7 the mechanism for filling the local caches on Coordinators and
DB-Servers with Agency data has changed fundamentally. Instead of invalidating the
entire cache and reloading the full <code class="language-plaintext highlighter-rouge">Plan</code> or <code class="language-plaintext highlighter-rouge">Current</code> section on every change,
each server is now using a permanent connection to the Agency and uses it to
poll for changes. Changes to the Agency data are sent over these connections as
soon as they are applied in the Agency, meaning that Coordinators and DB-Servers 
can apply them immediately and incrementally. This removes the need for full
reloads. As a consequence, a significant reduction of overall network traffic between 
Agents and other cluster nodes is expected, plus a significant reduction in CPU
usage on Agents for assembling and sending the <code class="language-plaintext highlighter-rouge">Plan</code> or <code class="language-plaintext highlighter-rouge">Current</code> parts.
Another positive side effect of this modification is that changes made to Agency 
data should propagate faster in the cluster.</p>

<h3 id="parallel-move-shard">Parallel Move Shard</h3>

<p>Shards can now move in parallel. The old locking mechanism was replaced by a
read-write lock and thus allows multiple jobs for the same destination server.
The actual transfer rates are still limited on DB-Server side but there is a
huge overall speedup. This also affects <code class="language-plaintext highlighter-rouge">CleanOutServer</code> and
<code class="language-plaintext highlighter-rouge">ResignLeadership</code> jobs.</p>

<h2 id="general">General</h2>

<h3 id="schema-validation-for-documents">Schema Validation for Documents</h3>

<p>ArangoDB now supports validating documents on collection level using
JSON Schema (draft-4).</p>

<p>In order to enforce a certain document structure in a collection we have
introduced the <code class="language-plaintext highlighter-rouge">schema</code> collection property. It expects an object comprised
of a <code class="language-plaintext highlighter-rouge">rule</code> (JSON Schema object), a <code class="language-plaintext highlighter-rouge">level</code> and a <code class="language-plaintext highlighter-rouge">message</code> that will be used
when validation fails. When documents are validated is controlled by the
validation level, which can be <code class="language-plaintext highlighter-rouge">none</code> (off), <code class="language-plaintext highlighter-rouge">new</code> (insert only), <code class="language-plaintext highlighter-rouge">moderate</code>
(on insert and modification, but existing documents can remain invalid)
or <code class="language-plaintext highlighter-rouge">strict</code> (always).</p>

<p>See: <a href="data-modeling-documents-schema-validation.html">Schema Validation</a></p>

<h3 id="http2-support">HTTP/2 support</h3>

<p>The server now supports upgrading connections from HTTP 1.1 to HTTP 2.
This should improve ArangoDBs compatibility with various L7 load balancers
and modern cloud platforms like Kubernetes.</p>

<p>We also expect improved request throughput in cases where there are many
concurrent requests.</p>

<p>See: <a href="https://www.arangodb.com/docs/stable/http/general.html#switching-protocols">HTTP Switching Protocols</a></p>

<h3 id="server-name-indication-enterprise-edition">Server Name Indication (Enterprise Edition)</h3>

<p>Sometimes it is desirable to have the same server use different server keys
and certificates when it is contacted under different names. This is possible
with the <a href="programs-arangod-ssl.html#server-name-indication-sni">Server Name Indication</a>
(SNI) TLS extension. It is now supported by ArangoDB using a new startup option
<code class="language-plaintext highlighter-rouge">--ssl.server-name-indication</code>.</p>

<h3 id="jwt-secret-rotation-enterprise-edition">JWT secret rotation (Enterprise Edition)</h3>

<p>There are now new APIs and startup options for JWT secrets. The new option
<code class="language-plaintext highlighter-rouge">--server.jwt-secret-folder</code> can be used to specify a path for more than one
JWT secret file.</p>

<p>Additionally the <code class="language-plaintext highlighter-rouge">/_admin/server/jwt</code> API can be used to
<a href="https://www.arangodb.com/docs/stable/http/general.html#hot-reload-of-jwt-secrets">reload the JWT secrets</a>
of a local arangod process without having to restart it (hot-reload).
This may be used to roll out new JWT secrets throughout an ArangoDB cluster.</p>

<h3 id="tls-key-and-certificate-rotation">TLS key and certificate rotation</h3>

<p>It is now possible to change the TLS keyfile (secret key as well as
public certificates) at run time. The API <code class="language-plaintext highlighter-rouge">POST /_admin/server/tls</code>
basically makes the <code class="language-plaintext highlighter-rouge">arangod</code> server reload the keyfile from disk.</p>

<p>Furthermore, one can query the current TLS setup at runtime with the
<code class="language-plaintext highlighter-rouge">GET /_admin/server/tls</code> API. The public certificates as well as a
SHA-256 hash of the private key is returned.</p>

<p>This allows <a href="https://www.arangodb.com/docs/stable/http/administration-and-monitoring.html#tls">rotation of TLS keys and certificates</a>
without a server restart.</p>

<h3 id="encryption-at-rest-key-rotation-enterprise-edition">Encryption at rest key rotation (Enterprise Edition)</h3>

<p>It is possible to change the user supplied encryption key via the
<a href="https://www.arangodb.com/docs/stable/http/administration-and-monitoring.html#encryption-at-rest">HTTP API</a>
by sending a POST request without payload to the new endpoint
<code class="language-plaintext highlighter-rouge">/_admin/server/encryption</code>. The file supplied via <code class="language-plaintext highlighter-rouge">--rocksdb.encryption-keyfile</code>
will be reloaded and the internal encryption key will be re-encrypted with the
new user key. Note that this API is turned off by default. It can be enabled
via the <code class="language-plaintext highlighter-rouge">--rocksdb.encryption-key-rotation</code> startup option.</p>

<p>Similarly the new option <code class="language-plaintext highlighter-rouge">--rocksdb.encryption-keyfolder</code> can be used
to supply multiple user keys. By default, the first available user-supplied key 
will be used as the internal encryption key. Alternatively, if the option 
<code class="language-plaintext highlighter-rouge">--rocksdb.encryption-gen-internal-key</code> is set to <code class="language-plaintext highlighter-rouge">true</code>, a random internal 
key will be generated and encrypted with each of the provided user keys.</p>

<p>Please be aware that the encryption at rest key rotation is an <strong>experimental</strong> 
feature, and its APIs and behavior are still subject to change.</p>

<h3 id="insert-update-and-insert-ignore">Insert-Update and Insert-Ignore</h3>

<p>ArangoDB 3.7 adds an insert-update operation that is similar to the already
existing insert-replace functionality. A new <code class="language-plaintext highlighter-rouge">overwriteMode</code> flag has been
introduced to control the type of the overwrite operation in case of colliding
primary keys during the insert.</p>

<p>In the case of <code class="language-plaintext highlighter-rouge">overwriteMode: "update"</code>, the parameters <code class="language-plaintext highlighter-rouge">keepNull</code> and
<code class="language-plaintext highlighter-rouge">mergeObjects</code> can be provided to control the update operation.</p>

<p>There is now also an insert-ignore operation that allows insert operations
to do nothing in case of a primary key conflict. This operation is an efficient
way of making sure a document with a specific primary key exists. If it does
not exist already, it will be created as specified. Should the document exist
already, nothing will happen and the insert will return without an error. No
write operations happens in this case, and only a single primary key lookup 
needs to be performed in the storage engine. 
This makes the insert-ignore operation the most efficient way 
existing insert-replace functionality. A new <code class="language-plaintext highlighter-rouge">overwriteMode</code> flag has been
introduced to control the type of the overwrite operation in case of colliding
primary keys during the insert.</p>

<p>The query options are available in <a href="https://www.arangodb.com/docs/stable/aql/operations-insert.html#setting-query-options">AQL</a>,
the <a href="data-modeling-documents-document-methods.html#insert--save">JS API</a> and
<a href="https://www.arangodb.com/docs/stable/http/document-working-with-documents.html#create-document">HTTP API</a>.</p>

<h3 id="override-detected-total-memory-and-cpu-cores">Override detected total memory and CPU cores</h3>

<p><code class="language-plaintext highlighter-rouge">arangod</code> detects the total amount of RAM present on the system and calculates
various default sizes based on this value. If you run it alongside other
services or in a container with a RAM limitation for its cgroup, then you
probably don’t want the server to detect and use all available memory.</p>

<p>An environment variable <code class="language-plaintext highlighter-rouge">ARANGODB_OVERRIDE_DETECTED_TOTAL_MEMORY</code> can now be
set to restrict the amount of memory it will detect (also available in v3.6.3).</p>

<p>An environment variable <code class="language-plaintext highlighter-rouge">ARANGODB_OVERRIDE_DETECTED_NUMBER_OF_CORES</code> can be
set to restrict the number of CPU cores that are visible to arangod.</p>

<p>See <a href="programs-arangod-env-vars.html">ArangoDB Server Environment Variables</a></p>

<h3 id="rocksdb-storage-engine-options-exposed">RocksDB storage engine options exposed</h3>

<p>Multiple additional RocksDB configuration options are now exposed to be
configurable in <em>arangod</em>:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">--rocksdb.cache-index-and-filter-blocks</code> to make the RocksDB block cache
quota also include RocksDB memtable sizes</li>
  <li><code class="language-plaintext highlighter-rouge">--rocksdb.cache-index-and-filter-blocks-with-high-priority</code> to use cache
index and filter blocks with high priority making index and filter blocks
be less likely to be evicted than data blocks</li>
  <li><code class="language-plaintext highlighter-rouge">--rocksdb.pin-l0-filter-and-index-blocks-in-cache</code> to make filter and index
blocks be pinned and only evicted from cache when the table reader is freed</li>
  <li><code class="language-plaintext highlighter-rouge">--rocksdb.pin-top-level-index-and-filter</code> to make the top-level index of
partitioned filter and index blocks pinned and only be evicted from cache
when the table reader is freed</li>
  <li><code class="language-plaintext highlighter-rouge">--rocksdb.target-file-size-base</code>: Per-file target file size for compaction
(in bytes). the actual target file size for each level is
<code class="language-plaintext highlighter-rouge">--rocksdb.target-file-size-base</code> multiplied by <code class="language-plaintext highlighter-rouge">--rocksdb.target-file-size-multiplier ^ (level - 1)</code></li>
  <li><code class="language-plaintext highlighter-rouge">--rocksdb.target-file-size-multiplier</code>: Multiplier for <code class="language-plaintext highlighter-rouge">--rocksdb.target-file-size</code>,
a value of 1 means that files in different levels will have the same size (default)</li>
</ul>

<h2 id="pregel">Pregel</h2>

<p>A new algorithm <code class="language-plaintext highlighter-rouge">"wcc"</code> has been added to Pregel to find connected components.</p>

<p>There are now three algorithms to find connected components in a graph:</p>

<ol>
  <li>
    <p>If your graph is effectively undirected (you have edges in both directions
between vertices) then the simple connected components algorithm named
<code class="language-plaintext highlighter-rouge">"connectedcomponents"</code> is suitable.</p>

    <p>It is a very simple and fast algorithm, but will only work correctly on undirected
graphs. Your results on directed graphs may vary, depending on how connected your
components are.</p>
  </li>
  <li>
    <p>To find <strong>weakly connected components</strong> (WCC) you can now use the new algorithm named
<code class="language-plaintext highlighter-rouge">"wcc"</code>. Weakly connected means that there exists a path from every vertex pair in
that component.</p>

    <p>This algorithm will work on directed graphs but requires a greater amount of traffic
between your DB-Servers.</p>
  </li>
  <li>
    <p>to find <strong>strongly connected components</strong> (SCC) you can use the algorithm named
<code class="language-plaintext highlighter-rouge">"scc"</code>. Strongly connected means every vertex is reachable from any other vertex in
the same component.</p>

    <p>The algorithm is more complex than the WCC algorithm and requires more memory,
because each vertex needs to store much more state.</p>
  </li>
</ol>

<p>Also see <a href="graphs-pregel.html#connected-components">Pregel</a></p>

<h2 id="foxx">Foxx</h2>

<p>Foxx endpoints now provide the methods <code class="language-plaintext highlighter-rouge">securityScheme</code>, <code class="language-plaintext highlighter-rouge">securityScope</code> and 
<code class="language-plaintext highlighter-rouge">security</code> to allow defining Swagger security schemes.</p>

<p>Foxx routes now always have a Swagger <code class="language-plaintext highlighter-rouge">operationId</code>. If the route is unnamed,
a distinct operationId will be generated based on the HTTP method and URL.</p>

<h2 id="javascript">JavaScript</h2>

<h3 id="v8-and-icu-library-upgrades">V8 and ICU library upgrades</h3>

<p>The bundled V8 JavaScript engine was upgraded to version 7.9.317. The bundled
Unicode character handling library ICU was upgraded to version 64.2.</p>

<p>The resource usage of V8 has improved a lot. Memory usage is down by 15%,
spawning a new Isolate has become almost 10 times faster.</p>

<p>Here is the list of improvements that may matter to you as an ArangoDB user:</p>

<ul>
  <li><a href="https://v8.dev/blog/v8-release-76#json.parse-improvements" target="_blank">JSON.parse improvements</a>:
JSON parsing is roughly 60% faster compared to ArangoDB v3.6. Parsing JSON
is generally faster than parsing JavaScript because of the lower syntactic
complexity, but with the additional speedup of the JSON parser you should
consider to use <code class="language-plaintext highlighter-rouge">JSON.parse(string)</code> over JavaScript variable declarations
for complex data:
    <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Parsing a JSON string</span>
<span class="kd">let</span> <span class="nx">structuredVar</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="dl">'</span><span class="s1">{"foo": "bar", …}</span><span class="dl">'</span><span class="p">);</span>
<span class="c1">// instead of using an object literal</span>
<span class="kd">let</span> <span class="nx">structuredVar</span> <span class="o">=</span> <span class="p">{</span><span class="na">foo</span><span class="p">:</span> <span class="dl">"</span><span class="s2">bar</span><span class="dl">"</span><span class="p">,</span> <span class="err">…</span><span class="p">};</span>
</code></pre></div>    </div>
    <p>Also see <a href="https://v8.dev/features/subsume-json#embedding-json-parse" target="_blank">Embedding JSON into JavaScript programs with JSON.parse</a>.</p>
  </li>
  <li><a href="https://v8.dev/features/intl-numberformat" target="_blank">BigInt support in formatter</a>:
Large integer numbers are now supported in number formatters:
    <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">formatter</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Intl</span><span class="p">.</span><span class="nx">NumberFormat</span><span class="p">(</span><span class="dl">'</span><span class="s1">fr</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">formatter</span><span class="p">.</span><span class="nx">format</span><span class="p">(</span><span class="mi">12345678901234567890</span><span class="nx">n</span><span class="p">);</span>
</code></pre></div>    </div>
    <p>This no longer throws an <code class="language-plaintext highlighter-rouge">Cannot convert a BigInt value to a number</code> error.
Note that ArangoDB does not support BigInt in general but only in JavaScript
contexts. AQL, JSON etc. do not support BigInt.</p>
  </li>
  <li><a href="https://v8.dev/features/object-fromentries" target="_blank">Object.fromEntries support</a>:
Performs the inverse operation of <code class="language-plaintext highlighter-rouge">Object.entries()</code>:
    <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">object</span> <span class="o">=</span> <span class="p">{</span> <span class="na">x</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span> <span class="na">y</span><span class="p">:</span> <span class="mi">50</span> <span class="p">};</span>
<span class="kd">const</span> <span class="nx">entries</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">entries</span><span class="p">(</span><span class="nx">object</span><span class="p">);</span>
<span class="c1">// → [['x', 42], ['y', 50]]</span>

<span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">fromEntries</span><span class="p">(</span><span class="nx">entries</span><span class="p">);</span>
<span class="c1">// → { x: 42, y: 50 }</span>
</code></pre></div>    </div>
  </li>
  <li><a href="https://v8.dev/features/numeric-separators" target="_blank">Underscores for better readability of large numbers</a>:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1_000_000_000_000 // → equals 1000000000000
</code></pre></div>    </div>
  </li>
  <li><a href="https://v8.dev/features/string-matchall" target="_blank">matchAll support for strings</a>:
A convenient generator for a match object for each match:
    <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">string</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Favorite GitHub repos: tc39/ecma262 v8/v8.dev</span><span class="dl">'</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">regex</span> <span class="o">=</span> <span class="sr">/</span><span class="se">\b(?&lt;</span><span class="sr">owner&gt;</span><span class="se">[</span><span class="sr">a-z0-9</span><span class="se">]</span><span class="sr">+</span><span class="se">)\/(?&lt;</span><span class="sr">repo&gt;</span><span class="se">[</span><span class="sr">a-z0-9</span><span class="se">\.]</span><span class="sr">+</span><span class="se">)\b</span><span class="sr">/g</span><span class="p">;</span>
<span class="k">for</span> <span class="p">(</span><span class="kd">const</span> <span class="nx">match</span> <span class="k">of</span> <span class="nx">string</span><span class="p">.</span><span class="nx">matchAll</span><span class="p">(</span><span class="nx">regex</span><span class="p">))</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">match</span><span class="p">[</span><span class="mi">0</span><span class="p">]}</span><span class="s2"> at </span><span class="p">${</span><span class="nx">match</span><span class="p">.</span><span class="nx">index</span><span class="p">}</span><span class="s2"> with '</span><span class="p">${</span><span class="nx">match</span><span class="p">.</span><span class="nx">input</span><span class="p">}</span><span class="s2">'`</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`→ owner: </span><span class="p">${</span><span class="nx">match</span><span class="p">.</span><span class="nx">groups</span><span class="p">.</span><span class="nx">owner</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`→ repo: </span><span class="p">${</span><span class="nx">match</span><span class="p">.</span><span class="nx">groups</span><span class="p">.</span><span class="nx">repo</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
</code></pre></div>    </div>
  </li>
  <li>ICU supports more languages and characters (Unicode 12.1),
emoji handling was improved</li>
</ul>

<p>Also see:</p>
<ul>
  <li><a href="https://v8.dev/blog" target="_blank">V8 release blog posts</a> (v7.2 to v7.9)</li>
  <li><a href="https://v8.dev/features" target="_blank">V8 features</a> (up to Chrome 79)</li>
</ul>

<h3 id="javascript-apis">JavaScript APIs</h3>

<p>The <a href="appendix-java-script-modules-arango-db.html#the-query-helper"><code class="language-plaintext highlighter-rouge">query</code> helper</a>
was extended to support passing <a href="https://www.arangodb.com/docs/stable/aql/invocation-with-arangosh.html#setting-options">query options</a>:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">@arangodb</span><span class="dl">"</span><span class="p">).</span><span class="nx">query</span><span class="p">(</span> <span class="p">{</span> <span class="na">maxRuntime</span><span class="p">:</span> <span class="mi">1</span> <span class="p">}</span> <span class="p">)</span><span class="s2">`RETURN SLEEP(2)`</span>
</code></pre></div></div>

<h2 id="web-ui">Web UI</h2>

<p>The interactive description of ArangoDB’s HTTP API (Swagger UI) shows the
endpoint and model entries collapsed by default now for a better overview.</p>

<p>The bundled version of Swagger has been upgraded to 3.25.1. This change has
also been backported to ArangoDB v3.6.4.</p>

<h2 id="metrics">Metrics</h2>

<p>The amount of exported metrics for monitoring has been extended and is now 
available in a format compatible with Prometheus. You can now easily scrape 
on <code class="language-plaintext highlighter-rouge">/_admin/metrics</code>.
See <a href="https://www.arangodb.com/docs/stable/http/administration-and-monitoring-metrics.html">Metrics HTTP API</a>.</p>

<p>The following metrics have been added in ArangoDB 3.7:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Label</th>
      <th style="text-align: left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_agency_append_hist</code></td>
      <td style="text-align: left">Agency RAFT follower append histogram</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_agency_commit_hist</code></td>
      <td style="text-align: left">Agency RAFT commit histogram</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_agency_compaction_hist</code></td>
      <td style="text-align: left">Agency compaction histogram</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_agency_local_commit_index</code></td>
      <td style="text-align: left">This agent’s commit index</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_agency_log_size_bytes</code></td>
      <td style="text-align: left">Agency replicated log size (bytes)</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_agency_read_no_leader</code></td>
      <td style="text-align: left">Agency read no leader</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_agency_read_ok</code></td>
      <td style="text-align: left">Agency read ok</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_agency_supervision_accum_runtime_msec</code></td>
      <td style="text-align: left">Accumulated Supervision Runtime</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_agency_supervision_accum_runtime_wait_for_replication_msec</code></td>
      <td style="text-align: left">Accumulated Supervision wait for replication time</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_agency_supervision_failed_server_count</code></td>
      <td style="text-align: left">Counter for FailedServer jobs</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_agency_supervision_runtime_msec</code></td>
      <td style="text-align: left">Agency Supervision runtime histogram (ms)</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_agency_supervision_runtime_wait_for_replication_msec</code></td>
      <td style="text-align: left">Agency Supervision wait for replication time (ms)</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_agency_term</code></td>
      <td style="text-align: left">Agency’s term</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_agency_write_hist</code></td>
      <td style="text-align: left">Agency write histogram (ms)</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_agency_write_no_leader</code></td>
      <td style="text-align: left">Agency write no leader</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_agency_write_ok</code></td>
      <td style="text-align: left">Agency write ok</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_agencycomm_request_time_msec</code></td>
      <td style="text-align: left">Request time for Agency requests</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_aql_slow_query</code></td>
      <td style="text-align: left">Number of AQL slow queries</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_aql_total_query_time_msec</code></td>
      <td style="text-align: left">Total execution time of all queries</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_client_connection_statistics_io_time_bucket</code></td>
      <td style="text-align: left">Request time needed to answer a request (ms)</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_client_connection_statistics_io_time_count</code></td>
      <td style="text-align: left">Request time needed to answer a request (ms)</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_client_connection_statistics_io_time_sum</code></td>
      <td style="text-align: left">Request time needed to answer a request (ms)</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_client_connection_statistics_queue_time_bucket</code></td>
      <td style="text-align: left">Request time needed to answer a request (ms)</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_client_connection_statistics_queue_time_count</code></td>
      <td style="text-align: left">Request time needed to answer a request (ms)</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_client_connection_statistics_queue_time_sum</code></td>
      <td style="text-align: left">Request time needed to answer a request (ms)</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_client_connection_statistics_request_time_bucket</code></td>
      <td style="text-align: left">Request time needed to answer a request (ms)</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_client_connection_statistics_request_time_count</code></td>
      <td style="text-align: left">Request time needed to answer a request (ms)</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_client_connection_statistics_request_time_sum</code></td>
      <td style="text-align: left">Request time needed to answer a request (ms)</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_client_connection_statistics_total_time_bucket</code></td>
      <td style="text-align: left">Total time needed to answer a request (ms)</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_client_connection_statistics_total_time_count</code></td>
      <td style="text-align: left">Total time needed to answer a request (ms)</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_client_connection_statistics_total_time_sum</code></td>
      <td style="text-align: left">Total time needed to answer a request (ms)</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_dropped_followers_count</code></td>
      <td style="text-align: left">Number of drop-follower events</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_heartbeat_failures</code></td>
      <td style="text-align: left">Counting failed heartbeat transmissions</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_heartbeat_send_time_msec</code></td>
      <td style="text-align: left">Time required to send heartbeat (ms)</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_http_request_statistics_async_requests</code></td>
      <td style="text-align: left">Number of asynchronously executed HTTP requests</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_http_request_statistics_http_delete_requests</code></td>
      <td style="text-align: left">Number of HTTP DELETE requests</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_http_request_statistics_http_get_requests</code></td>
      <td style="text-align: left">Number of HTTP GET requests</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_http_request_statistics_http_head_requests</code></td>
      <td style="text-align: left">Number of HTTP HEAD requests</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_http_request_statistics_http_options_requests</code></td>
      <td style="text-align: left">Number of HTTP OPTIONS requests</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_http_request_statistics_http_patch_requests</code></td>
      <td style="text-align: left">Number of HTTP PATH requests</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_http_request_statistics_http_post_requests</code></td>
      <td style="text-align: left">Number of HTTP POST requests</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_http_request_statistics_http_put_requests</code></td>
      <td style="text-align: left">Number of HTTP PUT requests</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_http_request_statistics_other_http_requests</code></td>
      <td style="text-align: left">Number of other HTTP requests</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_http_request_statistics_total_requests</code></td>
      <td style="text-align: left">Total number of HTTP requests</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_load_current_accum_runtime_msec</code></td>
      <td style="text-align: left">Accumulated Current loading time (ms)</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_load_current_runtime</code></td>
      <td style="text-align: left">Current loading runtimes</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_load_plan_accum_runtime_msec</code></td>
      <td style="text-align: left">Accumulated runtime of Plan loading (ms)</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_load_plan_runtime</code></td>
      <td style="text-align: left">Plan loading runtimes</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_maintenance_action_accum_queue_time_msec</code></td>
      <td style="text-align: left">Accumulated action queue time</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_maintenance_action_accum_runtime_msec</code></td>
      <td style="text-align: left">Accumulated action runtime</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_maintenance_action_done_counter</code></td>
      <td style="text-align: left">Counter of action that are done and have been removed from the registry</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_maintenance_action_duplicate_counter</code></td>
      <td style="text-align: left">Counter of action that have been discarded because of a duplicate</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_maintenance_action_failure_counter</code></td>
      <td style="text-align: left">Failure counter for the action</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_maintenance_action_queue_time_msec</code></td>
      <td style="text-align: left">Time spend in the queue before execution</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_maintenance_action_registered_counter</code></td>
      <td style="text-align: left">Counter of action that have been registered in the action registry</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_maintenance_action_runtime_msec</code></td>
      <td style="text-align: left">Time spend execution the action</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_maintenance_agency_sync_accum_runtime_msec</code></td>
      <td style="text-align: left">Accumulated runtime of agency sync phase</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_maintenance_agency_sync_runtime_msec</code></td>
      <td style="text-align: left">Total time spend on agency sync</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_maintenance_phase1_accum_runtime_msec</code></td>
      <td style="text-align: left">Accumulated runtime of phase one</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_maintenance_phase1_runtime_msec</code></td>
      <td style="text-align: left">Maintenance Phase 1 runtime histogram</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_maintenance_phase2_accum_runtime_msec</code></td>
      <td style="text-align: left">Accumulated runtime of phase two</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_maintenance_phase2_runtime_msec</code></td>
      <td style="text-align: left">Maintenance Phase 2 runtime histogram</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_scheduler_awake_threads</code></td>
      <td style="text-align: left">Number of awake worker threads</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_scheduler_num_worker_threads</code></td>
      <td style="text-align: left">Number of worker threads</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_scheduler_queue_full_failures</code></td>
      <td style="text-align: left">Number of times the scheduler queue was full and a task/request was rejected</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_scheduler_queue_length</code></td>
      <td style="text-align: left">Server’s internal queue length</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_server_statistics_physical_memory</code></td>
      <td style="text-align: left">Physical memory in bytes</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_server_statistics_server_uptime</code></td>
      <td style="text-align: left">Number of seconds elapsed since server start</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_shards_leader_count</code></td>
      <td style="text-align: left">Number of leader shards on this machine</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_shards_not_replicated</code></td>
      <td style="text-align: left">Number of shards not replicated at all</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_shards_out_of_sync</code></td>
      <td style="text-align: left">Number of leader shards not fully replicated</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_shards_total_count</code></td>
      <td style="text-align: left">Number of shards on this machine</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_v8_context_created</code></td>
      <td style="text-align: left">Number of V8 contexts created</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_v8_context_destroyed</code></td>
      <td style="text-align: left">Number of V8 contexts destroyed</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_v8_context_enter_failures</code></td>
      <td style="text-align: left">Number of times a V8 context could not be entered/acquired</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_v8_context_entered</code></td>
      <td style="text-align: left">Number of times a V8 context was successfully entered</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">arangodb_v8_context_exited</code></td>
      <td style="text-align: left">Number of times a V8 context was successfully exited</td>
    </tr>
  </tbody>
</table>

<h2 id="client-tools">Client tools</h2>

<p><em>arangodump</em> and <em>arangorestore</em> will now fail when using the <code class="language-plaintext highlighter-rouge">--collection</code> 
option and none of the specified collections actually exist in the database (on dump) 
or in the dump to restore (on restore). In case only some of the specified collections 
exist, <em>arangodump</em> / <em>arangorestore</em> will issue warnings about the invalid collections, 
but will continue to work for the valid collections.</p>

<p>These change were made to make end users more aware of that the executed
commands for dumping or restoring data refer to non-existing collections and 
that backup or restore operations are potentially incomplete.</p>

<h2 id="mmfiles-storage-engine">MMFiles storage engine</h2>

<p>ArangoDB 3.7 does not contain the MMFiles storage engine anymore. In ArangoDB
3.7, the only available storage engine is the RocksDB storage engine, which is
the default storage engine in ArangoDB since version 3.4. The MMFiles storage
engine had been deprecated since the release of ArangoDB 3.6.</p>

<p>Any deployments that use the MMFiles storage engine will need to be migrated to
the RocksDB storage engine using ArangoDB 3.6 (or earlier versions) in order to
upgrade to ArangoDB 3.7.</p>

<p>All storage engine selection functionality has also been removed from the
ArangoDB package installers. The RocksDB storage engine will be selected
automatically for any new deployments created with ArangoDB 3.7.</p>

<p>This change simplifies the installation procedures and internal code paths.</p>

<h2 id="internal-changes">Internal changes</h2>

<h3 id="upgraded-bundled-rocksdb-library-version">Upgraded bundled RocksDB library version</h3>

<p>The bundled version of the RocksDB library has been upgraded from 6.2 to 6.8.</p>

<h3 id="upgraded-bundled-openldap-library-version">Upgraded bundled OpenLDAP library version</h3>

<p>The OpenLDAP version used for the LDAP integration in the ArangoDB Enterprise 
Edition has been upgraded to 2.4.50.
This change has been backported to ArangoDB v3.6.5 as well.</p>

<h3 id="added-libunwind-library-dependency">Added libunwind library dependency</h3>

<p>The Linux builds of ArangoDB now use the third-party library
<a href="https://github.com/libunwind/libunwind" target="_blank">libunwind</a> to get
backtraces and to symbolize stack frames.</p>

<p>Building with libunwind can be turned off at compile time using the
<code class="language-plaintext highlighter-rouge">-DUSE_LIBUNWIND</code> CMake variable.</p>

<h3 id="removed-libcurl-library-dependency">Removed libcurl library dependency</h3>

<p>The compile-time dependency on libcurl was removed. Cluster-internal
communication is now performed using <a href="https://github.com/arangodb/fuerte" target="_blank">fuerte</a>
instead of libcurl.</p>

<h3 id="crash-handler">Crash handler</h3>

<p>The Linux builds of the arangod executable contain a built-in crash handler
The crash handler is supposed to log basic crash information to the ArangoDB
logfile in case the arangod process receives one of the signals SIGSEGV,
SIGBUS, SIGILL, SIGFPE or SIGABRT. SIGKILL signals, which the operating system
can send to a process in case of OOM (out of memory), are not interceptable and
thus cannot be intercepted by the crash handler.</p>

<p>In case the crash handler receives one of the mentioned interceptable signals,
it will write basic crash information to the logfile and a backtrace of the
call site. The backtrace can be provided to the ArangoDB support for further
inspection. Note that backtaces are only usable if debug symbols for ArangoDB
have been installed as well.</p>

<p>After logging the crash information, the crash handler will execute the default
action for the signal it has caught. If core dumps are enabled, the default
action for these signals is to generate a core file. If core dumps are not
enabled, the crash handler will simply terminate the program with a non-zero
exit code.</p>

<p>The crash handler can be disabled at server start by setting the environment
variable <code class="language-plaintext highlighter-rouge">ARANGODB_OVERRIDE_CRASH_HANDLER</code> to an empty string, <code class="language-plaintext highlighter-rouge">0</code> or <code class="language-plaintext highlighter-rouge">off</code>.</p>

<p>Also see:</p>
<ul>
  <li><a href="troubleshooting-arangod.html#other-crashes">Troubleshooting Arangod</a></li>
  <li><a href="programs-arangod-env-vars.html">Server environment variables</a></li>
</ul>

<h3 id="supported-compilers">Supported compilers</h3>

<p>Manually compiling ArangoDB from source will require a C++17-ready compiler.</p>

<p>Older versions of g++ that could be used to compile previous versions of
ArangoDB, namely g++7, cannot be used anymore for compiling ArangoDB.
g++9.2, g++9.3 and g++10 are known to work, and are the preferred compilers 
to build ArangoDB under Linux.</p>

<p>Under macOS, the official compiler is clang with a minimal target of
macOS 10.14 (Mojave).</p>

<p>Under Windows, use the Visual C++ compiler of Visual Studio 2019 v16.5.0 or
later. VS 2017 might still work, but is not officially supported any longer.</p>

<h3 id="documentation-generation">Documentation generation</h3>

<p>The following features have been added for auto-generating documentation:</p>

<ul>
  <li>the <code class="language-plaintext highlighter-rouge">--dump-options</code> command for arangod and the client tools now also emits
an attribute <code class="language-plaintext highlighter-rouge">os</code> which indicates on which operating system(s) the respective
options are supported.</li>
  <li>the <code class="language-plaintext highlighter-rouge">--dump-options</code> command for arangod now also emits an attribute
<code class="language-plaintext highlighter-rouge">component</code> which indicates for which node type(s) the respective options are
supported (<code class="language-plaintext highlighter-rouge">single</code> server, <code class="language-plaintext highlighter-rouge">coordinator</code>, <code class="language-plaintext highlighter-rouge">dbserver</code>, <code class="language-plaintext highlighter-rouge">agent</code>).</li>
</ul>

            </section>
            
<section class="page-nav">
  <a href="release-notes-37.html">&#x276e;&nbsp;&nbsp;Version 3.7</a>
  <a class="next" href="release-notes-known-issues37.html">Known Issues in 3.7&nbsp;&nbsp;&#x276f;</a>
  <div style="clear: both"></div>
</section>
            <div id="page-footer" class="localized-footer">
              <hr>
              <p>© ArangoDB - the native multi-model NoSQL database</p>
            </div>
          </div>
        </div>
        <script type="text/javascript">
          var disablePageToc = null;
          if (!disablePageToc) {
            generateToc();
          }
        </script>
      </div>
    </div>
  </div>
  <!-- Including InstantSearch.js library and styling -->
<script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch.min.js"></script>
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch.min.css">
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch-theme-algolia.min.css">

<script>
// Instanciating InstantSearch.js with Algolia credentials
const search = instantsearch({
  appId: 'IOUJQ85602',
  indexName: 'dev_DOCS',
  apiKey: '1fc63d8ff5b71963f0354561b770b591',
  searchFunction: function(helper) {
    var container = document.querySelector('#search-hits');

    if (helper.state.query === '') {
        container.style.display = 'none';
    } else {
        container.style.display = '';
    }

    helper.search();
  }
});

// Adding searchbar and results widgets
search.addWidget(
  instantsearch.widgets.searchBox({
    container: '#search-searchbar',
    placeholder: 'Search Documentation...',
    poweredBy: false // This is required if you're on the free Community plan
  })
);
search.addWidget(
    instantsearch.widgets.hits({
        container: '#search-hits',
        templates: {
            item: function(hit) {
                return '<div class="post-item">' +
                    '<a class="post-link" href="https://www.arangodb.com/docs'&#32;+&#32;hit.url&#32;+&#32;'"><div>' + (hit.headings[0] || "ArangoDB Documentation") + '</div>' +
                    '<div class="post-snippet">' + hit.excerpt_text + '</div></a>' +
                    '</div>';
            },
        },
    })
);

// Starting the search
search.start();
</script>
  <script type="text/javascript" id="hs-script-loader" async defer src="https://js.hs-scripts.com/2482448.js"></script>
</body>
</html>
