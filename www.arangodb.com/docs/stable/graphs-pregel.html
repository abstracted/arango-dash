<!DOCTYPE html>
<html lang="en">
<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="canonical" href="graphs-pregel.html">
<title>Distributed Iterative Graph Processing (Pregel) | ArangoDB Documentation</title>
<meta itemprop="description" name="description" content="Pregel enables you to do online analytical processing directly on graphs stored in ArangoDB." />
<meta name="robots" content="index, follow" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta property="og:url" content="https://www.arangodb.com/docs/stable/graphs-pregel.html" />
<meta property="og:title" content="Distributed Iterative Graph Processing (Pregel) | ArangoDB Documentation" />
<meta property="og:type" content="website" />
<meta property="og:description" content="Pregel enables you to do online analytical processing directly on graphs stored in ArangoDB." />

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-81053435-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-81053435-1');
</script>

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-5LQ7HC');
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('provide', 'adblockTracker', function(tracker, opts) {
    var ad = document.createElement('ins');
    ad.className = 'AdSense';
    ad.style.display = 'block';
    ad.style.position = 'absolute';
    ad.style.top = '-1px';
    ad.style.height = '1px';
    document.body.appendChild(ad);
    tracker.set('dimension' + opts.dimensionIndex, !ad.clientHeight);
    document.body.removeChild(ad);
  });

  ga('create', 'UA-81053435-6', 'auto');
  ga('require', 'adblockTracker', {dimensionIndex: 1});
  ga('send', 'pageview');
</script>

<script>
  !function(e,t,n,s,u,a){e.twq||(s=e.twq=function(){s.exe?s.exe.apply(s,arguments):s.queue.push(arguments);
  },s.version='1.1',s.queue=[],u=t.createElement(n),u.async=!0,u.src='//static.ads-twitter.com/uwt.js',
  a=t.getElementsByTagName(n)[0],a.parentNode.insertBefore(u,a))}(window,document,'script');
  twq('init','nz793');
  twq('track','PageView');
</script>

<script type="text/javascript">
  _linkedin_partner_id = "499017";
  window._linkedin_data_partner_ids = window._linkedin_data_partner_ids || [];
  window._linkedin_data_partner_ids.push(_linkedin_partner_id);
  </script><script type="text/javascript">
  (function(){var s = document.getElementsByTagName("script")[0];
  var b = document.createElement("script");
  b.type = "text/javascript";b.async = true;
  b.src = "https://snap.licdn.com/li.lms-analytics/insight.min.js";
  s.parentNode.insertBefore(b, s);})();
</script>

<link rel="shortcut icon" href="../../wp-content/uploads/2018/07/www.arangodb.com-favicon.png">
<link rel="stylesheet" href="../styles/gitbook/style.css">
<link rel="stylesheet" href="../styles/gitbook/highlight-website.css">
<link rel="stylesheet" href="../styles/gitbook/fontsettings-website.css">
<link rel="stylesheet" href="../styles/website.css">
<link rel="stylesheet" href="../styles/header.css">
<link rel="stylesheet" href="../styles/navbar.css">
<link rel="stylesheet" href="../styles/site.css">
<link rel="stylesheet" href="../styles/pygments-vs.css">
<script src="../js/jquery-3.4.0.min.js"></script>
<script src="../js/site.js"></script>
</head>
<body>
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5LQ7HC" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<noscript><img height="1" width="1" style="display:none;" alt="" src="https://dc.ads.linkedin.com/collect/?pid=499017&fmt=gif" /></noscript>

<div class="arangodb-header">
  <div class="arangodb-logo">
    <a href="https://arangodb.com/">
      <img src="../assets/arangodb_logo_2016.png" alt="ArangoDB Logo">
    </a>
  </div>
  <div class="arangodb-logo-small">
    <a href="https://arangodb.com/">
      <img src="../assets/arangodb_logo_small_2016.png" alt="ArangoDB Logo">
    </a>
  </div>
  <select class="arangodb-version-switcher">
      <option value="devel">3.8</option>
      <option value="stable">3.7</option>
      <option value="3.6">3.6</option>
      <option value="3.5">3.5</option>
      <option value="3.4">3.4</option>
      <option value="3.3">3.3</option>
  </select>
  <script type="text/javascript">
    var versionAliases = {"stable":"3.7","devel":"3.8"};
    var current = location.href;

    var selectedVersion = current.split('/')[4];
    var switcher = document.querySelector(".arangodb-version-switcher");

    for (var i = 0; i < switcher.options.length; i++) {
      var value = switcher.options.item(i).value;
      if (value == selectedVersion) {
        switcher.value = value;
      } else if (versionAliases[value] == selectedVersion) {
        switcher.value = value;
      }
    }
    
    switcher.addEventListener('change', function(event) {
      var current = location.href;
      var urlElements = current.split('/');
      urlElements[4] = event.target.value;
      var newUrl = urlElements.join("/");
      location.href = newUrl;
    });
  </script>
  <ul class="arangodb-navmenu">
    <li class="active-tab">
      <a href="index.html" data-book="Manual">Manual</a>
    </li>
    <li>
      <a href="aql/index.html" data-book="AQL">AQL</a>
    </li>
    <li>
      <a href="http/index.html" data-book="HTTP">HTTP</a>
    </li>
    <li>
      <a href="drivers/index.html" data-book="Drivers">Drivers</a>
    </li>
    <li>
      <a href="oasis/index.html" data-book="Oasis">Oasis</a>
    </li>
    <li class="socialIcons" title="GitHub">
      <a href="https://github.com/ArangoDB/ArangoDB/issues" target="_blank">
        <i class="fa fa-github"></i>
      </a>
    </li>
    <li class="socialIcons" title="StackOverflow">
      <a href="https://stackoverflow.com/questions/tagged/arangodb" target="_blank">
        <i class="fa fa-stack-overflow"></i>
      </a>
    </li>
    <li class="socialIcons socialIcons-googlegroups" title="Google Groups">
      <a href="https://groups.google.com/forum/#!forum/arangodb" target="_blank">
        <img alt="Google Groups" src="../assets/googlegroupsIcon.png">
      </a>
    </li>
    <li class="socialIcons" title="Slack">
      <a href="https://slack.arangodb.com" target="_blank">
        <i class="fa fa-slack"></i>
      </a>
    </li>
    <li>
      <div class="searchbar">
        <div id="search-searchbar"></div>
      </div>
    </li>
    <li class="placeholder">
      <div style="width: 15px"></div>
    </li>
  </ul>
  <div id="search-hits"></div>
</div>
 
  <div class="book with-summary font-size-2 font-family-1">
    <div class="book-summary">
      <nav role="navigation">
    <ul class="summary">
  <li class="chapter">
  <a href="index.html">Introduction</a>
  </li>
  <li class="chapter">
  <a href="highlights.html">Highlights</a>
  </li>
  <li class="header">GETTING FAMILIAR</li>
  <li class="chapter">
  <a href="getting-started.html">Getting Started</a>
    <ul class="articles">
      <li class="chapter">
      <a href="getting-started-installation.html">Installation</a>
      </li>
      <li class="chapter">
      <a href="getting-started-authentication.html">Authentication</a>
      </li>
      <li class="chapter">
      <a href="getting-started-web-interface.html">Web Interface</a>
      </li>
      <li class="chapter">
      <a href="getting-started-databases-collections-documents.html">Databases, Collections and Documents</a>
      </li>
      <li class="chapter">
      <a href="getting-started-querying-the-database.html">Querying the Database</a>
      </li>
      <li class="chapter">
      <a href="getting-started-coming-from-sql.html">Coming from SQL</a>
      </li>
      <li class="chapter">
      <a href="getting-started-next-steps.html">Next Steps</a>
      </li>
    </ul>
  </li>
  <li class="chapter">
  <a href="tutorials.html">Tutorials</a>
    <ul class="articles">
      <li class="chapter">
      <a href="tutorials-reduce-memory-footprint.html">Reduce Memory Footprint</a>
      </li>
      <li class="chapter">
      <a href="tutorials-starter.html">ArangoDB Starter</a>
      </li>
      <li class="chapter">
      <a href="tutorials-dc2-dc.html">Datacenter to datacenter Replication</a>
      </li>
      <li class="chapter">
      <a href="tutorials-kubernetes.html">Kubernetes</a>
        <ul class="articles">
          <li class="chapter">
          <a href="tutorials-kubernetes-eks.html">Amazon EKS</a>
          </li>
          <li class="chapter">
          <a href="tutorials-kubernetes-gke.html">Google GKE</a>
          </li>
          <li class="chapter">
          <a href="tutorials-kubernetes-aks.html">Azure AKS</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="tutorials-kubernetes-dc2-dc.html">DC2DC on Kubernetes</a>
      </li>
    </ul>
  </li>
  <li class="chapter">
  <a href="programs.html">Programs & Tools</a>
    <ul class="articles">
      <li class="chapter">
      <a href="programs-arangod.html">ArangoDB Server</a>
        <ul class="articles">
          <li class="chapter">
          <a href="programs-arangod-options.html">Options</a>
            <ul class="articles">
              <li class="chapter">
              <a href="programs-arangod-global.html">Global</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-agency.html">Agency</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-arangosearch.html">ArangoSearch</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-audit.html">Audit</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-cache.html">Cache</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-backup.html">Backup</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-cluster.html">Cluster</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-compaction.html">Compaction</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-database.html">Database</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-foxx.html">Foxx</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-frontend.html">Frontend</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-http.html">HTTP</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-javascript.html">JavaScript</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-ldap.html">LDAP</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-log.html">Log</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-network.html">Network</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-nonce.html">Nonce</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-query.html">Query</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-random.html">Random</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-replication.html">Replication</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-rclone.html">Rclone</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-rocksdb.html">RocksDB</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-server.html">Server</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-ssl.html">SSL</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-tcp.html">TCP</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-temp.html">Temp</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-transaction.html">Transaction</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-ttl.html">TTL</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-vst.html">VST</a>
              </li>
              <li class="chapter">
              <a href="programs-arangod-wal.html">WAL</a>
              </li>
            </ul>
          </li>
          <li class="chapter">
          <a href="programs-arangod-env-vars.html">Environment variables</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="programs-web-interface.html">Web Interface</a>
        <ul class="articles">
          <li class="chapter">
          <a href="programs-web-interface-dashboard.html">Dashboard</a>
          </li>
          <li class="chapter">
          <a href="programs-web-interface-cluster.html">Cluster</a>
          </li>
          <li class="chapter">
          <a href="programs-web-interface-collections.html">Collections</a>
          </li>
          <li class="chapter">
          <a href="programs-web-interface-document.html">Document</a>
          </li>
          <li class="chapter">
          <a href="programs-web-interface-aql-editor.html">Queries</a>
          </li>
          <li class="chapter">
          <a href="programs-web-interface-graphs.html">Graphs</a>
          </li>
          <li class="chapter">
          <a href="programs-web-interface-services.html">Services</a>
          </li>
          <li class="chapter">
          <a href="programs-web-interface-users.html">Users</a>
          </li>
          <li class="chapter">
          <a href="programs-web-interface-logs.html">Logs</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="programs-arangosh.html">ArangoDB Shell</a>
        <ul class="articles">
          <li class="chapter">
          <a href="programs-arangosh-examples.html">Examples</a>
          </li>
          <li class="chapter">
          <a href="programs-arangosh-details.html">Details</a>
          </li>
          <li class="chapter">
          <a href="programs-arangosh-options.html">Options</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="programs-starter.html">ArangoDB Starter</a>
        <ul class="articles">
          <li class="chapter">
          <a href="programs-starter-options.html">Options</a>
          </li>
          <li class="chapter">
          <a href="programs-starter-security.html">Security</a>
          </li>
          <li class="chapter">
          <a href="programs-starter-architecture.html">Architecture</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="programs-arangodump.html">Arangodump</a>
        <ul class="articles">
          <li class="chapter">
          <a href="programs-arangodump-examples.html">Examples</a>
          </li>
          <li class="chapter">
          <a href="programs-arangodump-options.html">Options</a>
          </li>
          <li class="chapter">
          <a href="programs-arangodump-maskings.html">Maskings</a>
          </li>
          <li class="chapter">
          <a href="programs-arangodump-limitations.html">Limitations</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="programs-arangorestore.html">Arangorestore</a>
        <ul class="articles">
          <li class="chapter">
          <a href="programs-arangorestore-examples.html">Examples</a>
          </li>
          <li class="chapter">
          <a href="programs-arangorestore-fast-cluster-restore.html">Fast Cluster Restore</a>
          </li>
          <li class="chapter">
          <a href="programs-arangorestore-options.html">Options</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="programs-arangobackup.html">Arangobackup</a>
        <ul class="articles">
          <li class="chapter">
          <a href="programs-arangobackup-examples.html">Examples</a>
          </li>
          <li class="chapter">
          <a href="programs-arangobackup-options.html">Options</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="programs-arangoimport.html">Arangoimport</a>
        <ul class="articles">
          <li class="chapter">
          <a href="programs-arangoimport-examples-json.html">Examples JSON</a>
          </li>
          <li class="chapter">
          <a href="programs-arangoimport-examples-csv.html">Examples CSV</a>
          </li>
          <li class="chapter">
          <a href="programs-arangoimport-details.html">Details</a>
          </li>
          <li class="chapter">
          <a href="programs-arangoimport-options.html">Options</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="programs-arangoexport.html">Arangoexport</a>
        <ul class="articles">
          <li class="chapter">
          <a href="programs-arangoexport-examples.html">Examples</a>
          </li>
          <li class="chapter">
          <a href="programs-arangoexport-options.html">Options</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="programs-arangobench.html">Arangobench</a>
        <ul class="articles">
          <li class="chapter">
          <a href="programs-arangobench-examples.html">Examples</a>
          </li>
          <li class="chapter">
          <a href="programs-arangobench-options.html">Options</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="programs-arangoinspect.html">Arangoinspect</a>
        <ul class="articles">
          <li class="chapter">
          <a href="programs-arangoinspect-examples.html">Examples</a>
          </li>
          <li class="chapter">
          <a href="programs-arangoinspect-options.html">Options</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="programs-foxx-cli.html">Foxx CLI</a>
        <ul class="articles">
          <li class="chapter">
          <a href="programs-foxx-cli-details.html">Details</a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li class="header">CORE TOPICS</li>
  <li class="chapter">
  <a href="data-modeling.html">Data models & modeling</a>
    <ul class="articles">
      <li class="chapter">
      <a href="data-modeling-concepts.html">Concepts</a>
      </li>
      <li class="chapter">
      <a href="data-modeling-databases.html">Databases</a>
        <ul class="articles">
          <li class="chapter">
          <a href="data-modeling-databases-working-with.html">Working with Databases</a>
          </li>
          <li class="chapter">
          <a href="data-modeling-databases-notes.html">Notes about Databases</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="data-modeling-collections.html">Collections</a>
        <ul class="articles">
          <li class="chapter">
          <a href="data-modeling-collections-collection-methods.html">Collection Methods</a>
          </li>
          <li class="chapter">
          <a href="data-modeling-collections-database-methods.html">Database Methods</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="data-modeling-documents.html">Documents</a>
        <ul class="articles">
          <li class="chapter">
          <a href="data-modeling-documents-document-address.html">Basics and Terminology</a>
          </li>
          <li class="chapter">
          <a href="data-modeling-documents-document-methods.html">Collection Methods</a>
          </li>
          <li class="chapter">
          <a href="data-modeling-documents-database-methods.html">Database Methods</a>
          </li>
          <li class="chapter">
          <a href="data-modeling-documents-schema-validation.html">Schema Validation</a>
          </li>
          <li class="chapter">
          <a href="data-modeling-monetary-data-without-precision-loss.html">Monetary data without precision loss</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="data-modeling-graphs-vertices-edges.html">Graphs, Vertices & Edges</a>
      </li>
      <li class="chapter">
      <a href="data-modeling-views.html">Views</a>
        <ul class="articles">
          <li class="chapter">
          <a href="data-modeling-views-database-methods.html">Database Methods</a>
          </li>
          <li class="chapter">
          <a href="data-modeling-views-view-methods.html">View Methods</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="data-modeling-naming-conventions.html">Naming Conventions</a>
        <ul class="articles">
          <li class="chapter">
          <a href="data-modeling-naming-conventions-database-names.html">Database Names</a>
          </li>
          <li class="chapter">
          <a href="data-modeling-naming-conventions-collection-and-view-names.html">Collection and View Names</a>
          </li>
          <li class="chapter">
          <a href="data-modeling-naming-conventions-document-keys.html">Document Keys</a>
          </li>
          <li class="chapter">
          <a href="data-modeling-naming-conventions-attribute-names.html">Attribute Names</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="data-modeling-operational-factors.html">Operational Factors</a>
      </li>
    </ul>
  </li>
  <li class="chapter">
  <a href="indexing.html">Indexing</a>
    <ul class="articles">
      <li class="chapter">
      <a href="indexing-index-basics.html">Index Basics</a>
      </li>
      <li class="chapter">
      <a href="indexing-which-index.html">Which index to use when</a>
      </li>
      <li class="chapter">
      <a href="indexing-index-utilization.html">Index Utilization</a>
      </li>
      <li class="chapter">
      <a href="indexing-working-with-indexes.html">Working with Indexes</a>
        <ul class="articles">
          <li class="chapter">
          <a href="indexing-persistent.html">Persistent</a>
          </li>
          <li class="chapter">
          <a href="indexing-ttl.html">TTL Indexes</a>
          </li>
          <li class="chapter">
          <a href="indexing-fulltext.html">Fulltext Indexes</a>
          </li>
          <li class="chapter">
          <a href="indexing-geo.html">Geo-spatial Indexes</a>
          </li>
          <li class="chapter">
          <a href="indexing-vertex-centric.html">Vertex Centric Indexes</a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li class="chapter">
  <a href="transactions.html">Transactions</a>
    <ul class="articles">
      <li class="chapter">
      <a href="transactions-transaction-invocation.html">Transaction invocation</a>
      </li>
      <li class="chapter">
      <a href="transactions-passing.html">Passing parameters</a>
      </li>
      <li class="chapter">
      <a href="transactions-locking-and-isolation.html">Locking and isolation</a>
      </li>
      <li class="chapter">
      <a href="transactions-durability.html">Durability</a>
      </li>
      <li class="chapter">
      <a href="transactions-limitations.html">Limitations</a>
      </li>
    </ul>
  </li>
  <li class="chapter selected">
  <a href="graphs.html">Graphs</a>
    <ul class="articles">
      <li class="chapter">
      <a href="graphs-general-graphs.html">General Graphs</a>
        <ul class="articles">
          <li class="chapter">
          <a href="graphs-general-graphs-management.html">Graph Management</a>
          </li>
          <li class="chapter">
          <a href="graphs-general-graphs-functions.html">Graph Functions</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="graphs-satellite-graphs.html">SatelliteGraphs</a>
        <ul class="articles">
          <li class="chapter">
          <a href="graphs-satellite-graphs-management.html">Management</a>
          </li>
          <li class="chapter">
          <a href="graphs-satellite-graphs-details.html">Details</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="graphs-smart-graphs.html">SmartGraphs</a>
        <ul class="articles">
          <li class="chapter">
          <a href="graphs-smart-graphs-management.html">SmartGraph Management</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="graphs-traversals.html">Traversals</a>
        <ul class="articles">
          <li class="chapter">
          <a href="graphs-traversals-using-traversal-objects.html">Using Traversal Objects</a>
          </li>
          <li class="chapter">
          <a href="graphs-traversals-example-data.html">Example Data</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="graphs-edges.html">Working with Edges</a>
      </li>
      <li class="chapter selected active">
      <a href="graphs-pregel.html">Pregel</a>
      </li>
    </ul>
  </li>
  <li class="chapter">
  <a href="arangosearch.html">ArangoSearch</a>
    <ul class="articles">
      <li class="chapter">
      <a href="arangosearch-views.html">Views</a>
      </li>
      <li class="chapter">
      <a href="arangosearch-analyzers.html">Analyzers</a>
      </li>
      <li class="chapter">
      <a href="arangosearch-examples.html">Examples</a>
      </li>
    </ul>
  </li>
  <li class="header">ADVANCED TOPICS</li>
  <li class="chapter">
  <a href="architecture.html">Architecture</a>
    <ul class="articles">
      <li class="chapter">
      <a href="architecture-deployment-modes.html">ArangoDB Deployment Modes</a>
        <ul class="articles">
          <li class="chapter">
          <a href="architecture-deployment-modes-single-instance.html">Single Instance</a>
          </li>
          <li class="chapter">
          <a href="architecture-deployment-modes-master-slave.html">Master/Slave</a>
            <ul class="articles">
              <li class="chapter">
              <a href="architecture-deployment-modes-master-slave-architecture.html">Architecture</a>
              </li>
              <li class="chapter">
              <a href="architecture-deployment-modes-master-slave-limitations.html">Limitations</a>
              </li>
            </ul>
          </li>
          <li class="chapter">
          <a href="architecture-deployment-modes-active-failover.html">Active Failover</a>
            <ul class="articles">
              <li class="chapter">
              <a href="architecture-deployment-modes-active-failover-architecture.html">Architecture</a>
              </li>
              <li class="chapter">
              <a href="architecture-deployment-modes-active-failover-limitations.html">Limitations</a>
              </li>
            </ul>
          </li>
          <li class="chapter">
          <a href="architecture-deployment-modes-cluster.html">Cluster</a>
            <ul class="articles">
              <li class="chapter">
              <a href="architecture-deployment-modes-cluster-architecture.html">Architecture</a>
              </li>
              <li class="chapter">
              <a href="architecture-deployment-modes-cluster-data-models.html">Data Models</a>
              </li>
              <li class="chapter">
              <a href="architecture-deployment-modes-cluster-sharding.html">Data Sharding</a>
              </li>
              <li class="chapter">
              <a href="architecture-deployment-modes-cluster-limitations.html">Limitations</a>
              </li>
            </ul>
          </li>
          <li class="chapter">
          <a href="architecture-deployment-modes-dc2-dc.html">Datacenter to datacenter replication</a>
            <ul class="articles">
              <li class="chapter">
              <a href="architecture-deployment-modes-dc2-dc-introduction.html">Introduction</a>
              </li>
              <li class="chapter">
              <a href="architecture-deployment-modes-dc2-dc-applicability.html">Applicability</a>
              </li>
              <li class="chapter">
              <a href="architecture-deployment-modes-dc2-dc-requirements.html">Requirements</a>
              </li>
              <li class="chapter">
              <a href="architecture-deployment-modes-dc2-dc-limitations.html">Limitations</a>
              </li>
            </ul>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="architecture-single-instance-vs-cluster.html">Single Instance vs. Cluster</a>
      </li>
      <li class="chapter">
      <a href="architecture-storage-engines.html">Storage Engines</a>
      </li>
      <li class="chapter">
      <a href="architecture-replication.html">Replication</a>
      </li>
      <li class="chapter">
      <a href="architecture-write-ahead-log.html">Write-ahead log</a>
      </li>
    </ul>
  </li>
  <li class="chapter">
  <a href="foxx.html">Foxx Microservices</a>
    <ul class="articles">
      <li class="chapter">
      <a href="foxx-getting-started.html">Getting started</a>
      </li>
      <li class="chapter">
      <a href="foxx-guides.html">Guides</a>
        <ul class="articles">
          <li class="chapter">
          <a href="foxx-guides-routing.html">Working with routers</a>
          </li>
          <li class="chapter">
          <a href="foxx-guides-collections.html">Working with collections</a>
          </li>
          <li class="chapter">
          <a href="foxx-guides-queries.html">Writing queries</a>
          </li>
          <li class="chapter">
          <a href="foxx-guides-development-mode.html">Development mode</a>
          </li>
          <li class="chapter">
          <a href="foxx-guides-testing.html">Testing Foxx services</a>
          </li>
          <li class="chapter">
          <a href="foxx-guides-cluster.html">Foxx in a cluster</a>
          </li>
          <li class="chapter">
          <a href="foxx-guides-scripts.html">Scripts and scheduling</a>
          </li>
          <li class="chapter">
          <a href="foxx-guides-bundled-node-modules.html">Using Node modules</a>
          </li>
          <li class="chapter">
          <a href="foxx-guides-webpack.html">Using Webpack with Foxx</a>
          </li>
          <li class="chapter">
          <a href="foxx-guides-auth.html">Authentication and sessions</a>
          </li>
          <li class="chapter">
          <a href="foxx-guides-dependencies.html">Linking services together</a>
          </li>
          <li class="chapter">
          <a href="foxx-guides-files.html">Working with files</a>
          </li>
          <li class="chapter">
          <a href="foxx-guides-making-requests.html">Making requests</a>
          </li>
          <li class="chapter">
          <a href="foxx-guides-browser.html">Access from the browser</a>
          </li>
          <li class="chapter">
          <a href="foxx-guides-legacy-mode.html">Working with 2.x services</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="foxx-reference.html">Reference</a>
        <ul class="articles">
          <li class="chapter">
          <a href="foxx-reference-manifest.html">Service manifest</a>
          </li>
          <li class="chapter">
          <a href="foxx-reference-context.html">Service context</a>
          </li>
          <li class="chapter">
          <a href="foxx-reference-configuration.html">Configuration</a>
          </li>
          <li class="chapter">
          <a href="foxx-reference-routers.html">Routers</a>
            <ul class="articles">
              <li class="chapter">
              <a href="foxx-reference-routers-endpoints.html">Endpoints</a>
              </li>
              <li class="chapter">
              <a href="foxx-reference-routers-middleware.html">Middleware</a>
              </li>
              <li class="chapter">
              <a href="foxx-reference-routers-request.html">Request</a>
              </li>
              <li class="chapter">
              <a href="foxx-reference-routers-response.html">Response</a>
              </li>
            </ul>
          </li>
          <li class="chapter">
          <a href="foxx-reference-sessions.html">Sessions middleware</a>
            <ul class="articles">
              <li class="chapter">
              <a href="foxx-reference-sessions-storages.html">Session storages</a>
                <ul class="articles">
                  <li class="chapter">
                  <a href="foxx-reference-sessions-storages-collection.html">Collection storage</a>
                  </li>
                  <li class="chapter">
                  <a href="foxx-reference-sessions-storages-jwt.html">JWT storage</a>
                  </li>
                </ul>
              </li>
              <li class="chapter">
              <a href="foxx-reference-sessions-transports.html">Session transports</a>
                <ul class="articles">
                  <li class="chapter">
                  <a href="foxx-reference-sessions-transports-cookie.html">Cookie transport</a>
                  </li>
                  <li class="chapter">
                  <a href="foxx-reference-sessions-transports-header.html">Header transport</a>
                  </li>
                </ul>
              </li>
            </ul>
          </li>
          <li class="chapter">
          <a href="foxx-reference-modules.html">Related modules</a>
            <ul class="articles">
              <li class="chapter">
              <a href="foxx-reference-modules-auth.html">Authentication</a>
              </li>
              <li class="chapter">
              <a href="foxx-reference-modules-oauth1.html">OAuth 1.0a</a>
              </li>
              <li class="chapter">
              <a href="foxx-reference-modules-oauth2.html">OAuth 2.0</a>
              </li>
              <li class="chapter">
              <a href="foxx-reference-modules-graph-ql.html">GraphQL</a>
              </li>
              <li class="chapter">
              <a href="foxx-reference-modules-queues.html">Queues</a>
              </li>
            </ul>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="foxx-deployment.html">Deployment</a>
      </li>
      <li class="chapter">
      <a href="foxx-migrating2x.html">Migrating 2.x services</a>
        <ul class="articles">
          <li class="chapter">
          <a href="foxx-migrating2x-wayback.html">Migrating from pre-2.8</a>
          </li>
          <li class="chapter">
          <a href="foxx-migrating2x-manifest.html">manifest.json</a>
          </li>
          <li class="chapter">
          <a href="foxx-migrating2x-context.html">applicationContext</a>
          </li>
          <li class="chapter">
          <a href="foxx-migrating2x-repositories.html">Repositories and Models</a>
          </li>
          <li class="chapter">
          <a href="foxx-migrating2x-controllers.html">Controllers</a>
            <ul class="articles">
              <li class="chapter">
              <a href="foxx-migrating2x-controllers-endpoints.html">Request context</a>
              </li>
              <li class="chapter">
              <a href="foxx-migrating2x-controllers-errors.html">Error handling</a>
              </li>
              <li class="chapter">
              <a href="foxx-migrating2x-controllers-middleware.html">Before/After/Around</a>
              </li>
              <li class="chapter">
              <a href="foxx-migrating2x-controllers-request.html">Request object</a>
              </li>
              <li class="chapter">
              <a href="foxx-migrating2x-controllers-response.html">Response object</a>
              </li>
              <li class="chapter">
              <a href="foxx-migrating2x-controllers-io-c.html">Dependency Injection</a>
              </li>
            </ul>
          </li>
          <li class="chapter">
          <a href="foxx-migrating2x-sessions.html">Sessions</a>
          </li>
          <li class="chapter">
          <a href="foxx-migrating2x-auth.html">Auth and OAuth2</a>
          </li>
          <li class="chapter">
          <a href="foxx-migrating2x-queries.html">Foxx Queries</a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li class="chapter">
  <a href="satellites.html">SatelliteCollections</a>
  </li>
  <li class="chapter">
  <a href="smartjoins.html">SmartJoins</a>
  </li>
  <li class="header">OPERATIONS</li>
  <li class="chapter">
  <a href="installation.html">Installation</a>
    <ul class="articles">
      <li class="chapter">
      <a href="installation-linux.html">Linux</a>
        <ul class="articles">
          <li class="chapter">
          <a href="installation-linux-osconfiguration.html">Operating System Configuration</a>
          </li>
          <li class="chapter">
          <a href="installation-linux-ostuning-scripts.html">Linux OS Tuning Script Examples</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="installation-mac-osx.html">macOS</a>
      </li>
      <li class="chapter">
      <a href="installation-windows.html">Windows</a>
      </li>
      <li class="chapter">
      <a href="installation-compiling.html">Compiling</a>
        <ul class="articles">
          <li class="chapter">
          <a href="installation-compiling-debian.html">Compile on Debian</a>
          </li>
          <li class="chapter">
          <a href="installation-compiling-windows.html">Compile on Windows</a>
          </li>
          <li class="chapter">
          <a href="installation-compiling-running-custom-build.html">Running Custom Build</a>
          </li>
          <li class="chapter">
          <a href="installation-compiling-jemalloc.html">Recompiling jemalloc</a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li class="chapter">
  <a href="uninstallation.html">Uninstallation</a>
  </li>
  <li class="chapter">
  <a href="deployment.html">Deployment</a>
    <ul class="articles">
      <li class="chapter">
      <a href="deployment-modes.html">By ArangoDB Deployment Modes</a>
        <ul class="articles">
          <li class="chapter">
          <a href="deployment-single-instance.html">Single Instance</a>
            <ul class="articles">
              <li class="chapter">
              <a href="deployment-single-instance-using-the-starter.html">Using the ArangoDB Starter</a>
              </li>
              <li class="chapter">
              <a href="deployment-single-instance-manual-start.html">Manual Start</a>
              </li>
            </ul>
          </li>
          <li class="chapter">
          <a href="deployment-master-slave.html">Master/Slave</a>
            <ul class="articles">
              <li class="chapter">
              <a href="deployment-master-slave-manual-start.html">Manual Start</a>
              </li>
            </ul>
          </li>
          <li class="chapter">
          <a href="deployment-active-failover.html">Active Failover</a>
            <ul class="articles">
              <li class="chapter">
              <a href="deployment-active-failover-using-the-starter.html">Using the ArangoDB Starter</a>
              </li>
              <li class="chapter">
              <a href="deployment-active-failover-manual-start.html">Manual Start</a>
              </li>
            </ul>
          </li>
          <li class="chapter">
          <a href="deployment-cluster.html">Cluster</a>
            <ul class="articles">
              <li class="chapter">
              <a href="deployment-cluster-preliminary-information.html">Preliminary Information</a>
              </li>
              <li class="chapter">
              <a href="deployment-cluster-using-the-starter.html">Using the ArangoDB Starter</a>
              </li>
              <li class="chapter">
              <a href="deployment-cluster-manual-start.html">Manual Start</a>
              </li>
              <li class="chapter">
              <a href="deployment-cluster-kubernetes.html">Kubernetes</a>
              </li>
            </ul>
          </li>
          <li class="chapter">
          <a href="deployment-dc2-dc.html">Multiple Datacenters</a>
            <ul class="articles">
              <li class="chapter">
              <a href="deployment-dc2-dc-cluster.html">Cluster</a>
              </li>
              <li class="chapter">
              <a href="deployment-dc2-dc-arango-sync-master.html">ArangoSync Master</a>
              </li>
              <li class="chapter">
              <a href="deployment-dc2-dc-arango-sync-workers.html">ArangoSync Workers</a>
              </li>
              <li class="chapter">
              <a href="deployment-dc2-dc-prometheus-grafana.html">Prometheus & Grafana</a>
              </li>
            </ul>
          </li>
          <li class="chapter">
          <a href="deployment-standalone-agency.html">Standalone Agency</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="deployment-technology.html">By Technology</a>
        <ul class="articles">
          <li class="chapter">
          <a href="deployment-manually.html">Manually</a>
          </li>
          <li class="chapter">
          <a href="deployment-arango-dbstarter.html">ArangoDB Starter</a>
          </li>
          <li class="chapter">
          <a href="deployment-docker.html">Docker</a>
          </li>
          <li class="chapter">
          <a href="deployment-kubernetes.html">Kubernetes</a>
            <ul class="articles">
              <li class="chapter">
              <a href="deployment-kubernetes-usage.html">Using the Operator</a>
              </li>
              <li class="chapter">
              <a href="deployment-kubernetes-dashboards.html">Dashboards</a>
              </li>
              <li class="chapter">
              <a href="deployment-kubernetes-deployment-resource.html">Deployment Resource Reference</a>
              </li>
              <li class="chapter">
              <a href="deployment-kubernetes-backup-resource.html">Backup Resource</a>
              </li>
              <li class="chapter">
              <a href="deployment-kubernetes-backup-policy-resource.html">BackupPolicy Resource</a>
              </li>
              <li class="chapter">
              <a href="deployment-kubernetes-driver-configuration.html">Driver Configuration</a>
              </li>
              <li class="chapter">
              <a href="deployment-kubernetes-helm.html">Helm</a>
              </li>
              <li class="chapter">
              <a href="deployment-kubernetes-authentication.html">Authentication</a>
              </li>
              <li class="chapter">
              <a href="deployment-kubernetes-scaling.html">Scaling</a>
              </li>
              <li class="chapter">
              <a href="deployment-kubernetes-drain.html">Draining Nodes</a>
              </li>
              <li class="chapter">
              <a href="deployment-kubernetes-upgrading.html">Upgrading</a>
              </li>
              <li class="chapter">
              <a href="deployment-kubernetes-config-and-secrets.html">ArangoDB Configuration & Secrets</a>
              </li>
              <li class="chapter">
              <a href="deployment-kubernetes-metrics.html">Metrics</a>
              </li>
              <li class="chapter">
              <a href="deployment-kubernetes-services-and-load-balancer.html">Services & Load balancer</a>
              </li>
              <li class="chapter">
              <a href="deployment-kubernetes-deployment-replication-resource.html">Deployment Replication Resource Reference</a>
              </li>
              <li class="chapter">
              <a href="deployment-kubernetes-storage.html">Storage</a>
              </li>
              <li class="chapter">
              <a href="deployment-kubernetes-storage-resource.html">Storage Resource</a>
              </li>
              <li class="chapter">
              <a href="deployment-kubernetes-tls.html">TLS</a>
              </li>
              <li class="chapter">
              <a href="deployment-kubernetes-troubleshooting.html">Troubleshooting</a>
              </li>
            </ul>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="deployment-cloud.html">In the Cloud</a>
        <ul class="articles">
          <li class="chapter">
          <a href="deployment-cloud-aws.html">AWS</a>
          </li>
          <li class="chapter">
          <a href="deployment-cloud-azure.html">Azure</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="deployment-production-checklist.html">Production Checklist</a>
      </li>
      <li class="chapter">
      <a href="deployment-migrating-single-instance-cluster.html">Migrating Single Instance to Cluster</a>
      </li>
    </ul>
  </li>
  <li class="chapter">
  <a href="backup-restore.html">Backup & Restore</a>
  </li>
  <li class="chapter">
  <a href="upgrading.html">Upgrading</a>
    <ul class="articles">
      <li class="chapter">
      <a href="upgrading-general-info.html">General Upgrade Information</a>
      </li>
      <li class="chapter">
      <a href="upgrading-community-to-enterprise.html">Community to Enterprise Upgrade</a>
      </li>
      <li class="chapter">
      <a href="upgrading-osspecific-info.html">OS-specific Information</a>
        <ul class="articles">
          <li class="chapter">
          <a href="upgrading-osspecific-info-linux.html">Upgrading on Linux</a>
          </li>
          <li class="chapter">
          <a href="upgrading-osspecific-info-mac-os.html">Upgrading on macOS</a>
          </li>
          <li class="chapter">
          <a href="upgrading-osspecific-info-windows.html">Upgrading on Windows</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="upgrading-starter.html">Upgrading Starter Deployments</a>
      </li>
      <li class="chapter">
      <a href="upgrading-manually.html">Upgrading Manual Deployments</a>
        <ul class="articles">
          <li class="chapter">
          <a href="upgrading-manually-active-failover.html">Upgrading an Active Failover deployment</a>
          </li>
          <li class="chapter">
          <a href="upgrading-manually-cluster.html">Upgrading a Cluster</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="upgrading-kubernetes.html">Upgrading Kubernetes Deployments</a>
      </li>
      <li class="chapter">
      <a href="upgrading-version-specific.html">Version Specific Upgrade Information</a>
        <ul class="articles">
          <li class="chapter">
          <a href="upgrading-version-specific-upgrading34.html">Upgrading to 3.4</a>
          </li>
          <li class="chapter">
          <a href="upgrading-version-specific-upgrading33.html">Upgrading to 3.3</a>
          </li>
          <li class="chapter">
          <a href="upgrading-version-specific-upgrading32.html">Upgrading to 3.2</a>
          </li>
          <li class="chapter">
          <a href="upgrading-version-specific-upgrading31.html">Upgrading to 3.1</a>
          </li>
          <li class="chapter">
          <a href="upgrading-version-specific-upgrading30.html">Upgrading to 3.0</a>
          </li>
          <li class="chapter">
          <a href="upgrading-version-specific-upgrading28.html">Upgrading to 2.8</a>
          </li>
          <li class="chapter">
          <a href="upgrading-version-specific-upgrading26.html">Upgrading to 2.6</a>
          </li>
          <li class="chapter">
          <a href="upgrading-version-specific-upgrading25.html">Upgrading to 2.5</a>
          </li>
          <li class="chapter">
          <a href="upgrading-version-specific-upgrading24.html">Upgrading to 2.4</a>
          </li>
          <li class="chapter">
          <a href="upgrading-version-specific-upgrading23.html">Upgrading to 2.3</a>
          </li>
          <li class="chapter">
          <a href="upgrading-version-specific-upgrading22.html">Upgrading to 2.2</a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li class="chapter">
  <a href="downgrading.html">Downgrading</a>
  </li>
  <li class="chapter">
  <a href="scaling.html">Scaling</a>
  </li>
  <li class="chapter">
  <a href="administration.html">Administration</a>
    <ul class="articles">
      <li class="chapter">
      <a href="administration-configuration.html">Configuration</a>
      </li>
      <li class="chapter">
      <a href="administration-import-export.html">Import & Export</a>
      </li>
      <li class="chapter">
      <a href="administration-managing-users.html">User Management</a>
        <ul class="articles">
          <li class="chapter">
          <a href="administration-managing-users-in-arangosh.html">In Arangosh</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="administration-engine-switch-engine.html">Switch Storage Engine</a>
      </li>
      <li class="chapter">
      <a href="administration-master-slave.html">Master/Slave</a>
        <ul class="articles">
          <li class="chapter">
          <a href="administration-master-slave-setting-up.html">Setting up</a>
            <ul class="articles">
              <li class="chapter">
              <a href="administration-master-slave-replication-applier.html">Replication Applier</a>
              </li>
              <li class="chapter">
              <a href="administration-master-slave-database-setup.html">Per-Database Setup</a>
              </li>
              <li class="chapter">
              <a href="administration-master-slave-server-level-setup.html">Server-Level Setup</a>
              </li>
              <li class="chapter">
              <a href="administration-master-slave-initialize-from-backup.html">Speeding Up Slave Initialization</a>
              </li>
            </ul>
          </li>
          <li class="chapter">
          <a href="administration-master-slave-syncing-collections.html">Syncing Collections</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="administration-active-failover.html">Active Failover</a>
      </li>
      <li class="chapter">
      <a href="administration-cluster.html">Cluster</a>
      </li>
      <li class="chapter">
      <a href="administration-dc2-dc.html">Datacenter to datacenter replication</a>
      </li>
      <li class="chapter">
      <a href="administration-starter.html">ArangoDB Starter Administration</a>
        <ul class="articles">
          <li class="chapter">
          <a href="administration-starter-removal.html">Removal Procedure</a>
          </li>
          <li class="chapter">
          <a href="administration-starter-recovery.html">Recovery Procedure</a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li class="chapter">
  <a href="security.html">Security</a>
    <ul class="articles">
      <li class="chapter">
      <a href="security-security-options.html">Security Options</a>
      </li>
      <li class="chapter">
      <a href="security-change-root-password.html">Change Root Password</a>
      </li>
      <li class="chapter">
      <a href="security-encryption.html">Encryption at Rest</a>
      </li>
      <li class="chapter">
      <a href="security-auditing.html">Auditing</a>
        <ul class="articles">
          <li class="chapter">
          <a href="security-auditing-audit-configuration.html">Configuration</a>
          </li>
          <li class="chapter">
          <a href="security-auditing-audit-events.html">Events</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="security-starter.html">Securing Starter Deployments</a>
      </li>
      <li class="chapter">
      <a href="security-dc2-dc.html">Datacenter to datacenter replication</a>
      </li>
    </ul>
  </li>
  <li class="chapter">
  <a href="monitoring.html">Monitoring</a>
    <ul class="articles">
      <li class="chapter">
      <a href="monitoring-log-levels.html">Log Levels</a>
      </li>
      <li class="chapter">
      <a href="monitoring-dc2-dc.html">Datacenter to datacenter replication</a>
      </li>
      <li class="chapter">
      <a href="monitoring-collectd.html">Collectd</a>
        <ul class="articles">
          <li class="chapter">
          <a href="monitoring-collectd-slave-status.html">Replication Slaves</a>
          </li>
          <li class="chapter">
          <a href="monitoring-collectd-traffic-with-ipaccounting.html">Network usage</a>
          </li>
          <li class="chapter">
          <a href="monitoring-collectd-other-relevant-metrics.html">More metrics</a>
          </li>
          <li class="chapter">
          <a href="monitoring-collectd-foxx-apps.html">Monitoring Foxx</a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li class="chapter">
  <a href="troubleshooting.html">Troubleshooting</a>
    <ul class="articles">
      <li class="chapter">
      <a href="troubleshooting-arangod.html">arangod</a>
      </li>
      <li class="chapter">
      <a href="troubleshooting-emergency-console.html">Emergency Console</a>
      </li>
      <li class="chapter">
      <a href="troubleshooting-cluster.html">Cluster</a>
        <ul class="articles">
          <li class="chapter">
          <a href="troubleshooting-cluster-agency-dump.html">Agency Dump</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="troubleshooting-dc2-dc.html">Datacenter to datacenter replication</a>
      </li>
    </ul>
  </li>
  <li><hr/></li>
  <li class="chapter">
  <a href="release-notes.html">Release Notes</a>
    <ul class="articles">
      <li class="chapter">
      <a href="release-notes-37.html">Version 3.7</a>
        <ul class="articles">
          <li class="chapter">
          <a href="release-notes-new-features37.html">What's New in 3.7</a>
          </li>
          <li class="chapter">
          <a href="release-notes-known-issues37.html">Known Issues in 3.7</a>
          </li>
          <li class="chapter">
          <a href="release-notes-upgrading-changes37.html">Incompatible changes in 3.7</a>
          </li>
          <li class="chapter">
          <a href="release-notes-api-changes37.html">API changes in 3.7</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="release-notes-36.html">Version 3.6</a>
        <ul class="articles">
          <li class="chapter">
          <a href="release-notes-new-features36.html">What's New in 3.6</a>
          </li>
          <li class="chapter">
          <a href="release-notes-known-issues36.html">Known Issues in 3.6</a>
          </li>
          <li class="chapter">
          <a href="release-notes-upgrading-changes36.html">Incompatible changes in 3.6</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="release-notes-35.html">Version 3.5</a>
        <ul class="articles">
          <li class="chapter">
          <a href="release-notes-new-features35.html">What's New in 3.5</a>
          </li>
          <li class="chapter">
          <a href="release-notes-known-issues35.html">Known Issues in 3.5</a>
          </li>
          <li class="chapter">
          <a href="release-notes-upgrading-changes35.html">Incompatible changes in 3.5</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="release-notes-34.html">Version 3.4</a>
        <ul class="articles">
          <li class="chapter">
          <a href="release-notes-new-features34.html">What's New in 3.4</a>
          </li>
          <li class="chapter">
          <a href="release-notes-known-issues34.html">Known Issues in 3.4</a>
          </li>
          <li class="chapter">
          <a href="release-notes-upgrading-changes34.html">Incompatible changes in 3.4</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="release-notes-33.html">Version 3.3</a>
        <ul class="articles">
          <li class="chapter">
          <a href="release-notes-new-features33.html">What's New in 3.3</a>
          </li>
          <li class="chapter">
          <a href="release-notes-known-issues33.html">Known Issues in 3.3</a>
          </li>
          <li class="chapter">
          <a href="release-notes-upgrading-changes33.html">Incompatible changes in 3.3</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="release-notes-32.html">Version 3.2</a>
        <ul class="articles">
          <li class="chapter">
          <a href="release-notes-new-features32.html">What's New in 3.2</a>
          </li>
          <li class="chapter">
          <a href="release-notes-known-issues32.html">Known Issues in 3.2</a>
          </li>
          <li class="chapter">
          <a href="release-notes-upgrading-changes32.html">Incompatible changes in 3.2</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="release-notes-31.html">Version 3.1</a>
        <ul class="articles">
          <li class="chapter">
          <a href="release-notes-new-features31.html">What's New in 3.1</a>
          </li>
          <li class="chapter">
          <a href="release-notes-upgrading-changes31.html">Incompatible changes in 3.1</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="release-notes-30.html">Version 3.0</a>
        <ul class="articles">
          <li class="chapter">
          <a href="release-notes-new-features30.html">What's New in 3.0</a>
          </li>
          <li class="chapter">
          <a href="release-notes-upgrading-changes30.html">Incompatible changes in 3.0</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="release-notes-28.html">Version 2.8</a>
        <ul class="articles">
          <li class="chapter">
          <a href="release-notes-new-features28.html">What's New in 2.8</a>
          </li>
          <li class="chapter">
          <a href="release-notes-upgrading-changes28.html">Incompatible changes in 2.8</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="release-notes-27.html">Version 2.7</a>
        <ul class="articles">
          <li class="chapter">
          <a href="release-notes-new-features27.html">What's New in 2.7</a>
          </li>
          <li class="chapter">
          <a href="release-notes-upgrading-changes27.html">Incompatible changes in 2.7</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="release-notes-26.html">Version 2.6</a>
        <ul class="articles">
          <li class="chapter">
          <a href="release-notes-new-features26.html">What's New in 2.6</a>
          </li>
          <li class="chapter">
          <a href="release-notes-upgrading-changes26.html">Incompatible changes in 2.6</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="release-notes-25.html">Version 2.5</a>
        <ul class="articles">
          <li class="chapter">
          <a href="release-notes-new-features25.html">What's New in 2.5</a>
          </li>
          <li class="chapter">
          <a href="release-notes-upgrading-changes25.html">Incompatible changes in 2.5</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="release-notes-24.html">Version 2.4</a>
        <ul class="articles">
          <li class="chapter">
          <a href="release-notes-new-features24.html">What's New in 2.4</a>
          </li>
          <li class="chapter">
          <a href="release-notes-upgrading-changes24.html">Incompatible changes in 2.4</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="release-notes-23.html">Version 2.3</a>
        <ul class="articles">
          <li class="chapter">
          <a href="release-notes-new-features23.html">What's New in 2.3</a>
          </li>
          <li class="chapter">
          <a href="release-notes-upgrading-changes23.html">Incompatible changes in 2.3</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="release-notes-22.html">Version 2.2</a>
        <ul class="articles">
          <li class="chapter">
          <a href="release-notes-new-features22.html">What's New in 2.2</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="release-notes-21.html">Version 2.1</a>
        <ul class="articles">
          <li class="chapter">
          <a href="release-notes-new-features21.html">What's New in 2.1</a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li class="chapter">
  <a href="appendix.html">Appendix</a>
    <ul class="articles">
      <li class="chapter">
      <a href="appendix-references.html">References</a>
        <ul class="articles">
          <li class="chapter">
          <a href="appendix-references-dbobject.html">db</a>
          </li>
          <li class="chapter">
          <a href="appendix-references-collection-object.html">collection</a>
          </li>
          <li class="chapter">
          <a href="appendix-references-cursor-object.html">cursor</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="appendix-java-script-modules.html">JavaScript Modules</a>
        <ul class="articles">
          <li class="chapter">
          <a href="appendix-java-script-modules-arango-db.html">@arangodb</a>
          </li>
          <li class="chapter">
          <a href="appendix-java-script-modules-analyzers.html">analyzers</a>
          </li>
          <li class="chapter">
          <a href="appendix-java-script-modules-console.html">console</a>
          </li>
          <li class="chapter">
          <a href="appendix-java-script-modules-crypto.html">crypto</a>
          </li>
          <li class="chapter">
          <a href="appendix-java-script-modules-file-system.html">fs</a>
          </li>
          <li class="chapter">
          <a href="appendix-java-script-modules-request.html">request</a>
          </li>
          <li class="chapter">
          <a href="appendix-java-script-modules-actions.html">actions</a>
          </li>
          <li class="chapter">
          <a href="appendix-java-script-modules-queries.html">queries</a>
          </li>
          <li class="chapter">
          <a href="appendix-java-script-modules-wal.html">Write-ahead log</a>
          </li>
          <li class="chapter">
          <a href="appendix-java-script-modules-tasks.html">Task Management</a>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="appendix-deprecated.html">Deprecated</a>
        <ul class="articles">
          <li class="chapter">
          <a href="appendix-deprecated-simple-queries.html">Simple Queries</a>
            <ul class="articles">
              <li class="chapter">
              <a href="appendix-deprecated-simple-queries-pagination.html">Pagination</a>
              </li>
              <li class="chapter">
              <a href="appendix-deprecated-simple-queries-modification-queries.html">Modification Queries</a>
              </li>
              <li class="chapter">
              <a href="appendix-deprecated-simple-queries-geo-queries.html">Geo Queries</a>
              </li>
              <li class="chapter">
              <a href="appendix-deprecated-simple-queries-fulltext-queries.html">Fulltext Queries</a>
              </li>
            </ul>
          </li>
        </ul>
      </li>
      <li class="chapter">
      <a href="appendix-error-codes.html">Error codes and meanings</a>
      </li>
      <li class="chapter">
      <a href="appendix-glossary.html">Glossary</a>
      </li>
    </ul>
  </li>
</ul>

</nav>
    </div>
    <div class="book-body">
      <script type="text/javascript">
          var availableVersions = ["devel","stable","3.6","3.5","3.4","3.3",];
          versionSwitcherSetAvailable(availableVersions);
      </script>
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <a class="btn pull-left js-toolbar-action hamburger" aria-label=""><i class="fa fa-align-justify"></i></a>
          <a class="btn pull-left js-toolbar-action" aria-label="" href="https://github.com/arangodb/docs/edit/master/3.7/graphs-pregel.md" target="_blank"><i class="fa fa-github"></i> Contribute</a>
        </div>
        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">
            <section class="normal markdown-section">
              <h1 id="distributed-iterative-graph-processing-pregel">Distributed Iterative Graph Processing (Pregel)</h1>

<p>Distributed graph processing enables you to do online analytical processing
directly on graphs stored in ArangoDB. This is intended to help you gain
analytical insights on your data, without having to use external processing
systems. Examples of algorithms to execute are PageRank, Vertex Centrality,
Vertex Closeness, Connected Components, Community Detection.</p>

<p>Check out the hands-on
<a href="https://www.arangodb.com/pregel-community-detection/" target="_blank">ArangoDB Pregel Tutorial</a>
to learn more.</p>

<p>The processing system inside ArangoDB is based on:
<a href="http://www.dcs.bbk.ac.uk/~dell/teaching/cc/paper/sigmod10/p135-malewicz.pdf" target="_blank">Pregel: A System for Large-Scale Graph Processing</a>
– Malewicz et al. (Google), 2010.
This concept enables us to perform distributed graph processing, without the
need for distributed global locking.</p>

<p>This system is not useful for typical online queries, where you just work on
a small set of vertices. These kind of tasks are better suited for
<a href="https://www.arangodb.com/docs/stable/aql/graphs.html">AQL traversals</a>.</p>

<h2 id="prerequisites">Prerequisites</h2>

<p>If you are running a single ArangoDB instance in single-server mode, there
are no requirements regarding the modeling of your data. All you need is at
least one vertex collection and one edge collection. Note that the performance
may be better, if the number of your shards / collections matches the number
of CPU cores.</p>

<p>When you use ArangoDB Community Edition in cluster mode, you might need to
model your collections in a certain way to ensure correct results. For more
information see the next section.</p>

<h3 id="requirements-for-collections-in-a-cluster-non-smartgraph">Requirements for Collections in a Cluster (Non-SmartGraph)</h3>

<p>To enable iterative graph processing for your data, you will need to ensure
that your vertex and edge collections are sharded in a specific way.</p>

<p>The Pregel computing model requires all edges to be present on the DB-Server
where the vertex document identified by the <code class="language-plaintext highlighter-rouge">_from</code> value is located.
This means the vertex collections need to be sharded by <code class="language-plaintext highlighter-rouge">_key</code> and the
edge collection will need to be sharded after an attribute which always
contains the <code class="language-plaintext highlighter-rouge">_key</code> of the vertex.</p>

<p>Our implementation currently requires every edge collection to be sharded after
“vertex” attributes. Additionally you will need to specify the key
<code class="language-plaintext highlighter-rouge">distributeShardsLike</code> and an <strong>equal</strong> number of shards on every collection.
Only if these requirements are met can ArangoDB place the edges and vertices
correctly.</p>

<p>For example, you might create your collections like this:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Create main vertex collection:</span>
<span class="nx">db</span><span class="p">.</span><span class="nx">_create</span><span class="p">(</span><span class="dl">"</span><span class="s2">vertices</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">shardKeys</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">_key</span><span class="dl">"</span><span class="p">],</span>
  <span class="na">numberOfShards</span><span class="p">:</span> <span class="mi">8</span>
<span class="p">});</span>

<span class="c1">// Optionally create arbitrary additional vertex collections</span>
<span class="nx">db</span><span class="p">.</span><span class="nx">_create</span><span class="p">(</span><span class="dl">"</span><span class="s2">additional</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">distributeShardsLike</span><span class="p">:</span> <span class="dl">"</span><span class="s2">vertices</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">numberOfShards</span><span class="p">:</span> <span class="mi">8</span>
<span class="p">});</span>

<span class="c1">// Create (one or more) edge-collections:</span>
<span class="nx">db</span><span class="p">.</span><span class="nx">_createEdgeCollection</span><span class="p">(</span><span class="dl">"</span><span class="s2">edges</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">shardKeys</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">vertex</span><span class="dl">"</span><span class="p">],</span>
  <span class="na">distributeShardsLike</span><span class="p">:</span> <span class="dl">"</span><span class="s2">vertices</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">numberOfShards</span><span class="p">:</span> <span class="mi">8</span>
<span class="p">});</span>
</code></pre></div></div>

<p>You will need to ensure that all edges contain the proper values in their
shard key attribute. For a vertex document with the following content
<code class="language-plaintext highlighter-rouge">{ _key: "A", value: 0 }</code> the corresponding edge documents would have to look
as follows:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span> <span class="dl">"</span><span class="s2">_from</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">vertices/A</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">_to</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">vertices/B</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">vertex</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">A</span><span class="dl">"</span> <span class="p">}</span>
<span class="p">{</span> <span class="dl">"</span><span class="s2">_from</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">vertices/A</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">_to</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">vertices/C</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">vertex</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">A</span><span class="dl">"</span> <span class="p">}</span>
<span class="p">{</span> <span class="dl">"</span><span class="s2">_from</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">vertices/A</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">_to</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">vertices/D</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">vertex</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">A</span><span class="dl">"</span> <span class="p">}</span>
<span class="p">...</span>
</code></pre></div></div>

<p>As can be seen, all edges use a value of <code class="language-plaintext highlighter-rouge">A</code> (the <code class="language-plaintext highlighter-rouge">_key</code> value of the vertex)
in their shard key attribute <code class="language-plaintext highlighter-rouge">"vertex"</code>.</p>

<p>This will ensure that outgoing edge documents will be placed on the same
DB-Server as the vertex. Without the correct placement of the edges, the Pregel
graph processing system will not work correctly, because edges will not load
correctly.</p>

<h2 id="arangosh-api">Arangosh API</h2>

<h3 id="starting-an-algorithm-execution">Starting an Algorithm Execution</h3>

<p>The Pregel API is accessible through the <code class="language-plaintext highlighter-rouge">@arangodb/pregel</code> package.
To start an execution you need to specify the <strong>algorithm</strong> name and the vertex
and edge collections. Alternatively you can specify a named graph.
Additionally you can specify custom parameters which vary for each algorithm.
The <code class="language-plaintext highlighter-rouge">start()</code> method will always return a unique ID which can be used to
interact with the algorithm and later on.</p>

<p>The below variant of the <code class="language-plaintext highlighter-rouge">start()</code> method can be used for named graphs:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">pregel</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">@arangodb/pregel</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">params</span> <span class="o">=</span> <span class="p">{};</span>
<span class="kd">var</span> <span class="nx">execution</span> <span class="o">=</span> <span class="nx">pregel</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="dl">"</span><span class="s2">&lt;algorithm&gt;</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">&lt;yourgraph&gt;</span><span class="dl">"</span><span class="p">,</span> <span class="nx">params</span><span class="p">);</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">params</code> needs to be an object, the valid keys are mentioned below in the
section <a href="graphs-pregel.html#available-algorithms">Available Algorithms</a>.</p>

<p>Alternatively you might want to specify the vertex and edge collections
directly. The call syntax of the <code class="language-plaintext highlighter-rouge">start()</code> method changes in this case.
The second argument must be an object with the keys <code class="language-plaintext highlighter-rouge">vertexCollections</code>
and <code class="language-plaintext highlighter-rouge">edgeCollections</code>.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">pregel</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">@arangodb/pregel</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">params</span> <span class="o">=</span> <span class="p">{};</span>
<span class="kd">var</span> <span class="nx">execution</span> <span class="o">=</span> <span class="nx">pregel</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="dl">"</span><span class="s2">&lt;algorithm&gt;</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span><span class="na">vertexCollections</span><span class="p">:[</span><span class="dl">"</span><span class="s2">vertices</span><span class="dl">"</span><span class="p">],</span> <span class="na">edgeCollections</span><span class="p">:[</span><span class="dl">"</span><span class="s2">edges</span><span class="dl">"</span><span class="p">]},</span> <span class="nx">params</span><span class="p">);</span>
</code></pre></div></div>

<p>The last argument is still the parameter object. See below for a list of
algorithms and parameters.</p>

<h3 id="status-of-an-algorithm-execution">Status of an Algorithm Execution</h3>

<p>The code returned by the <code class="language-plaintext highlighter-rouge">pregel.start(...)</code> method can be used to track the
status of your algorithm.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">execution</span> <span class="o">=</span> <span class="nx">pregel</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="dl">"</span><span class="s2">sssp</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">demograph</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span><span class="na">source</span><span class="p">:</span> <span class="dl">"</span><span class="s2">vertices/V</span><span class="dl">"</span><span class="p">});</span>
<span class="kd">var</span> <span class="nx">status</span> <span class="o">=</span> <span class="nx">pregel</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="nx">execution</span><span class="p">);</span>
</code></pre></div></div>

<p>The result will tell you the current status of the algorithm execution.
It will tell you the current <code class="language-plaintext highlighter-rouge">state</code> of the execution, the current
global superstep, the runtime, the global aggregator values as well as the
number of send and received messages.</p>

<p>The <code class="language-plaintext highlighter-rouge">state</code> field has one of the following values:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">State</th>
      <th style="text-align: left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">"running"</code></td>
      <td style="text-align: left">Algorithm is executing normally.</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">"in error"</code></td>
      <td style="text-align: left">The execution is in an error state. This can be caused by primary DB-Servers being not reachable or being non responsive. The execution might recover later, or switch to “canceled” if it was not able to recover successfully</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">"recovering"</code></td>
      <td style="text-align: left">The execution is actively recovering, will switch back to “running” if the recovery was successful</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">"canceled"</code></td>
      <td style="text-align: left">The execution was permanently canceled, either by the user or by an error.</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">"storing"</code></td>
      <td style="text-align: left">The algorithm finished, but the results are still being written back into the collections. Occurs if the <code class="language-plaintext highlighter-rouge">store</code> parameter is set to <code class="language-plaintext highlighter-rouge">true</code> only.</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">"done"</code></td>
      <td style="text-align: left">The execution is done. In version 3.7.1 and later, this means that storing is also done. In earlier versions, the results may not be written back into the collections yet. This event is announced in the server log (requires at least <em>info</em> log level for the <em>pregel</em> topic).</td>
    </tr>
  </tbody>
</table>

<p>The object returned by the <code class="language-plaintext highlighter-rouge">status()</code> method might for example look something
like this:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"state"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"running"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"gss"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w">
  </span><span class="nl">"totalRuntime"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">123.23</span><span class="p">,</span><span class="w">
  </span><span class="nl">"aggregators"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"converged"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"max"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"phase"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"sendCount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">3240364978</span><span class="p">,</span><span class="w">
  </span><span class="nl">"receivedCount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">3240364975</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h3 id="canceling-an-execution--discarding-results">Canceling an Execution / Discarding results</h3>

<p>To cancel an execution which is still running, and discard any intermediate
results you can use the <code class="language-plaintext highlighter-rouge">cancel()</code> method. This will immediately free all
memory taken up by the execution, and will make you lose all intermediary data.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// start a single source shortest path job</span>
<span class="kd">var</span> <span class="nx">execution</span> <span class="o">=</span> <span class="nx">pregel</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="dl">"</span><span class="s2">sssp</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">demograph</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span><span class="na">source</span><span class="p">:</span> <span class="dl">"</span><span class="s2">vertices/V</span><span class="dl">"</span><span class="p">});</span>
<span class="nx">pregel</span><span class="p">.</span><span class="nx">cancel</span><span class="p">(</span><span class="nx">execution</span><span class="p">);</span>
</code></pre></div></div>

<p>You might get inconsistent results if you requested to store the results and
then cancel an execution when it is already in its <code class="language-plaintext highlighter-rouge">storing</code> state (or <code class="language-plaintext highlighter-rouge">done</code>
state in versions prior to 3.7.1). The data is written multi-threaded into all
collection shards at once. This means there are multiple transactions
simultaneously. A transaction might already be committed when you cancel the
execution job. Therefore, you might see some updated documents, while other
documents have no or stale results from a previous execution.</p>

<h2 id="aql-integration">AQL integration</h2>

<p>When the graph processing subsystem finishes executing an algorithm, the
results can either be written back into documents or kept in memory only.
If the data is persisted, then you can query the documents normally to get
access to the results.</p>

<p>If you do not want to store results, then they are only held temporarily,
until you call the <code class="language-plaintext highlighter-rouge">cancel()</code> method. The in-memory results can be accessed
via the <code class="language-plaintext highlighter-rouge">PREGEL_RESULT()</code> AQL function.</p>

<p>The result field names depend on the algorithm in both cases.</p>

<p>For example, you might want to query only nodes with the highest rank from the
result set of a PageRank execution:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">FOR</span> <span class="nx">v</span> <span class="nx">IN</span> <span class="nx">PREGEL_RESULT</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">handle</span><span class="o">&gt;</span><span class="p">)</span>
  <span class="nx">FILTER</span> <span class="nx">v</span><span class="p">.</span><span class="nx">result</span> <span class="o">&gt;=</span> <span class="mf">0.01</span>
  <span class="nx">RETURN</span> <span class="nx">v</span><span class="p">.</span><span class="nx">_key</span>
</code></pre></div></div>

<p>By default, the <code class="language-plaintext highlighter-rouge">PREGEL_RESULT()</code> AQL function will return the <code class="language-plaintext highlighter-rouge">_key</code> of each
vertex plus the result of the computation. In case the computation was done for
vertices from different vertex collection, just the <code class="language-plaintext highlighter-rouge">_key</code> values may not be
sufficient to tell vertices from different collections apart. In  this case,
<code class="language-plaintext highlighter-rouge">PREGEL_RESULT()</code> can be given a second parameter <code class="language-plaintext highlighter-rouge">withId</code>, which will make it
return the <code class="language-plaintext highlighter-rouge">_id</code> values of the vertices as well:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">FOR</span> <span class="nx">v</span> <span class="nx">IN</span> <span class="nx">PREGEL_RESULT</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">handle</span><span class="o">&gt;</span><span class="p">,</span> <span class="kc">true</span><span class="p">)</span>
  <span class="nx">FILTER</span> <span class="nx">v</span><span class="p">.</span><span class="nx">result</span> <span class="o">&gt;=</span> <span class="mf">0.01</span>
  <span class="nx">RETURN</span> <span class="nx">v</span><span class="p">.</span><span class="nx">_id</span>
</code></pre></div></div>

<h2 id="algorithm-parameters">Algorithm Parameters</h2>

<p>There are a number of general parameters which apply to almost all algorithms:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">store</code> (bool): Defaults to <em>true</em>. If true, the Pregel engine will write
results back to the database. If the value is <em>false</em> then you can query the
results with <code class="language-plaintext highlighter-rouge">PREGEL_RESULT()</code> in AQL. See <a href="graphs-pregel.html#aql-integration">AQL integration</a></li>
  <li><code class="language-plaintext highlighter-rouge">maxGSS</code> (number): Maximum number of global iterations for this algorithm</li>
  <li><code class="language-plaintext highlighter-rouge">parallelism</code> (number): Number of parallel threads to use per worker.
Does not influence the number of threads used to load or store data from the
database (this depends on the number of shards).</li>
  <li><code class="language-plaintext highlighter-rouge">async</code> (bool): Algorithms which support asynchronous mode will run without
synchronized global iterations. Might lead to performance increases if you
have load imbalances.</li>
  <li><code class="language-plaintext highlighter-rouge">resultField</code> (string): Most algorithms use this as attribute name for the
result. Some use it as prefix for multiple result attributes. Defaults to
<code class="language-plaintext highlighter-rouge">"result"</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">useMemoryMaps</code> (bool): Use disk based files to store temporary results.
This might make the computation disk-bound, but allows you to run computations
which would not fit into main memory. It is recommended to set this flag for
larger datasets.</li>
  <li><code class="language-plaintext highlighter-rouge">shardKeyAttribute</code> (string): shard key that edge collections are sharded
after (default: <code class="language-plaintext highlighter-rouge">"vertex"</code>)</li>
</ul>

<h2 id="available-algorithms">Available Algorithms</h2>

<h3 id="page-rank">Page Rank</h3>

<p>PageRank is a well known algorithm to rank documents in a graph. The algorithm
will run until the execution converges. Specify a custom threshold with the
parameter <code class="language-plaintext highlighter-rouge">threshold</code>, to run for a fixed number of iterations use the
<code class="language-plaintext highlighter-rouge">maxGSS</code> parameter.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">pregel</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">@arangodb/pregel</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">pregel</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="dl">"</span><span class="s2">pagerank</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">graphname</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span><span class="na">maxGSS</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="na">threshold</span><span class="p">:</span> <span class="mf">0.00000001</span><span class="p">,</span> <span class="na">resultField</span><span class="p">:</span> <span class="dl">"</span><span class="s2">rank</span><span class="dl">"</span><span class="p">})</span>
</code></pre></div></div>

<h4 id="seeded-pagerank">Seeded PageRank</h4>

<p>It is possible to specify an initial distribution for the vertex documents in
your graph. To define these seed ranks / centralities you can specify a
<code class="language-plaintext highlighter-rouge">sourceField</code> in the properties for this algorithm. If the specified field is
set on a document <em>and</em> the value is numeric, then it will be used instead of
the default initial rank of <code class="language-plaintext highlighter-rouge">1 / numVertices</code>.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">pregel</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">@arangodb/pregel</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">pregel</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="dl">"</span><span class="s2">pagerank</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">graphname</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span><span class="na">maxGSS</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span> <span class="na">threshold</span><span class="p">:</span> <span class="mf">0.00000001</span><span class="p">,</span> <span class="na">sourceField</span><span class="p">:</span> <span class="dl">"</span><span class="s2">seed</span><span class="dl">"</span><span class="p">,</span> <span class="na">resultField</span><span class="p">:</span> <span class="dl">"</span><span class="s2">rank</span><span class="dl">"</span><span class="p">})</span>
</code></pre></div></div>

<h3 id="single-source-shortest-path">Single-Source Shortest Path</h3>

<p>Calculates the distance of each vertex to a certain shortest path.
The algorithm will run until it converges, the iterations are bound by the
diameter (the longest shortest path) of your graph.</p>

<p>Requires a <code class="language-plaintext highlighter-rouge">source</code> document ID parameter. The result field needs to be
specified in <code class="language-plaintext highlighter-rouge">_resultField</code> (note the underscore).</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">pregel</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">@arangodb/pregel</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">pregel</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="dl">"</span><span class="s2">sssp</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">graphname</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span><span class="na">source</span><span class="p">:</span> <span class="dl">"</span><span class="s2">vertices/1337</span><span class="dl">"</span><span class="p">,</span> <span class="na">_resultField</span><span class="p">:</span> <span class="dl">"</span><span class="s2">distance</span><span class="dl">"</span><span class="p">});</span>
</code></pre></div></div>

<h3 id="connected-components">Connected Components</h3>

<p>There are three algorithms to find connected components in a graph:</p>

<ol>
  <li>
    <p>If your graph is effectively undirected (you have edges in both directions
between vertices) then the simple <strong>connected components</strong> algorithm named
<code class="language-plaintext highlighter-rouge">"connectedcomponents"</code> is suitable.</p>

    <p>It is a very simple and fast algorithm, but will only work correctly on
undirected graphs. Your results on directed graphs may vary, depending on
how connected your components are.</p>
  </li>
  <li>
    <p>To find <strong>weakly connected components</strong> (WCC) you can use the algorithm
named <code class="language-plaintext highlighter-rouge">"wcc"</code>. Weakly connected means that there exists a path from every
vertex pair in that component.</p>

    <p>This algorithm will work on directed graphs but requires a greater amount of
traffic between your DB-Servers.</p>
  </li>
  <li>
    <p>To find <strong>strongly connected components</strong> (SCC) you can use the algorithm
named <code class="language-plaintext highlighter-rouge">"scc"</code>. Strongly connected means every vertex is reachable from any
other vertex in the same component.</p>

    <p>The algorithm is more complex than the WCC algorithm and requires more
memory, because each vertex needs to store much more state. Consider using
WCC if you think your data may be suitable for it.</p>
  </li>
</ol>

<p>All above algorithms will assign a component ID to each vertex.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">pregel</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">@arangodb/pregel</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// connected components</span>
<span class="nx">pregel</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="dl">"</span><span class="s2">connectedcomponents</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">graphname</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span><span class="na">resultField</span><span class="p">:</span> <span class="dl">"</span><span class="s2">component</span><span class="dl">"</span><span class="p">});</span>

<span class="c1">// weakly connected components</span>
<span class="nx">pregel</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="dl">"</span><span class="s2">wcc</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">graphname</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span><span class="na">resultField</span><span class="p">:</span> <span class="dl">"</span><span class="s2">component_weak</span><span class="dl">"</span><span class="p">});</span>

<span class="c1">// strongly connected components</span>
<span class="nx">pregel</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="dl">"</span><span class="s2">scc</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">graphname</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span><span class="na">resultField</span><span class="p">:</span> <span class="dl">"</span><span class="s2">component_strong</span><span class="dl">"</span><span class="p">});</span>
</code></pre></div></div>

<h3 id="hyperlink-induced-topic-search-hits">Hyperlink-Induced Topic Search (HITS)</h3>

<p>HITS is a link analysis algorithm that rates Web pages, developed by
Jon Kleinberg. The algorithm is also known as <em>Hubs and Authorities</em>.</p>

<p>The idea behind Hubs and Authorities comes from the typical structure of the web:
Certain websites known as hubs, serve as large directories that are not actually
authoritative on the information that they hold. These hubs are used as
compilations of a broad catalog of information that leads users direct to other
authoritative webpages.</p>

<p>The algorithm assigns each vertex two scores: The authority score and the
hub score. The authority score rates how many good hubs point to a particular
vertex (or webpage), the hub score rates how good (authoritative) the vertices
pointed to are. Also see
<a href="https://en.wikipedia.org/wiki/HITS_algorithm" target="_blank">en.wikipedia.org/wiki/HITS_algorithm</a></p>

<p>ArangoDB’s version of the algorithm converges after a certain amount of time.
The parameter <em>threshold</em> can be used to set a limit for the convergence
(measured as maximum absolute difference of the hub and authority scores
between the current and last iteration).</p>

<p>When you specify the result field name, the hub score will be stored in
<code class="language-plaintext highlighter-rouge">&lt;resultField&gt;_hub</code> and the authority score in <code class="language-plaintext highlighter-rouge">&lt;resultField&gt;_auth</code>.</p>

<p>The algorithm can be executed like this:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">pregel</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">@arangodb/pregel</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">handle</span> <span class="o">=</span> <span class="nx">pregel</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="dl">"</span><span class="s2">hits</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">yourgraph</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span><span class="na">threshold</span><span class="p">:</span><span class="mf">0.00001</span><span class="p">,</span> <span class="na">resultField</span><span class="p">:</span> <span class="dl">"</span><span class="s2">score</span><span class="dl">"</span><span class="p">});</span>
</code></pre></div></div>

<h3 id="vertex-centrality">Vertex Centrality</h3>

<p>Centrality measures help identify the most important vertices in a graph.
They can be used in a wide range of applications: For example they can be used
to identify <em>influencers</em> in social networks, or <em>middle-men</em> in terrorist
networks.</p>

<p>There are various definitions for centrality, the simplest one being the
vertex degree. These definitions were not designed with scalability in mind.
It is probably impossible to discover an efficient algorithm which computes
them in a distributed way. Fortunately there are scalable substitutions
available, which should be equally usable for most use cases.</p>

<p><img src="images/centrality_visual.png" alt="Illustration of an execution of different centrality measures (Freeman 1977)" /></p>

<h4 id="effective-closeness">Effective Closeness</h4>

<p>A common definitions of centrality is the <strong>closeness centrality</strong>
(or closeness). The closeness of a vertex in a graph is the inverse average
length of the shortest path between the vertex and all other vertices.
For vertices <em>x</em>, <em>y</em> and shortest distance <code class="language-plaintext highlighter-rouge">d(y, x)</code> it is defined as:</p>

<p><img src="images/closeness.png" alt="Vertex Closeness Formula" /></p>

<p>Effective Closeness approximates the closeness measure. The algorithm works by
iteratively estimating the number of shortest paths passing through each vertex.
The score will approximates the real closeness score, since it is not possible
to actually count all shortest paths due to the horrendous <code class="language-plaintext highlighter-rouge">O(n^2 * d)</code> memory
requirements. The algorithm is from the paper
<em>Centralities in Large Networks: Algorithms and Observations (U Kang et.al. 2011)</em>.</p>

<p>ArangoDBs implementation approximates the number of shortest path in each
iteration by using a HyperLogLog counter with 64 buckets. This should work well
on large graphs and on smaller ones as well. The memory requirements should be
<strong>O(n * d)</strong> where <em>n</em> is the number of vertices and <em>d</em> the diameter of your
graph. Each vertex will store a counter for each iteration of the algorithm.</p>

<p>The algorithm can be used like this:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">pregel</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">@arangodb/pregel</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">handle</span> <span class="o">=</span> <span class="nx">pregel</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="dl">"</span><span class="s2">effectivecloseness</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">yourgraph</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span><span class="na">resultField</span><span class="p">:</span> <span class="dl">"</span><span class="s2">closeness</span><span class="dl">"</span><span class="p">});</span>
</code></pre></div></div>

<h4 id="linerank">LineRank</h4>

<p>Another common measure is the <a href="https://en.wikipedia.org/wiki/Betweenness_centrality" target="_blank">betweenness* centrality</a>:
It measures the number of times a vertex is part of shortest paths between any
pairs of vertices. For a vertex <em>v</em> betweenness is defined as:</p>

<p><img src="images/betweenness.png" alt="Vertex Betweenness Formula" /></p>

<p>Where the σ represents the number of shortest paths between <em>x</em> and <em>y</em>,
and σ(v) represents the number of paths also passing through a vertex <em>v</em>.
By intuition a vertex with higher betweenness centrality will have more
information passing through it.</p>

<p><strong>LineRank</strong> approximates the random walk betweenness of every vertex in a
graph. This is the probability that someone starting on an arbitrary vertex,
will visit this node when he randomly chooses edges to visit.</p>

<p>The algorithm essentially builds a line graph out of your graph
(switches the vertices and edges), and then computes a score similar to PageRank.
This can be considered a scalable equivalent to vertex betweenness, which can
be executed distributedly in ArangoDB. The algorithm is from the paper
<em>Centralities in Large Networks: Algorithms and Observations (U Kang et.al. 2011)</em>.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">pregel</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">@arangodb/pregel</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">handle</span> <span class="o">=</span> <span class="nx">pregel</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="dl">"</span><span class="s2">linerank</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">yourgraph</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span><span class="na">resultField</span><span class="p">:</span> <span class="dl">"</span><span class="s2">linerank</span><span class="dl">"</span><span class="p">});</span>
</code></pre></div></div>

<h3 id="community-detection">Community Detection</h3>

<p>Graphs based on real world networks often have a community structure.
This means it is possible to find groups of vertices such that each vertex
group is internally more densely connected than outside the group.
This has many applications when you want to analyze your networks, for example
Social networks include community groups (the origin of the term, in fact)
based on common location, interests, occupation, etc.</p>

<h4 id="label-propagation">Label Propagation</h4>

<p><em>Label Propagation</em> can be used to implement community detection on large
graphs. The idea is that each vertex should be in the community that most of
his neighbors are in. We iteratively determine this by first assigning random
Community ID’s. Then each iteration, a vertex will send it’s current community
ID to all its neighbor vertices. Then each vertex adopts the community ID it
received most frequently during the iteration.</p>

<p>The algorithm runs until it converges, which likely never really happens on
large graphs. Therefore you need to specify a maximum iteration bound which
suits you. The default bound is 500 iterations, which is likely too large for
your application. It should work best on undirected graphs, results on directed
graphs might vary depending on the density of your graph.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">pregel</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">@arangodb/pregel</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">handle</span> <span class="o">=</span> <span class="nx">pregel</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="dl">"</span><span class="s2">labelpropagation</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">yourgraph</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span><span class="na">maxGSS</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="na">resultField</span><span class="p">:</span> <span class="dl">"</span><span class="s2">community</span><span class="dl">"</span><span class="p">});</span>
</code></pre></div></div>

<h4 id="speaker-listener-label-propagation">Speaker-Listener Label Propagation</h4>

<p>The <a href="https://arxiv.org/pdf/1109.5720.pdf" target="_blank">Speaker-listener Label Propagation</a>
(SLPA) can be used to implement community detection. It works similar to the
label propagation algorithm, but now every node additionally accumulates a
memory of observed labels (instead of forgetting all but one label).</p>

<p>Before the algorithm run, every vertex is initialized with an unique ID
(the initial community label).
During the run three steps are executed for each vertex:</p>

<ol>
  <li>Current vertex is the listener all other vertices are speakers</li>
  <li>Each speaker sends out a label from memory, we send out a random label with a
probability proportional to the number of times the vertex observed the label</li>
  <li>The listener remembers one of the labels, we always choose the most
frequently observed label</li>
</ol>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">pregel</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">@arangodb/pregel</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">handle</span> <span class="o">=</span> <span class="nx">pregel</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="dl">"</span><span class="s2">slpa</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">yourgraph</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span><span class="na">maxGSS</span><span class="p">:</span><span class="mi">100</span><span class="p">,</span> <span class="na">resultField</span><span class="p">:</span> <span class="dl">"</span><span class="s2">community</span><span class="dl">"</span><span class="p">});</span>
</code></pre></div></div>

<p>You can also execute SLPA with the <code class="language-plaintext highlighter-rouge">maxCommunities</code> parameter to limit the
number of output communities. Internally the algorithm will still keep the
memory of all labels, but the output is reduced to just he <code class="language-plaintext highlighter-rouge">n</code> most frequently
observed labels.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">pregel</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">@arangodb/pregel</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">handle</span> <span class="o">=</span> <span class="nx">pregel</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="dl">"</span><span class="s2">slpa</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">yourgraph</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span><span class="na">maxGSS</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="na">resultField</span><span class="p">:</span> <span class="dl">"</span><span class="s2">community</span><span class="dl">"</span><span class="p">,</span> <span class="na">maxCommunities</span><span class="p">:</span> <span class="mi">1</span><span class="p">});</span>
<span class="c1">// check the status periodically for completion</span>
<span class="nx">pregel</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="nx">handle</span><span class="p">);</span>
</code></pre></div></div>

<h2 id="limits">Limits</h2>

<p>Pregel algorithms in ArangoDB will by default store temporary vertex and edge
data in main memory. For large datasets this is going to cause problems, as
servers may run out of memory while loading the data.</p>

<p>To avoid servers from running out of memory while loading the dataset, a Pregel
job can be started with the attribute <code class="language-plaintext highlighter-rouge">useMemoryMaps</code> set to <code class="language-plaintext highlighter-rouge">true</code>. This will
make the algorithm use memory-mapped files as a backing storage in case of huge
datasets. Falling back to memory-mapped files might make the computation
disk-bound, but may be the only way to complete the computation at all.</p>

<p>Parts of the Pregel temporary results (aggregated messages) may also be
stored in main memory, and currently the aggregation cannot fall back to
memory-mapped files. That means if an algorithm needs to store a lot of
result messages temporarily, it may consume a lot of main memory.</p>

<p>In general it is also recommended to set the <code class="language-plaintext highlighter-rouge">store</code> attribute of Pregel jobs
to <code class="language-plaintext highlighter-rouge">true</code> to make a job store its value on disk and not just in main memory.
This way the results are removed from main memory once a Pregel job completes.
If the <code class="language-plaintext highlighter-rouge">store</code> attribute is explicitly set to <code class="language-plaintext highlighter-rouge">false</code>, result sets of completed
Pregel runs will not be removed from main memory until the result set is
explicitly discarded by a call to the <code class="language-plaintext highlighter-rouge">cancel()</code> method
(or a shutdown of the server).</p>

            </section>
            
<section class="page-nav">
  <a href="graphs-edges.html">&#x276e;&nbsp;&nbsp;Working with Edges</a>
  <a class="next" href="arangosearch.html">ArangoSearch&nbsp;&nbsp;&#x276f;</a>
  <div style="clear: both"></div>
</section>
            <div id="page-footer" class="localized-footer">
              <hr>
              <p>© ArangoDB - the native multi-model NoSQL database</p>
            </div>
          </div>
        </div>
        <script type="text/javascript">
          var disablePageToc = null;
          if (!disablePageToc) {
            generateToc();
          }
        </script>
      </div>
    </div>
  </div>
  <!-- Including InstantSearch.js library and styling -->
<script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch.min.js"></script>
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch.min.css">
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch-theme-algolia.min.css">

<script>
// Instanciating InstantSearch.js with Algolia credentials
const search = instantsearch({
  appId: 'IOUJQ85602',
  indexName: 'dev_DOCS',
  apiKey: '1fc63d8ff5b71963f0354561b770b591',
  searchFunction: function(helper) {
    var container = document.querySelector('#search-hits');

    if (helper.state.query === '') {
        container.style.display = 'none';
    } else {
        container.style.display = '';
    }

    helper.search();
  }
});

// Adding searchbar and results widgets
search.addWidget(
  instantsearch.widgets.searchBox({
    container: '#search-searchbar',
    placeholder: 'Search Documentation...',
    poweredBy: false // This is required if you're on the free Community plan
  })
);
search.addWidget(
    instantsearch.widgets.hits({
        container: '#search-hits',
        templates: {
            item: function(hit) {
                return '<div class="post-item">' +
                    '<a class="post-link" href="https://www.arangodb.com/docs'&#32;+&#32;hit.url&#32;+&#32;'"><div>' + (hit.headings[0] || "ArangoDB Documentation") + '</div>' +
                    '<div class="post-snippet">' + hit.excerpt_text + '</div></a>' +
                    '</div>';
            },
        },
    })
);

// Starting the search
search.start();
</script>
  <script type="text/javascript" id="hs-script-loader" async defer src="https://js.hs-scripts.com/2482448.js"></script>
</body>
</html>
